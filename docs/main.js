"use strict";(self.webpackChunkpractice=self.webpackChunkpractice||[]).push([[179],{966:(qi,Bn,We)=>{We.d(Bn,{$:()=>_l,A:()=>pe,G:()=>bt,K:()=>cl,L:()=>Jo,N:()=>Hn,P:()=>Fl,R:()=>gv,U:()=>je,V:()=>jd,W:()=>jt,X:()=>yr,Y:()=>Ur,Z:()=>Xn,_:()=>nu,a:()=>hr,a0:()=>Fi,a1:()=>ii,a2:()=>$d,a3:()=>jy,a4:()=>Il,a5:()=>El,a6:()=>$y,a7:()=>Hy,a8:()=>Gy,a9:()=>n0,aA:()=>Rd,aB:()=>Ft,aC:()=>ue,aD:()=>vv,aE:()=>oe,aF:()=>gt,aG:()=>Me,aH:()=>_g,aI:()=>oa,aJ:()=>zt,aN:()=>Ji,aQ:()=>er,aa:()=>r0,ab:()=>s0,ac:()=>o0,ad:()=>a0,ae:()=>u0,af:()=>l0,ag:()=>c0,ah:()=>zy,ak:()=>qy,al:()=>Xp,am:()=>Wy,ap:()=>yl,aq:()=>Zy,as:()=>tg,at:()=>rg,au:()=>Gt,av:()=>Tt,aw:()=>_e,ax:()=>yt,ay:()=>Do,az:()=>wv,b:()=>nv,c:()=>pg,d:()=>gg,e:()=>ah,f:()=>_v,g:()=>vg,h:()=>ua,i:()=>ug,j:()=>g0,k:()=>vh,l:()=>dg,m:()=>ha,p:()=>Jt,r:()=>hg,s:()=>rh,u:()=>Vl});var S=We(861),Ee=We(881),P=We(90),ke=We(877),Ot=We(582),cn=We(859);const Jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const bt=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},jn=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_t=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new ke.Yd("@firebase/auth");function En(f,...l){tt.logLevel<=ke.in.ERROR&&tt.error(`Auth (${Ee.SDK_VERSION}): ${f}`,...l)}function yt(f,...l){throw wn(f,...l)}function Ft(f,...l){return wn(f,...l)}function Or(f,l,c){const g=Object.assign(Object.assign({},jn()),{[l]:c});return new P.LL("auth","Firebase",g).create(l,{appName:f.name})}function kt(f){return Or(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ot(f,l,c){if(!(l instanceof c))throw c.name!==l.constructor.name&&yt(f,"argument-error"),Or(f,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wn(f,...l){if("string"!=typeof f){const c=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=f.name),f._errorFactory.create(c,...g)}return _t.create(f,...l)}function ue(f,l,...c){if(!f)throw wn(l,...c)}function nn(f){const l="INTERNAL ASSERTION FAILED: "+f;throw En(l),new Error(l)}function Gt(f,l){f||nn(l)}function dn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function kr(){return"http:"===ti()||"https:"===ti()}function ti(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Mi{constructor(l,c){this.shortDelay=l,this.longDelay=c,Gt(c>l,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function ct(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kr()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function K(f,l){Gt(f.emulator,"Emulator should always be set here");const{url:c}=f.emulator;return l?`${c}${l.startsWith("/")?l.slice(1):l}`:c}class Y{static initialize(l,c,g){this.fetchImpl=l,c&&(this.headersImpl=c),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},re=new Mi(3e4,6e4);function se(f,l){return f.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:f.tenantId}):l}function J(f,l,c,g){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,S.Z)(function*(f,l,c,g,I={}){return vt(f,I,(0,S.Z)(function*(){let C={},V={};g&&("GET"===l?V=g:C={body:JSON.stringify(g)});const W=(0,P.xO)(Object.assign({key:f.config.apiKey},V)).slice(1),ce=yield f._getAdditionalHeaders();ce["Content-Type"]="application/json",f.languageCode&&(ce["X-Firebase-Locale"]=f.languageCode);const Re=Object.assign({method:l,headers:ce},C);return(0,P.L_)()||(Re.referrerPolicy="no-referrer"),Y.fetch()(rn(f,f.config.apiHost,c,W),Re)}))})).apply(this,arguments)}function vt(f,l,c){return be.apply(this,arguments)}function be(){return(be=(0,S.Z)(function*(f,l,c){f._canInitEmulator=!1;const g=Object.assign(Object.assign({},ee),l);try{const I=new xt(f),C=yield Promise.race([c(),I.promise]);I.clearNetworkTimeout();const V=yield C.json();if("needConfirmation"in V)throw qt(f,"account-exists-with-different-credential",V);if(C.ok&&!("errorMessage"in V))return V;{const W=C.ok?V.errorMessage:V.error.message,[ce,Re]=W.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ce)throw qt(f,"credential-already-in-use",V);if("EMAIL_EXISTS"===ce)throw qt(f,"email-already-in-use",V);if("USER_DISABLED"===ce)throw qt(f,"user-disabled",V);const $e=g[ce]||ce.toLowerCase().replace(/[_\s]+/g,"-");if(Re)throw Or(f,$e,Re);yt(f,$e)}}catch(I){if(I instanceof P.ZR)throw I;yt(f,"network-request-failed",{message:String(I)})}})).apply(this,arguments)}function Oe(f,l,c,g){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,S.Z)(function*(f,l,c,g,I={}){const C=yield J(f,l,c,g,I);return"mfaPendingCredential"in C&&yt(f,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function rn(f,l,c,g){const I=`${l}${c}?${g}`;return f.config.emulator?K(f.config,I):`${f.config.apiScheme}://${I}`}function ar(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xt{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((c,g)=>{this.timer=setTimeout(()=>g(Ft(this.auth,"network-request-failed")),re.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qt(f,l,c){const g={appName:f.name};c.email&&(g.email=c.email),c.phoneNumber&&(g.phoneNumber=c.phoneNumber);const I=Ft(f,l,g);return I.customData._tokenResponse=c,I}function Pn(f){return void 0!==f&&void 0!==f.getResponse}function $n(f){return void 0!==f&&void 0!==f.enterprise}class ur{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const c of this.recaptchaEnforcementState)if(c.provider&&c.provider===l)return ar(c.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function Ki(){return(Ki=(0,S.Z)(function*(f){return(yield J(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ut(f,l){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,S.Z)(function*(f,l){return J(f,"GET","/v2/recaptchaConfig",se(f,l))})).apply(this,arguments)}function Ps(){return(Ps=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function _i(){return(_i=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function wr(f,l){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function an(f){if(f)try{const l=new Date(Number(f));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function lr(){return(lr=(0,S.Z)(function*(f,l=!1){const c=(0,P.m9)(f),g=yield c.getIdToken(l),I=Ms(g);ue(I&&I.exp&&I.auth_time&&I.iat,c.auth,"internal-error");const C="object"==typeof I.firebase?I.firebase:void 0,V=C?.sign_in_provider;return{claims:I,token:g,authTime:an(Mn(I.auth_time)),issuedAtTime:an(Mn(I.iat)),expirationTime:an(Mn(I.exp)),signInProvider:V||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function Mn(f){return 1e3*Number(f)}function Ms(f){const[l,c,g]=f.split(".");if(void 0===l||void 0===c||void 0===g)return En("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,P.tV)(c);return I?JSON.parse(I):(En("Failed to decode base64 JWT payload"),null)}catch(I){return En("Caught error parsing JWT payload as JSON",I?.toString()),null}}function yi(f){const l=Ms(f);return ue(l,"internal-error"),ue(typeof l.exp<"u","internal-error"),ue(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function Wt(f,l){return vi.apply(this,arguments)}function vi(){return(vi=(0,S.Z)(function*(f,l,c=!1){if(c)return l;try{return yield l}catch(g){throw g instanceof P.ZR&&function us({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(g)&&f.auth.currentUser===f&&(yield f.auth.signOut()),g}})).apply(this,arguments)}class xn{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var c;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const I=(null!==(c=this.user.stsTokenManager.expirationTime)&&void 0!==c?c:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(l=!1){var c=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,S.Z)(function*(){yield c.iteration()}),g)}iteration(){var l=this;return(0,S.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(c){return void("auth/network-request-failed"===c?.code&&l.schedule(!0))}l.schedule()})()}}class cr{constructor(l,c){this.createdAt=l,this.lastLoginAt=c,this._initializeTime()}_initializeTime(){this.lastSignInTime=an(this.lastLoginAt),this.creationTime=an(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function On(f){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,S.Z)(function*(f){var l;const c=f.auth,g=yield f.getIdToken(),I=yield Wt(f,wr(c,{idToken:g}));ue(I?.users.length,c,"internal-error");const C=I.users[0];f._notifyReloadListener(C);const V=null!==(l=C.providerUserInfo)&&void 0!==l&&l.length?ao(C.providerUserInfo):[],W=function ds(f,l){return[...f.filter(g=>!l.some(I=>I.providerId===g.providerId)),...l]}(f.providerData,V),$e=!!f.isAnonymous&&!(f.email&&C.passwordHash||W?.length),Dt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:W,metadata:new cr(C.createdAt,C.lastLoginAt),isAnonymous:$e};Object.assign(f,Dt)})).apply(this,arguments)}function cs(){return(cs=(0,S.Z)(function*(f){const l=(0,P.m9)(f);yield On(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function ao(f){return f.map(l=>{var{providerId:c}=l,g=(0,Ot._T)(l,["providerId"]);return{providerId:c,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function xi(){return(xi=(0,S.Z)(function*(f,l){const c=yield vt(f,{},(0,S.Z)(function*(){const g=(0,P.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:I,apiKey:C}=f.config,V=rn(f,I,"/v1/token",`key=${C}`),W=yield f._getAdditionalHeaders();return W["Content-Type"]="application/x-www-form-urlencoded",Y.fetch()(V,{method:"POST",headers:W,body:g})}));return{accessToken:c.access_token,expiresIn:c.expires_in,refreshToken:c.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,S.Z)(function*(f,l){return J(f,"POST","/v2/accounts:revokeToken",se(f,l))})).apply(this,arguments)}class E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){ue(l.idToken,"internal-error"),ue(typeof l.idToken<"u","internal-error"),ue(typeof l.refreshToken<"u","internal-error");const c="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):yi(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,c)}updateFromIdToken(l){ue(0!==l.length,"internal-error");const c=yi(l);this.updateTokensAndExpiration(l,null,c)}getToken(l,c=!1){var g=this;return(0,S.Z)(function*(){return c||!g.accessToken||g.isExpired?(ue(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,c){var g=this;return(0,S.Z)(function*(){const{accessToken:I,refreshToken:C,expiresIn:V}=yield function xs(f,l){return xi.apply(this,arguments)}(l,c);g.updateTokensAndExpiration(I,C,Number(V))})()}updateTokensAndExpiration(l,c,g){this.refreshToken=c||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,c){const{refreshToken:g,accessToken:I,expirationTime:C}=c,V=new E;return g&&(ue("string"==typeof g,"internal-error",{appName:l}),V.refreshToken=g),I&&(ue("string"==typeof I,"internal-error",{appName:l}),V.accessToken=I),C&&(ue("number"==typeof C,"internal-error",{appName:l}),V.expirationTime=C),V}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new E,this.toJSON())}_performRefresh(){return nn("not implemented")}}function w(f,l){ue("string"==typeof f||typeof f>"u","internal-error",{appName:l})}class x{constructor(l){var{uid:c,auth:g,stsTokenManager:I}=l,C=(0,Ot._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=c,this.auth=g,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new cr(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(l){var c=this;return(0,S.Z)(function*(){const g=yield Wt(c,c.stsTokenManager.getToken(c.auth,l));return ue(g,c.auth,"internal-error"),c.accessToken!==g&&(c.accessToken=g,yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)),g})()}getIdTokenResult(l){return function hn(f){return lr.apply(this,arguments)}(this,l)}reload(){return function ls(f){return cs.apply(this,arguments)}(this)}_assign(l){this!==l&&(ue(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(c=>Object.assign({},c)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const c=new x(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return c.metadata._copy(this.metadata),c}_onReload(l){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,c=!1){var g=this;return(0,S.Z)(function*(){let I=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),I=!0),c&&(yield On(g)),yield g.auth._persistUserIfCurrent(g),I&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,S.Z)(function*(){if((0,Ee._isFirebaseServerApp)(l.auth.app))return Promise.reject(kt(l.auth));const c=yield l.getIdToken();return yield Wt(l,function as(f,l){return Ps.apply(this,arguments)}(l.auth,{idToken:c})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,c){var g,I,C,V,W,ce,Re,$e;const Dt=null!==(g=c.displayName)&&void 0!==g?g:void 0,$r=null!==(I=c.email)&&void 0!==I?I:void 0,vs=null!==(C=c.phoneNumber)&&void 0!==C?C:void 0,fa=null!==(V=c.photoURL)&&void 0!==V?V:void 0,wh=null!==(W=c.tenantId)&&void 0!==W?W:void 0,Yl=null!==(ce=c._redirectEventId)&&void 0!==ce?ce:void 0,Th=null!==(Re=c.createdAt)&&void 0!==Re?Re:void 0,br=null!==($e=c.lastLoginAt)&&void 0!==$e?$e:void 0,{uid:Dh,emailVerified:Mg,isAnonymous:xg,providerData:Jl,stsTokenManager:Xl}=c;ue(Dh&&Xl,l,"internal-error");const Vv=E.fromJSON(this.name,Xl);ue("string"==typeof Dh,l,"internal-error"),w(Dt,l.name),w($r,l.name),ue("boolean"==typeof Mg,l,"internal-error"),ue("boolean"==typeof xg,l,"internal-error"),w(vs,l.name),w(fa,l.name),w(wh,l.name),w(Yl,l.name),w(Th,l.name),w(br,l.name);const Ch=new x({uid:Dh,auth:l,email:$r,emailVerified:Mg,displayName:Dt,isAnonymous:xg,photoURL:fa,phoneNumber:vs,tenantId:wh,stsTokenManager:Vv,createdAt:Th,lastLoginAt:br});return Jl&&Array.isArray(Jl)&&(Ch.providerData=Jl.map(Fv=>Object.assign({},Fv))),Yl&&(Ch._redirectEventId=Yl),Ch}static _fromIdTokenResponse(l,c,g=!1){return(0,S.Z)(function*(){const I=new E;I.updateFromServerResponse(c);const C=new x({uid:c.localId,auth:l,stsTokenManager:I,isAnonymous:g});return yield On(C),C})()}static _fromGetAccountInfoResponse(l,c,g){return(0,S.Z)(function*(){const I=c.users[0];ue(void 0!==I.localId,"internal-error");const C=void 0!==I.providerUserInfo?ao(I.providerUserInfo):[],V=!(I.email&&I.passwordHash||C?.length),W=new E;W.updateFromIdToken(g);const ce=new x({uid:I.localId,auth:l,stsTokenManager:W,isAnonymous:V}),Re={uid:I.localId,displayName:I.displayName||null,photoURL:I.photoUrl||null,email:I.email||null,emailVerified:I.emailVerified||!1,phoneNumber:I.phoneNumber||null,tenantId:I.tenantId||null,providerData:C,metadata:new cr(I.createdAt,I.lastLoginAt),isAnonymous:!(I.email&&I.passwordHash||C?.length)};return Object.assign(ce,Re),ce})()}}const R=new Map;function oe(f){Gt(f instanceof Function,"Expected a class definition");let l=R.get(f);return l?(Gt(l instanceof f,"Instance stored in cache mismatched with class"),l):(l=new f,R.set(f,l),l)}const je=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,S.Z)(function*(){return!0})()}_set(c,g){var I=this;return(0,S.Z)(function*(){I.storage[c]=g})()}_get(c){var g=this;return(0,S.Z)(function*(){const I=g.storage[c];return void 0===I?null:I})()}_remove(c){var g=this;return(0,S.Z)(function*(){delete g.storage[c]})()}_addListener(c,g){}_removeListener(c,g){}}return f.type="NONE",f})();function gt(f,l,c){return`firebase:${f}:${l}:${c}`}class Le{constructor(l,c,g){this.persistence=l,this.auth=c,this.userKey=g;const{config:I,name:C}=this.auth;this.fullUserKey=gt(this.userKey,I.apiKey,C),this.fullPersistenceKey=gt("persistence",I.apiKey,C),this.boundEventHandler=c._onStorageEvent.bind(c),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,S.Z)(function*(){const c=yield l.persistence._get(l.fullUserKey);return c?x._fromJSON(l.auth,c):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var c=this;return(0,S.Z)(function*(){if(c.persistence===l)return;const g=yield c.getCurrentUser();return yield c.removeCurrentUser(),c.persistence=l,g?c.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,c,g="authUser"){return(0,S.Z)(function*(){if(!c.length)return new Le(oe(je),l,g);const I=(yield Promise.all(c.map(function(){var Re=(0,S.Z)(function*($e){if(yield $e._isAvailable())return $e});return function($e){return Re.apply(this,arguments)}}()))).filter(Re=>Re);let C=I[0]||oe(je);const V=gt(g,l.config.apiKey,l.name);let W=null;for(const Re of c)try{const $e=yield Re._get(V);if($e){const Dt=x._fromJSON(l,$e);Re!==C&&(W=Dt),C=Re;break}}catch{}const ce=I.filter(Re=>Re._shouldAllowMigration);return C._shouldAllowMigration&&ce.length?(C=ce[0],W&&(yield C._set(V,W.toJSON())),yield Promise.all(c.map(function(){var Re=(0,S.Z)(function*($e){if($e!==C)try{yield $e._remove(V)}catch{}});return function($e){return Re.apply(this,arguments)}}())),new Le(C,l,g)):new Le(C,l,g)})()}}function Ae(f){const l=f.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(uo(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(xe(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(lo(l))return"Blackberry";if(Xe(l))return"Webos";if(sn(l))return"Safari";if((l.includes("chrome/")||Oi(l))&&!l.includes("edge/"))return"Chrome";if(_e(l))return"Android";{const g=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function xe(f=(0,P.z$)()){return/firefox\//i.test(f)}function sn(f=(0,P.z$)()){const l=f.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Oi(f=(0,P.z$)()){return/crios\//i.test(f)}function uo(f=(0,P.z$)()){return/iemobile/i.test(f)}function _e(f=(0,P.z$)()){return/android/i.test(f)}function lo(f=(0,P.z$)()){return/blackberry/i.test(f)}function Xe(f=(0,P.z$)()){return/webos/i.test(f)}function Tt(f=(0,P.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Rd(f=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function ne(f=(0,P.z$)()){return Tt(f)||_e(f)||Xe(f)||lo(f)||/windows phone/i.test(f)||uo(f)}function ye(f,l=[]){let c;switch(f){case"Browser":c=Ae((0,P.z$)());break;case"Worker":c=`${Ae((0,P.z$)())}-${f}`;break;default:c=f}const g=l.length?l.join(","):"FirebaseCore-web";return`${c}/JsCore/${Ee.SDK_VERSION}/${g}`}class nt{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,c){const g=C=>new Promise((V,W)=>{try{V(l(C))}catch(ce){W(ce)}});g.onAbort=c,this.queue.push(g);const I=this.queue.length-1;return()=>{this.queue[I]=()=>Promise.resolve()}}runMiddleware(l){var c=this;return(0,S.Z)(function*(){if(c.auth.currentUser===l)return;const g=[];try{for(const I of c.queue)yield I(l),I.onAbort&&g.push(I.onAbort)}catch(I){g.reverse();for(const C of g)try{C()}catch{}throw c.auth._errorFactory.create("login-blocked",{originalMessage:I?.message})}})()}}function ht(){return(ht=(0,S.Z)(function*(f,l={}){return J(f,"GET","/v2/passwordPolicy",se(f,l))})).apply(this,arguments)}class fn{constructor(l){var c,g,I,C;const V=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(c=V.minPasswordLength)&&void 0!==c?c:6,V.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=V.maxPasswordLength),void 0!==V.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=V.containsLowercaseCharacter),void 0!==V.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=V.containsUppercaseCharacter),void 0!==V.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=V.containsNumericCharacter),void 0!==V.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=V.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(I=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==I?I:"",this.forceUpgradeOnSignin=null!==(C=l.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=l.schemaVersion}validatePassword(l){var c,g,I,C,V,W;const ce={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,ce),this.validatePasswordCharacterOptions(l,ce),ce.isValid&&(ce.isValid=null===(c=ce.meetsMinPasswordLength)||void 0===c||c),ce.isValid&&(ce.isValid=null===(g=ce.meetsMaxPasswordLength)||void 0===g||g),ce.isValid&&(ce.isValid=null===(I=ce.containsLowercaseLetter)||void 0===I||I),ce.isValid&&(ce.isValid=null===(C=ce.containsUppercaseLetter)||void 0===C||C),ce.isValid&&(ce.isValid=null===(V=ce.containsNumericCharacter)||void 0===V||V),ce.isValid&&(ce.isValid=null===(W=ce.containsNonAlphanumericCharacter)||void 0===W||W),ce}validatePasswordLengthOptions(l,c){const g=this.customStrengthOptions.minPasswordLength,I=this.customStrengthOptions.maxPasswordLength;g&&(c.meetsMinPasswordLength=l.length>=g),I&&(c.meetsMaxPasswordLength=l.length<=I)}validatePasswordCharacterOptions(l,c){let g;this.updatePasswordCharacterOptionsStatuses(c,!1,!1,!1,!1);for(let I=0;I<l.length;I++)g=l.charAt(I),this.updatePasswordCharacterOptionsStatuses(c,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,c,g,I,C){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=c)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=I)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=C))}}class Ii{constructor(l,c,g,I){this.app=l,this.heartbeatServiceProvider=c,this.appCheckServiceProvider=g,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pd(this),this.idTokenSubscription=new Pd(this),this.beforeStateQueue=new nt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_t,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(l,c){var g=this;return c&&(this._popupRedirectResolver=oe(c)),this._initializationPromise=this.queue((0,S.Z)(function*(){var I,C;if(!g._deleted&&(g.persistenceManager=yield Le.create(g,l),!g._deleted)){if(null!==(I=g._popupRedirectResolver)&&void 0!==I&&I._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(c),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,S.Z)(function*(){if(l._deleted)return;const c=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||c){if(l.currentUser&&c&&l.currentUser.uid===c.uid)return l._currentUser._assign(c),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(c,!0)}})()}initializeCurrentUserFromIdToken(l){var c=this;return(0,S.Z)(function*(){try{const g=yield wr(c,{idToken:l}),I=yield x._fromGetAccountInfoResponse(c,g,l);yield c.directlySetCurrentUser(I)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield c.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var c=this;return(0,S.Z)(function*(){var g;if((0,Ee._isFirebaseServerApp)(c.app)){const W=c.app.settings.authIdToken;return W?new Promise(ce=>{setTimeout(()=>c.initializeCurrentUserFromIdToken(W).then(ce,ce))}):c.directlySetCurrentUser(null)}const I=yield c.assertedPersistence.getCurrentUser();let C=I,V=!1;if(l&&c.config.authDomain){yield c.getOrInitRedirectPersistenceManager();const W=null===(g=c.redirectUser)||void 0===g?void 0:g._redirectEventId,ce=C?._redirectEventId,Re=yield c.tryRedirectSignIn(l);(!W||W===ce)&&Re?.user&&(C=Re.user,V=!0)}if(!C)return c.directlySetCurrentUser(null);if(!C._redirectEventId){if(V)try{yield c.beforeStateQueue.runMiddleware(C)}catch(W){C=I,c._popupRedirectResolver._overrideRedirectResult(c,()=>Promise.reject(W))}return C?c.reloadAndSetCurrentUserOrClear(C):c.directlySetCurrentUser(null)}return ue(c._popupRedirectResolver,c,"argument-error"),yield c.getOrInitRedirectPersistenceManager(),c.redirectUser&&c.redirectUser._redirectEventId===C._redirectEventId?c.directlySetCurrentUser(C):c.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(l){var c=this;return(0,S.Z)(function*(){let g=null;try{g=yield c._popupRedirectResolver._completeRedirectFn(c,l,!0)}catch{yield c._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var c=this;return(0,S.Z)(function*(){try{yield On(l)}catch(g){if("auth/network-request-failed"!==g?.code)return c.directlySetCurrentUser(null)}return c.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Wi(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var l=this;return(0,S.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var c=this;return(0,S.Z)(function*(){if((0,Ee._isFirebaseServerApp)(c.app))return Promise.reject(kt(c));const g=l?(0,P.m9)(l):null;return g&&ue(g.auth.config.apiKey===c.config.apiKey,c,"invalid-user-token"),c._updateCurrentUser(g&&g._clone(c))})()}_updateCurrentUser(l,c=!1){var g=this;return(0,S.Z)(function*(){if(!g._deleted)return l&&ue(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),c||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,S.Z)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,S.Z)(function*(){return(0,Ee._isFirebaseServerApp)(l.app)?Promise.reject(kt(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var c=this;return(0,Ee._isFirebaseServerApp)(this.app)?Promise.reject(kt(this)):this.queue((0,S.Z)(function*(){yield c.assertedPersistence.setPersistence(oe(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var c=this;return(0,S.Z)(function*(){c._getPasswordPolicyInternal()||(yield c._updatePasswordPolicy());const g=c._getPasswordPolicyInternal();return g.schemaVersion!==c.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(c._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,S.Z)(function*(){const c=yield function it(f){return ht.apply(this,arguments)}(l),g=new fn(c);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new P.LL("auth","Firebase",l())}onAuthStateChanged(l,c,g){return this.registerStateListener(this.authStateSubscription,l,c,g)}beforeAuthStateChanged(l,c){return this.beforeStateQueue.pushCallback(l,c)}onIdTokenChanged(l,c,g){return this.registerStateListener(this.idTokenSubscription,l,c,g)}authStateReady(){return new Promise((l,c)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},c)}})}revokeAccessToken(l){var c=this;return(0,S.Z)(function*(){if(c.currentUser){const g=yield c.currentUser.getIdToken(),I={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=c.tenantId&&(I.tenantId=c.tenantId),yield function Ni(f,l){return T.apply(this,arguments)}(c,I)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,c){var g=this;return(0,S.Z)(function*(){const I=yield g.getOrInitRedirectPersistenceManager(c);return null===l?I.removeCurrentUser():I.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var c=this;return(0,S.Z)(function*(){if(!c.redirectPersistenceManager){const g=l&&oe(l)||c._popupRedirectResolver;ue(g,c,"argument-error"),c.redirectPersistenceManager=yield Le.create(c,[oe(g._redirectPersistence)],"redirectUser"),c.redirectUser=yield c.redirectPersistenceManager.getCurrentUser()}return c.redirectPersistenceManager})()}_redirectUserForId(l){var c=this;return(0,S.Z)(function*(){var g,I;return c._isInitialized&&(yield c.queue((0,S.Z)(function*(){}))),(null===(g=c._currentUser)||void 0===g?void 0:g._redirectEventId)===l?c._currentUser:(null===(I=c.redirectUser)||void 0===I?void 0:I._redirectEventId)===l?c.redirectUser:null})()}_persistUserIfCurrent(l){var c=this;return(0,S.Z)(function*(){if(l===c.currentUser)return c.queue((0,S.Z)(function*(){return c.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,c;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(c=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==c?c:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,c,g,I){if(this._deleted)return()=>{};const C="function"==typeof c?c:c.next.bind(c);let V=!1;const W=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(W,this,"internal-error"),W.then(()=>{V||C(this.currentUser)}),"function"==typeof c){const ce=l.addObserver(c,g,I);return()=>{V=!0,ce()}}{const ce=l.addObserver(c);return()=>{V=!0,ce()}}}directlySetCurrentUser(l){var c=this;return(0,S.Z)(function*(){c.currentUser&&c.currentUser!==l&&c._currentUser._stopProactiveRefresh(),l&&c.isProactiveRefreshEnabled&&l._startProactiveRefresh(),c.currentUser=l,l?yield c.assertedPersistence.setCurrentUser(l):yield c.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=ye(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,S.Z)(function*(){var c;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const I=yield null===(c=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===c?void 0:c.getHeartbeatsHeader();I&&(g["X-Firebase-Client"]=I);const C=yield l._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var l=this;return(0,S.Z)(function*(){var c;const g=yield null===(c=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===c?void 0:c.getToken();return g?.error&&function Jn(f,...l){tt.logLevel<=ke.in.WARN&&tt.warn(`Auth (${Ee.SDK_VERSION}): ${f}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function zt(f){return(0,P.m9)(f)}class Pd{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,P.ne)(c=>this.observer=c)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ka={loadJS:()=>(0,S.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Md(f){return Ka.loadJS(f)}function Oy(f){return`__${f}${Math.floor(1e6*Math.random())}`}const JC="NO_RECAPTCHA";class He{constructor(l){this.type="recaptcha-enterprise",this.auth=zt(l)}verify(l="verify",c=!1){var g=this;return(0,S.Z)(function*(){function C(){return C=(0,S.Z)(function*(W){if(!c){if(null==W.tenantId&&null!=W._agentRecaptchaConfig)return W._agentRecaptchaConfig.siteKey;if(null!=W.tenantId&&void 0!==W._tenantRecaptchaConfigs[W.tenantId])return W._tenantRecaptchaConfigs[W.tenantId].siteKey}return new Promise(function(){var ce=(0,S.Z)(function*(Re,$e){Ut(W,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Dt=>{if(void 0!==Dt.recaptchaKey){const $r=new ur(Dt);return null==W.tenantId?W._agentRecaptchaConfig=$r:W._tenantRecaptchaConfigs[W.tenantId]=$r,Re($r.siteKey)}$e(new Error("recaptcha Enterprise site key undefined"))}).catch(Dt=>{$e(Dt)})});return function(Re,$e){return ce.apply(this,arguments)}}())}),C.apply(this,arguments)}function V(W,ce,Re){const $e=window.grecaptcha;$n($e)?$e.enterprise.ready(()=>{$e.enterprise.execute(W,{action:l}).then(Dt=>{ce(Dt)}).catch(()=>{ce(JC)})}):Re(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((W,ce)=>{(function I(W){return C.apply(this,arguments)})(g.auth).then(Re=>{if(!c&&$n(window.grecaptcha))V(Re,W,ce);else{if(typeof window>"u")return void ce(new Error("RecaptchaVerifier is only supported in browser"));let $e=function Ei(){return Ka.recaptchaEnterpriseScript}();0!==$e.length&&($e+=Re),Md($e).then(()=>{V(Re,W,ce)}).catch(Dt=>{ce(Dt)})}}).catch(Re=>{ce(Re)})})})()}}function ky(f,l,c){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,S.Z)(function*(f,l,c,g=!1){const I=new He(f);let C;try{C=yield I.verify(c)}catch{C=yield I.verify(c,!0)}const V=Object.assign({},l);return Object.assign(V,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(V,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(V,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),V})).apply(this,arguments)}function Ns(f,l,c,g){return xd.apply(this,arguments)}function xd(){return xd=(0,S.Z)(function*(f,l,c,g){var I;if(null!==(I=f._getRecaptchaConfig())&&void 0!==I&&I.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield ky(f,l,c,"getOobCode"===c);return g(f,C)}return g(f,l).catch(function(){var C=(0,S.Z)(function*(V){if("auth/missing-recaptcha-token"===V.code){console.log(`${c} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const W=yield ky(f,l,c,"getOobCode"===c);return g(f,W)}return Promise.reject(V)});return function(V){return C.apply(this,arguments)}}())}),xd.apply(this,arguments)}function cl(f,l,c){const g=zt(f);ue(g._canInitEmulator,g,"emulator-config-failed"),ue(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const I=!!c?.disableWarnings,C=Od(l),{host:V,port:W}=function Vy(f){const l=Od(f),c=/(\/\/)?([^?#/]+)/.exec(f.substr(l.length));if(!c)return{host:"",port:null};const g=c[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(g);if(I){const C=I[1];return{host:C,port:Qe(g.substr(C.length+1))}}{const[C,V]=g.split(":");return{host:C,port:Qe(V)}}}(l);g.config.emulator={url:`${C}//${V}${null===W?"":`:${W}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:V,port:W,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function kd(){function f(){const l=document.createElement("p"),c=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",c.position="fixed",c.width="100%",c.backgroundColor="#ffffff",c.border=".1em solid #000000",c.color="#b50000",c.bottom="0px",c.left="0px",c.margin="0px",c.zIndex="10000",c.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function Od(f){const l=f.indexOf(":");return l<0?"":f.substr(0,l+1)}function Qe(f){if(!f)return null;const l=Number(f);return isNaN(l)?null:l}class Jo{constructor(l,c){this.providerId=l,this.signInMethod=c}toJSON(){return nn("not implemented")}_getIdTokenResponse(l){return nn("not implemented")}_linkToIdToken(l,c){return nn("not implemented")}_getReauthenticationResolver(l){return nn("not implemented")}}function ri(f,l){return dl.apply(this,arguments)}function dl(){return(dl=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:resetPassword",se(f,l))})).apply(this,arguments)}function Kt(){return(Kt=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function e0(f,l){return Up.apply(this,arguments)}function Up(){return(Up=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function co(){return(co=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:update",se(f,l))})).apply(this,arguments)}function Vd(f,l){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,S.Z)(function*(f,l){return Oe(f,"POST","/v1/accounts:signInWithPassword",se(f,l))})).apply(this,arguments)}function hl(f,l){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:sendOobCode",se(f,l))})).apply(this,arguments)}function fl(){return(fl=(0,S.Z)(function*(f,l){return hl(f,l)})).apply(this,arguments)}function Za(f,l){return Os.apply(this,arguments)}function Os(){return(Os=(0,S.Z)(function*(f,l){return hl(f,l)})).apply(this,arguments)}function Ly(f,l){return ve.apply(this,arguments)}function ve(){return(ve=(0,S.Z)(function*(f,l){return hl(f,l)})).apply(this,arguments)}function mt(){return(mt=(0,S.Z)(function*(f,l){return hl(f,l)})).apply(this,arguments)}function Qa(){return(Qa=(0,S.Z)(function*(f,l){return Oe(f,"POST","/v1/accounts:signInWithEmailLink",se(f,l))})).apply(this,arguments)}function Ld(){return(Ld=(0,S.Z)(function*(f,l){return Oe(f,"POST","/v1/accounts:signInWithEmailLink",se(f,l))})).apply(this,arguments)}class Ja extends Jo{constructor(l,c,g,I=null){super("password",g),this._email=l,this._password=c,this._tenantId=I}static _fromEmailAndPassword(l,c){return new Ja(l,c,"password")}static _fromEmailAndCode(l,c,g=null){return new Ja(l,c,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const c="string"==typeof l?JSON.parse(l):l;if(c?.email&&c?.password){if("password"===c.signInMethod)return this._fromEmailAndPassword(c.email,c.password);if("emailLink"===c.signInMethod)return this._fromEmailAndCode(c.email,c.password,c.tenantId)}return null}_getIdTokenResponse(l){var c=this;return(0,S.Z)(function*(){switch(c.signInMethod){case"password":return Ns(l,{returnSecureToken:!0,email:c._email,password:c._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Vd);case"emailLink":return function pl(f,l){return Qa.apply(this,arguments)}(l,{email:c._email,oobCode:c._password});default:yt(l,"internal-error")}})()}_linkToIdToken(l,c){var g=this;return(0,S.Z)(function*(){switch(g.signInMethod){case"password":return Ns(l,{idToken:c,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e0);case"emailLink":return function Ya(f,l){return Ld.apply(this,arguments)}(l,{idToken:c,email:g._email,oobCode:g._password});default:yt(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function hs(f,l){return ki.apply(this,arguments)}function ki(){return(ki=(0,S.Z)(function*(f,l){return Oe(f,"POST","/v1/accounts:signInWithIdp",se(f,l))})).apply(this,arguments)}class Hn extends Jo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const c=new Hn(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(c.idToken=l.idToken),l.accessToken&&(c.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(c.nonce=l.nonce),l.pendingToken&&(c.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(c.accessToken=l.oauthToken,c.secret=l.oauthTokenSecret):yt("argument-error"),c}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const c="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:I}=c,C=(0,Ot._T)(c,["providerId","signInMethod"]);if(!g||!I)return null;const V=new Hn(g,I);return V.idToken=C.idToken||void 0,V.accessToken=C.accessToken||void 0,V.secret=C.secret,V.nonce=C.nonce,V.pendingToken=C.pendingToken||null,V}_getIdTokenResponse(l){return hs(l,this.buildRequest())}_linkToIdToken(l,c){const g=this.buildRequest();return g.idToken=c,hs(l,g)}_getReauthenticationResolver(l){const c=this.buildRequest();return c.autoCreate=!1,hs(l,c)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const c={};this.idToken&&(c.id_token=this.idToken),this.accessToken&&(c.access_token=this.accessToken),this.secret&&(c.oauth_token_secret=this.secret),c.providerId=this.providerId,this.nonce&&!this.pendingToken&&(c.nonce=this.nonce),l.postBody=(0,P.xO)(c)}return l}}function Nt(){return(Nt=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:sendVerificationCode",se(f,l))})).apply(this,arguments)}function Xa(){return(Xa=(0,S.Z)(function*(f,l){return Oe(f,"POST","/v1/accounts:signInWithPhoneNumber",se(f,l))})).apply(this,arguments)}function ml(){return(ml=(0,S.Z)(function*(f,l){const c=yield Oe(f,"POST","/v1/accounts:signInWithPhoneNumber",se(f,l));if(c.temporaryProof)throw qt(f,"account-exists-with-different-credential",c);return c})).apply(this,arguments)}const ps={USER_NOT_FOUND:"user-not-found"};function Bd(){return(Bd=(0,S.Z)(function*(f,l){return Oe(f,"POST","/v1/accounts:signInWithPhoneNumber",se(f,Object.assign(Object.assign({},l),{operation:"REAUTH"})),ps)})).apply(this,arguments)}class Lr extends Jo{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,c){return new Lr({verificationId:l,verificationCode:c})}static _fromTokenResponse(l,c){return new Lr({phoneNumber:l,temporaryProof:c})}_getIdTokenResponse(l){return function gl(f,l){return Xa.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,c){return function Ud(f,l){return ml.apply(this,arguments)}(l,Object.assign({idToken:c},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function eu(f,l){return Bd.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:c,verificationId:g,verificationCode:I}=this.params;return l&&c?{temporaryProof:l,phoneNumber:c}:{sessionInfo:g,code:I}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:c,verificationCode:g,phoneNumber:I,temporaryProof:C}=l;return g||c||I||C?new Lr({verificationId:c,verificationCode:g,phoneNumber:I,temporaryProof:C}):null}}class tu{constructor(l){var c,g,I,C,V,W;const ce=(0,P.zd)((0,P.pd)(l)),Re=null!==(c=ce.apiKey)&&void 0!==c?c:null,$e=null!==(g=ce.oobCode)&&void 0!==g?g:null,Dt=function Uy(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=ce.mode)&&void 0!==I?I:null);ue(Re&&$e&&Dt,"argument-error"),this.apiKey=Re,this.operation=Dt,this.code=$e,this.continueUrl=null!==(C=ce.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(V=ce.languageCode)&&void 0!==V?V:null,this.tenantId=null!==(W=ce.tenantId)&&void 0!==W?W:null}static parseLink(l){const c=function By(f){const l=(0,P.zd)((0,P.pd)(f)).link,c=l?(0,P.zd)((0,P.pd)(l)).deep_link_id:null,g=(0,P.zd)((0,P.pd)(f)).deep_link_id;return(g?(0,P.zd)((0,P.pd)(g)).link:null)||g||c||l||f}(l);try{return new tu(c)}catch{return null}}}let jd=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(c,g){return Ja._fromEmailAndPassword(c,g)}static credentialWithLink(c,g){const I=tu.parseLink(g);return ue(I,"argument-error"),Ja._fromEmailAndCode(c,I.code,I.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Qi{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Ke extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class Xn extends Ke{static credentialFromJSON(l){const c="string"==typeof l?JSON.parse(l):l;return ue("providerId"in c&&"signInMethod"in c,"argument-error"),Hn._fromParams(c)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return ue(l.idToken||l.accessToken,"argument-error"),Hn._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return Xn.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return Xn.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:c,oauthAccessToken:g,oauthTokenSecret:I,pendingToken:C,nonce:V,providerId:W}=l;if(!g&&!I&&!c&&!C||!W)return null;try{return new Xn(W)._credential({idToken:c,accessToken:g,nonce:V,pendingToken:C})}catch{return null}}}let jt=(()=>{class f extends Ke{constructor(){super("facebook.com")}static credential(c){return Hn._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:c})}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c||!("oauthAccessToken"in c)||!c.oauthAccessToken)return null;try{return f.credential(c.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),yr=(()=>{class f extends Ke{constructor(){super("google.com"),this.addScope("profile")}static credential(c,g){return Hn._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:c,accessToken:g})}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:g,oauthAccessToken:I}=c;if(!g&&!I)return null;try{return f.credential(g,I)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Ur=(()=>{class f extends Ke{constructor(){super("github.com")}static credential(c){return Hn._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:c})}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c||!("oauthAccessToken"in c)||!c.oauthAccessToken)return null;try{return f.credential(c.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class er extends Jo{constructor(l,c){super(l,l),this.pendingToken=c}_getIdTokenResponse(l){return hs(l,this.buildRequest())}_linkToIdToken(l,c){const g=this.buildRequest();return g.idToken=c,hs(l,g)}_getReauthenticationResolver(l){const c=this.buildRequest();return c.autoCreate=!1,hs(l,c)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const c="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:I,pendingToken:C}=c;return g&&I&&C&&g===I?new er(g,C):null}static _create(l,c){return new er(l,c)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class nu extends Qi{constructor(l){ue(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return nu.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return nu.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const c=er.fromJSON(l);return ue(c,"argument-error"),c}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:c,providerId:g}=l;if(!c||!g)return null;try{return er._create(g,c)}catch{return null}}}let _l=(()=>{class f extends Ke{constructor(){super("twitter.com")}static credential(c,g){return Hn._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:c,oauthTokenSecret:g})}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthAccessToken:g,oauthTokenSecret:I}=c;if(!g||!I)return null;try{return f.credential(g,I)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Yi(f,l){return Se.apply(this,arguments)}function Se(){return(Se=(0,S.Z)(function*(f,l){return Oe(f,"POST","/v1/accounts:signUp",se(f,l))})).apply(this,arguments)}class Ze{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,c,g,I=!1){return(0,S.Z)(function*(){const C=yield x._fromIdTokenResponse(l,g,I),V=pn(g);return new Ze({user:C,providerId:V,_tokenResponse:g,operationType:c})})()}static _forOperation(l,c,g){return(0,S.Z)(function*(){yield l._updateTokensIfNecessary(g,!0);const I=pn(g);return new Ze({user:l,providerId:I,_tokenResponse:g,operationType:c})})()}}function pn(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Fi(f){return gs.apply(this,arguments)}function gs(){return(gs=(0,S.Z)(function*(f){var l;if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(kt(f));const c=zt(f);if(yield c._initializationPromise,null!==(l=c.currentUser)&&void 0!==l&&l.isAnonymous)return new Ze({user:c.currentUser,providerId:null,operationType:"signIn"});const g=yield Yi(c,{returnSecureToken:!0}),I=yield Ze._fromIdTokenResponse(c,"signIn",g,!0);return yield c._updateCurrentUser(I.user),I})).apply(this,arguments)}class Gn extends P.ZR{constructor(l,c,g,I){var C;super(c.code,c.message),this.operationType=g,this.user=I,Object.setPrototypeOf(this,Gn.prototype),this.customData={appName:l.name,tenantId:null!==(C=l.tenantId)&&void 0!==C?C:void 0,_serverResponse:c.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,c,g,I){return new Gn(l,c,g,I)}}function ho(f,l,c,g){return("reauthenticate"===l?c._getReauthenticationResolver(f):c._getIdTokenResponse(f)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?Gn._fromErrorAndOperation(f,C,l,g):C})}function Tn(f){return new Set(f.map(({providerId:l})=>l).filter(l=>!!l))}function yl(f,l){return ta.apply(this,arguments)}function ta(){return ta=(0,S.Z)(function*(f,l){const c=(0,P.m9)(f);yield ks(!0,c,l);const{providerUserInfo:g}=yield function ni(f,l){return _i.apply(this,arguments)}(c.auth,{idToken:yield c.getIdToken(),deleteProvider:[l]}),I=Tn(g||[]);return c.providerData=c.providerData.filter(C=>I.has(C.providerId)),I.has("phone")||(c.phoneNumber=null),yield c.auth._persistUserIfCurrent(c),c}),ta.apply(this,arguments)}function ut(f,l){return ru.apply(this,arguments)}function ru(){return(ru=(0,S.Z)(function*(f,l,c=!1){const g=yield Wt(f,l._linkToIdToken(f.auth,yield f.getIdToken()),c);return Ze._forOperation(f,"link",g)})).apply(this,arguments)}function ks(f,l,c){return vl.apply(this,arguments)}function vl(){return(vl=(0,S.Z)(function*(f,l,c){yield On(l);const I=!1===f?"provider-already-linked":"no-such-provider";ue(Tn(l.providerData).has(c)===f,l.auth,I)})).apply(this,arguments)}function fo(f,l){return tr.apply(this,arguments)}function tr(){return(tr=(0,S.Z)(function*(f,l,c=!1){const{auth:g}=f;if((0,Ee._isFirebaseServerApp)(g.app))return Promise.reject(kt(g));const I="reauthenticate";try{const C=yield Wt(f,ho(g,I,l,f),c);ue(C.idToken,g,"internal-error");const V=Ms(C.idToken);ue(V,g,"internal-error");const{sub:W}=V;return ue(f.uid===W,g,"user-mismatch"),Ze._forOperation(f,I,C)}catch(C){throw"auth/user-not-found"===C?.code&&yt(g,"user-mismatch"),C}})).apply(this,arguments)}function na(f,l){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,S.Z)(function*(f,l,c=!1){if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(kt(f));const g="signIn",I=yield ho(f,g,l),C=yield Ze._fromIdTokenResponse(f,g,I);return c||(yield f._updateCurrentUser(C.user)),C})).apply(this,arguments)}function ii(f,l){return po.apply(this,arguments)}function po(){return(po=(0,S.Z)(function*(f,l){return na(zt(f),l)})).apply(this,arguments)}function $d(f,l){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,S.Z)(function*(f,l){const c=(0,P.m9)(f);return yield ks(!1,c,l.providerId),ut(c,l)})).apply(this,arguments)}function jy(f,l){return iu.apply(this,arguments)}function iu(){return(iu=(0,S.Z)(function*(f,l){return fo((0,P.m9)(f),l)})).apply(this,arguments)}function ra(){return(ra=(0,S.Z)(function*(f,l){return Oe(f,"POST","/v1/accounts:signInWithCustomToken",se(f,l))})).apply(this,arguments)}function Il(f,l){return Fs.apply(this,arguments)}function Fs(){return Fs=(0,S.Z)(function*(f,l){if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(kt(f));const c=zt(f),g=yield function $p(f,l){return ra.apply(this,arguments)}(c,{token:l,returnSecureToken:!0}),I=yield Ze._fromIdTokenResponse(c,"signIn",g);return yield c._updateCurrentUser(I.user),I}),Fs.apply(this,arguments)}class zn{constructor(l,c){this.factorId=l,this.uid=c.mfaEnrollmentId,this.enrollmentTime=new Date(c.enrolledAt).toUTCString(),this.displayName=c.displayName}static _fromServerResponse(l,c){return"phoneInfo"in c?Hp._fromServerResponse(l,c):"totpInfo"in c?Ar._fromServerResponse(l,c):yt(l,"internal-error")}}class Hp extends zn{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,c){return new Hp(c)}}class Ar extends zn{constructor(l){super("totp",l)}static _fromServerResponse(l,c){return new Ar(c)}}function Br(f,l,c){var g;ue((null===(g=c.url)||void 0===g?void 0:g.length)>0,f,"invalid-continue-uri"),ue(typeof c.dynamicLinkDomain>"u"||c.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),l.continueUrl=c.url,l.dynamicLinkDomain=c.dynamicLinkDomain,l.canHandleCodeInApp=c.handleCodeInApp,c.iOS&&(ue(c.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),l.iOSBundleId=c.iOS.bundleId),c.android&&(ue(c.android.packageName.length>0,f,"missing-android-pkg-name"),l.androidInstallApp=c.android.installApp,l.androidMinimumVersionCode=c.android.minimumVersion,l.androidPackageName=c.android.packageName)}function su(f){return go.apply(this,arguments)}function go(){return(go=(0,S.Z)(function*(f){const l=zt(f);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function El(f,l,c){return si.apply(this,arguments)}function si(){return(si=(0,S.Z)(function*(f,l,c){const g=zt(f),I={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};c&&Br(g,I,c),yield Ns(g,I,"getOobCode",Za)})).apply(this,arguments)}function $y(f,l,c){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,S.Z)(function*(f,l,c){yield ri((0,P.m9)(f),{oobCode:l,newPassword:c}).catch(function(){var g=(0,S.Z)(function*(I){throw"auth/password-does-not-meet-requirements"===I.code&&su(f),I});return function(I){return g.apply(this,arguments)}}())}),Gp.apply(this,arguments)}function Hy(f,l){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,S.Z)(function*(f,l){yield function t0(f,l){return co.apply(this,arguments)}((0,P.m9)(f),{oobCode:l})}),Hd.apply(this,arguments)}function Gy(f,l){return zp.apply(this,arguments)}function zp(){return(zp=(0,S.Z)(function*(f,l){const c=(0,P.m9)(f),g=yield ri(c,{oobCode:l}),I=g.requestType;switch(ue(I,c,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(g.newEmail,c,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(g.mfaInfo,c,"internal-error");default:ue(g.email,c,"internal-error")}let C=null;return g.mfaInfo&&(C=zn._fromServerResponse(zt(c),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:I}})).apply(this,arguments)}function n0(f,l){return qp.apply(this,arguments)}function qp(){return(qp=(0,S.Z)(function*(f,l){const{data:c}=yield Gy((0,P.m9)(f),l);return c.email})).apply(this,arguments)}function r0(f,l,c){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,S.Z)(function*(f,l,c){if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(kt(f));const g=zt(f),V=yield Ns(g,{returnSecureToken:!0,email:l,password:c,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yi).catch(ce=>{throw"auth/password-does-not-meet-requirements"===ce.code&&su(f),ce}),W=yield Ze._fromIdTokenResponse(g,"signIn",V);return yield g._updateCurrentUser(W.user),W})).apply(this,arguments)}function s0(f,l,c){return(0,Ee._isFirebaseServerApp)(f.app)?Promise.reject(kt(f)):ii((0,P.m9)(f),jd.credential(l,c)).catch(function(){var g=(0,S.Z)(function*(I){throw"auth/password-does-not-meet-requirements"===I.code&&su(f),I});return function(I){return g.apply(this,arguments)}}())}function o0(f,l,c){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,S.Z)(function*(f,l,c){const g=zt(f),I={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function C(V,W){ue(W.handleCodeInApp,g,"argument-error"),W&&Br(g,V,W)})(I,c),yield Ns(g,I,"getOobCode",Ly)})).apply(this,arguments)}function a0(f,l){return"EMAIL_SIGNIN"===tu.parseLink(l)?.operation}function u0(f,l,c){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,S.Z)(function*(f,l,c){if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(kt(f));const g=(0,P.m9)(f),I=jd.credentialWithLink(l,c||dn());return ue(I._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),ii(g,I)})).apply(this,arguments)}function wl(){return(wl=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:createAuthUri",se(f,l))})).apply(this,arguments)}function l0(f,l){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,S.Z)(function*(f,l){const g={identifier:l,continueUri:kr()?dn():"http://localhost"},{signinMethods:I}=yield function Qp(f,l){return wl.apply(this,arguments)}((0,P.m9)(f),g);return I||[]}),Yp.apply(this,arguments)}function c0(f,l){return ms.apply(this,arguments)}function ms(){return ms=(0,S.Z)(function*(f,l){const c=(0,P.m9)(f),I={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};l&&Br(c.auth,I,l);const{email:C}=yield function Fy(f,l){return fl.apply(this,arguments)}(c.auth,I);C!==f.email&&(yield f.reload())}),ms.apply(this,arguments)}function zy(f,l,c){return jr.apply(this,arguments)}function jr(){return jr=(0,S.Z)(function*(f,l,c){const g=(0,P.m9)(f),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:l};c&&Br(g.auth,C,c);const{email:V}=yield function Bp(f,l){return mt.apply(this,arguments)}(g.auth,C);V!==f.email&&(yield f.reload())}),jr.apply(this,arguments)}function Gd(){return(Gd=(0,S.Z)(function*(f,l){return J(f,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function qy(f,l){return Tl.apply(this,arguments)}function Tl(){return Tl=(0,S.Z)(function*(f,{displayName:l,photoURL:c}){if(void 0===l&&void 0===c)return;const g=(0,P.m9)(f),C={idToken:yield g.getIdToken(),displayName:l,photoUrl:c,returnSecureToken:!0},V=yield Wt(g,function Jp(f,l){return Gd.apply(this,arguments)}(g.auth,C));g.displayName=V.displayName||null,g.photoURL=V.photoUrl||null;const W=g.providerData.find(({providerId:ce})=>"password"===ce);W&&(W.displayName=g.displayName,W.photoURL=g.photoURL),yield g._updateTokensIfNecessary(V)}),Tl.apply(this,arguments)}function Xp(f,l){const c=(0,P.m9)(f);return(0,Ee._isFirebaseServerApp)(c.auth.app)?Promise.reject(kt(c.auth)):Dl(c,l,null)}function Wy(f,l){return Dl((0,P.m9)(f),null,l)}function Dl(f,l,c){return zd.apply(this,arguments)}function zd(){return zd=(0,S.Z)(function*(f,l,c){const{auth:g}=f,C={idToken:yield f.getIdToken(),returnSecureToken:!0};l&&(C.email=l),c&&(C.password=c);const V=yield Wt(f,function XC(f,l){return Kt.apply(this,arguments)}(g,C));yield f._updateTokensIfNecessary(V,!0)}),zd.apply(this,arguments)}class mo{constructor(l,c,g={}){this.isNewUser=l,this.providerId=c,this.profile=g}}class qd extends mo{constructor(l,c,g,I){super(l,c,g),this.username=I}}class dr extends mo{constructor(l,c){super(l,"facebook.com",c)}}class Ky extends qd{constructor(l,c){super(l,"github.com",c,"string"==typeof c?.login?c?.login:null)}}class Cl extends mo{constructor(l,c){super(l,"google.com",c)}}class oi extends qd{constructor(l,c,g){super(l,"twitter.com",c,g)}}function Zy(f){const{user:l,_tokenResponse:c}=f;return l.isAnonymous&&!c?{providerId:null,isNewUser:!1,profile:null}:function wi(f){var l,c;if(!f)return null;const{providerId:g}=f,I=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},C=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!g&&f?.idToken){const V=null===(c=null===(l=Ms(f.idToken))||void 0===l?void 0:l.firebase)||void 0===c?void 0:c.sign_in_provider;if(V)return new mo(C,"anonymous"!==V&&"custom"!==V?V:null)}if(!g)return null;switch(g){case"facebook.com":return new dr(C,I);case"github.com":return new Ky(C,I);case"google.com":return new Cl(C,I);case"twitter.com":return new oi(C,I,f.screenName||null);case"custom":case"anonymous":return new mo(C,null);default:return new mo(C,g,I)}}(c)}class yo{constructor(l,c,g){this.type=l,this.credential=c,this.user=g}static _fromIdtoken(l,c){return new yo("enroll",l,c)}static _fromMfaPendingCredential(l){return new yo("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var c,g;if(l?.multiFactorSession){if(null!==(c=l.multiFactorSession)&&void 0!==c&&c.pendingCredential)return yo._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return yo._fromIdtoken(l.multiFactorSession.idToken)}return null}}class Zd{constructor(l,c,g){this.session=l,this.hints=c,this.signInResolver=g}static _fromError(l,c){const g=zt(l),I=c.customData._serverResponse,C=(I.mfaInfo||[]).map(W=>zn._fromServerResponse(g,W));ue(I.mfaPendingCredential,g,"internal-error");const V=yo._fromMfaPendingCredential(I.mfaPendingCredential);return new Zd(V,C,function(){var W=(0,S.Z)(function*(ce){const Re=yield ce._process(g,V);delete I.mfaInfo,delete I.mfaPendingCredential;const $e=Object.assign(Object.assign({},I),{idToken:Re.idToken,refreshToken:Re.refreshToken});switch(c.operationType){case"signIn":const Dt=yield Ze._fromIdTokenResponse(g,c.operationType,$e);return yield g._updateCurrentUser(Dt.user),Dt;case"reauthenticate":return ue(c.user,g,"internal-error"),Ze._forOperation(c.user,c.operationType,$e);default:yt(g,"internal-error")}});return function(ce){return W.apply(this,arguments)}}())}resolveSignIn(l){var c=this;return(0,S.Z)(function*(){return c.signInResolver(l)})()}}function tg(f,l){var c;const g=(0,P.m9)(f),I=l;return ue(l.customData.operationType,g,"argument-error"),ue(null===(c=I.customData._serverResponse)||void 0===c?void 0:c.mfaPendingCredential,g,"argument-error"),Zd._fromError(g,I)}class bl{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(c=>{c.mfaInfo&&(this.enrolledFactors=c.mfaInfo.map(g=>zn._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new bl(l)}getSession(){var l=this;return(0,S.Z)(function*(){return yo._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,c){var g=this;return(0,S.Z)(function*(){const I=l,C=yield g.getSession(),V=yield Wt(g.user,I._process(g.user.auth,C,c));return yield g.user._updateTokensIfNecessary(V),g.user.reload()})()}unenroll(l){var c=this;return(0,S.Z)(function*(){const g="string"==typeof l?l:l.uid,I=yield c.user.getIdToken();try{const C=yield Wt(c.user,function ng(f,l){return J(f,"POST","/v2/accounts/mfaEnrollment:withdraw",se(f,l))}(c.user.auth,{idToken:I,mfaEnrollmentId:g}));c.enrolledFactors=c.enrolledFactors.filter(({uid:V})=>V!==g),yield c.user._updateTokensIfNecessary(C),yield c.user.reload()}catch(C){throw C}})()}}const qn=new WeakMap;function rg(f){const l=(0,P.m9)(f);return qn.has(l)||qn.set(l,bl._fromUser(l)),qn.get(l)}const Ls="__sak";class Li{constructor(l,c){this.storageRetriever=l,this.type=c}_isAvailable(){try{return this.storage?(this.storage.setItem(Ls,"1"),this.storage.removeItem(Ls),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,c){return this.storage.setItem(l,JSON.stringify(c)),Promise.resolve()}_get(l){const c=this.storage.getItem(l);return Promise.resolve(c?JSON.parse(c):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const nv=(()=>{class f extends Li{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(c,g)=>this.onStorageEvent(c,g),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ne(),this._shouldAllowMigration=!0}forAllChangedKeys(c){for(const g of Object.keys(this.listeners)){const I=this.storage.getItem(g),C=this.localCache[g];I!==C&&c(g,C,I)}}onStorageEvent(c,g=!1){if(!c.key)return void this.forAllChangedKeys((W,ce,Re)=>{this.notifyListeners(W,Re)});const I=c.key;g?this.detachListener():this.stopPolling();const C=()=>{const W=this.storage.getItem(I);!g&&this.localCache[I]===W||this.notifyListeners(I,W)},V=this.storage.getItem(I);!function j(){return(0,P.w1)()&&10===document.documentMode}()||V===c.newValue||c.newValue===c.oldValue?C():setTimeout(C,10)}notifyListeners(c,g){this.localCache[c]=g;const I=this.listeners[c];if(I)for(const C of Array.from(I))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((c,g,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:c,oldValue:g,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(c,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[c]||(this.listeners[c]=new Set,this.localCache[c]=this.storage.getItem(c)),this.listeners[c].add(g)}_removeListener(c,g){this.listeners[c]&&(this.listeners[c].delete(g),0===this.listeners[c].size&&delete this.listeners[c]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(c,g){var I=()=>super._set,C=this;return(0,S.Z)(function*(){yield I().call(C,c,g),C.localCache[c]=JSON.stringify(g)})()}_get(c){var g=()=>super._get,I=this;return(0,S.Z)(function*(){const C=yield g().call(I,c);return I.localCache[c]=JSON.stringify(C),C})()}_remove(c){var g=()=>super._remove,I=this;return(0,S.Z)(function*(){yield g().call(I,c),delete I.localCache[c]})()}}return f.type="LOCAL",f})(),hr=(()=>{class f extends Li{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(c,g){}_removeListener(c,g){}}return f.type="SESSION",f})();let ig=(()=>{class f{constructor(c){this.eventTarget=c,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(c){const g=this.receivers.find(C=>C.isListeningto(c));if(g)return g;const I=new f(c);return this.receivers.push(I),I}isListeningto(c){return this.eventTarget===c}handleEvent(c){var g=this;return(0,S.Z)(function*(){const I=c,{eventId:C,eventType:V,data:W}=I.data,ce=g.handlersMap[V];if(!ce?.size)return;I.ports[0].postMessage({status:"ack",eventId:C,eventType:V});const Re=Array.from(ce).map(function(){var Dt=(0,S.Z)(function*($r){return $r(I.origin,W)});return function($r){return Dt.apply(this,arguments)}}()),$e=yield function _s(f){return Promise.all(f.map(function(){var l=(0,S.Z)(function*(c){try{return{fulfilled:!0,value:yield c}}catch(g){return{fulfilled:!1,reason:g}}});return function(c){return l.apply(this,arguments)}}()))}(Re);I.ports[0].postMessage({status:"done",eventId:C,eventType:V,response:$e})})()}_subscribe(c,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[c]||(this.handlersMap[c]=new Set),this.handlersMap[c].add(g)}_unsubscribe(c,g){this.handlersMap[c]&&g&&this.handlersMap[c].delete(g),(!g||0===this.handlersMap[c].size)&&delete this.handlersMap[c],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function Ji(f="",l=10){let c="";for(let g=0;g<l;g++)c+=Math.floor(10*Math.random());return f+c}class ys{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,c,g=50){var I=this;return(0,S.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let V,W;return new Promise((ce,Re)=>{const $e=Ji("",20);C.port1.start();const Dt=setTimeout(()=>{Re(new Error("unsupported_event"))},g);W={messageChannel:C,onMessage($r){const vs=$r;if(vs.data.eventId===$e)switch(vs.data.status){case"ack":clearTimeout(Dt),V=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(V),ce(vs.data.response);break;default:clearTimeout(Dt),clearTimeout(V),Re(new Error("invalid_response"))}}},I.handlers.add(W),C.port1.addEventListener("message",W.onMessage),I.target.postMessage({eventType:l,eventId:$e,data:c},[C.port2])}).finally(()=>{W&&I.removeMessageHandler(W)})})()}}function kn(){return window}function Jd(){return typeof kn().WorkerGlobalScope<"u"&&"function"==typeof kn().importScripts}function au(){return(au=(0,S.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Sl="firebaseLocalStorageDb",sv=1,uu="firebaseLocalStorage",Rl="fbase_key";class ia{constructor(l){this.request=l}toPromise(){return new Promise((l,c)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{c(this.request.error)})})}}function lu(f,l){return f.transaction([uu],l?"readwrite":"readonly").objectStore(uu)}function Pl(){const f=indexedDB.open(Sl,sv);return new Promise((l,c)=>{f.addEventListener("error",()=>{c(f.error)}),f.addEventListener("upgradeneeded",()=>{const g=f.result;try{g.createObjectStore(uu,{keyPath:Rl})}catch(I){c(I)}}),f.addEventListener("success",(0,S.Z)(function*(){const g=f.result;g.objectStoreNames.contains(uu)?l(g):(g.close(),yield function ag(){const f=indexedDB.deleteDatabase(Sl);return new ia(f).toPromise()}(),l(yield Pl()))}))})}function Ml(f,l,c){return eh.apply(this,arguments)}function eh(){return(eh=(0,S.Z)(function*(f,l,c){const g=lu(f,!0).put({[Rl]:l,value:c});return new ia(g).toPromise()})).apply(this,arguments)}function fr(){return(fr=(0,S.Z)(function*(f,l){const c=lu(f,!1).get(l),g=yield new ia(c).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Us(f,l){const c=lu(f,!0).delete(l);return new ia(c).toPromise()}const ug=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var c=this;return(0,S.Z)(function*(){return c.db||(c.db=yield Pl()),c.db})()}_withRetries(c){var g=this;return(0,S.Z)(function*(){let I=0;for(;;)try{const C=yield g._openDb();return yield c(C)}catch(C){if(I++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var c=this;return(0,S.Z)(function*(){return Jd()?c.initializeReceiver():c.initializeSender()})()}initializeReceiver(){var c=this;return(0,S.Z)(function*(){c.receiver=ig._getInstance(function og(){return Jd()?self:null}()),c.receiver._subscribe("keyChanged",function(){var g=(0,S.Z)(function*(I,C){return{keyProcessed:(yield c._poll()).includes(C.key)}});return function(I,C){return g.apply(this,arguments)}}()),c.receiver._subscribe("ping",function(){var g=(0,S.Z)(function*(I,C){return["keyChanged"]});return function(I,C){return g.apply(this,arguments)}}())})()}initializeSender(){var c=this;return(0,S.Z)(function*(){var g,I;if(c.activeServiceWorker=yield function iv(){return au.apply(this,arguments)}(),!c.activeServiceWorker)return;c.sender=new ys(c.activeServiceWorker);const C=yield c.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(I=C[0])&&void 0!==I&&I.value.includes("keyChanged")&&(c.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(c){var g=this;return(0,S.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function Xd(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:c},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,S.Z)(function*(){try{if(!indexedDB)return!1;const c=yield Pl();return yield Ml(c,Ls,"1"),yield Us(c,Ls),!0}catch{}return!1})()}_withPendingWrite(c){var g=this;return(0,S.Z)(function*(){g.pendingWrites++;try{yield c()}finally{g.pendingWrites--}})()}_set(c,g){var I=this;return(0,S.Z)(function*(){return I._withPendingWrite((0,S.Z)(function*(){return yield I._withRetries(C=>Ml(C,c,g)),I.localCache[c]=g,I.notifyServiceWorker(c)}))})()}_get(c){var g=this;return(0,S.Z)(function*(){const I=yield g._withRetries(C=>function ov(f,l){return fr.apply(this,arguments)}(C,c));return g.localCache[c]=I,I})()}_remove(c){var g=this;return(0,S.Z)(function*(){return g._withPendingWrite((0,S.Z)(function*(){return yield g._withRetries(I=>Us(I,c)),delete g.localCache[c],g.notifyServiceWorker(c)}))})()}_poll(){var c=this;return(0,S.Z)(function*(){const g=yield c._withRetries(V=>{const W=lu(V,!1).getAll();return new ia(W).toPromise()});if(!g)return[];if(0!==c.pendingWrites)return[];const I=[],C=new Set;if(0!==g.length)for(const{fbase_key:V,value:W}of g)C.add(V),JSON.stringify(c.localCache[V])!==JSON.stringify(W)&&(c.notifyListeners(V,W),I.push(V));for(const V of Object.keys(c.localCache))c.localCache[V]&&!C.has(V)&&(c.notifyListeners(V,null),I.push(V));return I})()}notifyListeners(c,g){this.localCache[c]=g;const I=this.listeners[c];if(I)for(const C of Array.from(I))C(g)}startPolling(){var c=this;this.stopPolling(),this.pollTimer=setInterval((0,S.Z)(function*(){return c._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(c,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[c]||(this.listeners[c]=new Set,this._get(c)),this.listeners[c].add(g)}_removeListener(c,g){this.listeners[c]&&(this.listeners[c].delete(g),0===this.listeners[c].size&&delete this.listeners[c]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),vo=1e12;class th{constructor(l){this.auth=l,this.counter=vo,this._widgets=new Map}render(l,c){const g=this.counter;return this._widgets.set(g,new lg(l,this.auth.name,c||{})),this.counter++,g}reset(l){var c;const g=l||vo;null===(c=this._widgets.get(g))||void 0===c||c.delete(),this._widgets.delete(g)}getResponse(l){var c;return(null===(c=this._widgets.get(l||vo))||void 0===c?void 0:c.getResponse())||""}execute(l){var c=this;return(0,S.Z)(function*(){var g;return null===(g=c._widgets.get(l||vo))||void 0===g||g.execute(),""})()}}class lg{constructor(l,c,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof l?document.getElementById(l):l;ue(I,"argument-error",{appName:c}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function dv(f){const l=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<f;g++)l.push(c.charAt(Math.floor(Math.random()*c.length)));return l.join("")}(50);const{callback:l,"expired-callback":c}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,c)try{c()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bs=Oy("rcb"),cu=new Mi(3e4,6e4);class hv{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=kn().grecaptcha)||void 0===l||!l.render)}load(l,c=""){return ue(function f0(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(c),l,"argument-error"),this.shouldResolveImmediately(c)&&Pn(kn().grecaptcha)?Promise.resolve(kn().grecaptcha):new Promise((g,I)=>{const C=kn().setTimeout(()=>{I(Ft(l,"network-request-failed"))},cu.get());kn()[Bs]=()=>{kn().clearTimeout(C),delete kn()[Bs];const W=kn().grecaptcha;if(!W||!Pn(W))return void I(Ft(l,"internal-error"));const ce=W.render;W.render=(Re,$e)=>{const Dt=ce(Re,$e);return this.counter++,Dt},this.hostLanguage=c,g(W)},Md(`${function QC(){return Ka.recaptchaV2Script}()}?${(0,P.xO)({onload:Bs,render:"explicit",hl:c})}`).catch(()=>{clearTimeout(C),I(Ft(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var c;return!(null===(c=kn().grecaptcha)||void 0===c||!c.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nh{load(l){return(0,S.Z)(function*(){return new th(l)})()}clearedOneInstance(){}}const fv="recaptcha",pv={theme:"light",type:"image"};class gv{constructor(l,c,g=Object.assign({},pv)){this.parameters=g,this.type=fv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zt(l),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof c?document.getElementById(c):c;ue(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nh:new hv,this.validateStartingState()}verify(){var l=this;return(0,S.Z)(function*(){l.assertNotDestroyed();const c=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(c)||new Promise(C=>{const V=W=>{W&&(l.tokenChangeListeners.delete(V),C(W))};l.tokenChangeListeners.add(V),l.isInvisible&&g.execute(c)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return c=>{if(this.tokenChangeListeners.forEach(g=>g(c)),"function"==typeof l)l(c);else if("string"==typeof l){const g=kn()[l];"function"==typeof g&&g(c)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,S.Z)(function*(){if(yield l.init(),!l.widgetId){let c=l.container;if(!l.isInvisible){const g=document.createElement("div");c.appendChild(g),c=g}l.widgetId=l.getAssertedRecaptcha().render(c,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,S.Z)(function*(){ue(kr()&&!Jd(),l.auth,"internal-error"),yield function p0(){let f=null;return new Promise(l=>{"complete"!==document.readyState?(f=()=>l(),window.addEventListener("load",f)):l()}).catch(l=>{throw f&&window.removeEventListener("load",f),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const c=yield function os(f){return Ki.apply(this,arguments)}(l.auth);ue(c,l.auth,"internal-error"),l.parameters.sitekey=c})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cg{constructor(l,c){this.verificationId=l,this.onConfirmation=c}confirm(l){const c=Lr._fromVerification(this.verificationId,l);return this.onConfirmation(c)}}function rh(f,l,c){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,S.Z)(function*(f,l,c){if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(kt(f));const g=zt(f),I=yield Eo(g,l,(0,P.m9)(c));return new cg(I,C=>ii(g,C))})).apply(this,arguments)}function dg(f,l,c){return Io.apply(this,arguments)}function Io(){return(Io=(0,S.Z)(function*(f,l,c){const g=(0,P.m9)(f);yield ks(!1,g,"phone");const I=yield Eo(g.auth,l,(0,P.m9)(c));return new cg(I,C=>$d(g,C))})).apply(this,arguments)}function hg(f,l,c){return kl.apply(this,arguments)}function kl(){return(kl=(0,S.Z)(function*(f,l,c){const g=(0,P.m9)(f);if((0,Ee._isFirebaseServerApp)(g.auth.app))return Promise.reject(kt(g.auth));const I=yield Eo(g.auth,l,(0,P.m9)(c));return new cg(I,C=>jy(g,C))})).apply(this,arguments)}function Eo(f,l,c){return ih.apply(this,arguments)}function ih(){return ih=(0,S.Z)(function*(f,l,c){var g;const I=yield c.verify();try{let C;if(ue("string"==typeof I,f,"argument-error"),ue(c.type===fv,f,"argument-error"),C="string"==typeof l?{phoneNumber:l}:l,"session"in C){const V=C.session;if("phoneNumber"in C)return ue("enroll"===V.type,f,"internal-error"),(yield function ev(f,l){return J(f,"POST","/v2/accounts/mfaEnrollment:start",se(f,l))}(f,{idToken:V.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{ue("signin"===V.type,f,"internal-error");const W=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return ue(W,f,"missing-multi-factor-info"),(yield function uv(f,l){return J(f,"POST","/v2/accounts/mfaSignIn:start",se(f,l))}(f,{mfaPendingCredential:V.credential,mfaEnrollmentId:W,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:V}=yield function fs(f,l){return Nt.apply(this,arguments)}(f,{phoneNumber:C.phoneNumber,recaptchaToken:I});return V}}finally{c._reset()}}),ih.apply(this,arguments)}function Vl(f,l){return du.apply(this,arguments)}function du(){return(du=(0,S.Z)(function*(f,l){const c=(0,P.m9)(f);if((0,Ee._isFirebaseServerApp)(c.auth.app))return Promise.reject(kt(c.auth));yield ut(c,l)})).apply(this,arguments)}let Fl=(()=>{class f{constructor(c){this.providerId=f.PROVIDER_ID,this.auth=zt(c)}verifyPhoneNumber(c,g){return Eo(this.auth,c,(0,P.m9)(g))}static credential(c,g){return Lr._fromVerification(c,g)}static credentialFromResult(c){return f.credentialFromTaggedObject(c)}static credentialFromError(c){return f.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{phoneNumber:g,temporaryProof:I}=c;return g&&I?Lr._fromTokenResponse(g,I):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function sa(f,l){return l?oe(l):(ue(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Ll extends Jo{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return hs(l,this._buildIdpRequest())}_linkToIdToken(l,c){return hs(l,this._buildIdpRequest(c))}_getReauthenticationResolver(l){return hs(l,this._buildIdpRequest())}_buildIdpRequest(l){const c={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(c.idToken=l),c}}function fg(f){return na(f.auth,new Ll(f),f.bypassAuthState)}function mv(f){const{auth:l,user:c}=f;return ue(c,l,"internal-error"),fo(c,new Ll(f),f.bypassAuthState)}function Xi(f){return sh.apply(this,arguments)}function sh(){return(sh=(0,S.Z)(function*(f){const{auth:l,user:c}=f;return ue(c,l,"internal-error"),ut(c,new Ll(f),f.bypassAuthState)})).apply(this,arguments)}class hu{constructor(l,c,g,I,C=!1){this.auth=l,this.resolver=g,this.user=I,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(c)?c:[c]}execute(){var l=this;return new Promise(function(){var c=(0,S.Z)(function*(g,I){l.pendingPromise={resolve:g,reject:I};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(C){l.reject(C)}});return function(g,I){return c.apply(this,arguments)}}())}onAuthEvent(l){var c=this;return(0,S.Z)(function*(){const{urlResponse:g,sessionId:I,postBody:C,tenantId:V,error:W,type:ce}=l;if(W)return void c.reject(W);const Re={auth:c.auth,requestUri:g,sessionId:I,tenantId:V||void 0,postBody:C||void 0,user:c.user,bypassAuthState:c.bypassAuthState};try{c.resolve(yield c.getIdpTask(ce)(Re))}catch($e){c.reject($e)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return fg;case"linkViaPopup":case"linkViaRedirect":return Xi;case"reauthViaPopup":case"reauthViaRedirect":return mv;default:yt(this.auth,"internal-error")}}resolve(l){Gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oh=new Mi(2e3,1e4);function pg(f,l,c){return fu.apply(this,arguments)}function fu(){return(fu=(0,S.Z)(function*(f,l,c){if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(Ft(f,"operation-not-supported-in-this-environment"));const g=zt(f);ot(f,l,Qi);const I=sa(g,c);return new Bl(g,"signInViaPopup",l,I).executeNotNull()})).apply(this,arguments)}function ah(f,l,c){return uh.apply(this,arguments)}function uh(){return(uh=(0,S.Z)(function*(f,l,c){const g=(0,P.m9)(f);if((0,Ee._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ft(g.auth,"operation-not-supported-in-this-environment"));ot(g.auth,l,Qi);const I=sa(g.auth,c);return new Bl(g.auth,"reauthViaPopup",l,I,g).executeNotNull()})).apply(this,arguments)}function gg(f,l,c){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,S.Z)(function*(f,l,c){const g=(0,P.m9)(f);ot(g.auth,l,Qi);const I=sa(g.auth,c);return new Bl(g.auth,"linkViaPopup",l,I,g).executeNotNull()})).apply(this,arguments)}let Bl=(()=>{class f extends hu{constructor(c,g,I,C,V){super(c,g,C,V),this.provider=I,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var c=this;return(0,S.Z)(function*(){const g=yield c.execute();return ue(g,c.auth,"internal-error"),g})()}onExecution(){var c=this;return(0,S.Z)(function*(){Gt(1===c.filter.length,"Popup operations only handle one event");const g=Ji();c.authWindow=yield c.resolver._openPopup(c.auth,c.provider,c.filter[0],g),c.authWindow.associatedEvent=g,c.resolver._originValidation(c.auth).catch(I=>{c.reject(I)}),c.resolver._isIframeWebStorageSupported(c.auth,I=>{I||c.reject(Ft(c.auth,"web-storage-unsupported"))}),c.pollUserCancellation()})()}get eventId(){var c;return(null===(c=this.authWindow)||void 0===c?void 0:c.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const c=()=>{var g,I;this.pollId=null!==(I=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==I&&I.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(c,oh.get())};c()}}return f.currentPopupAction=null,f})();const mg="pendingRedirect",pu=new Map;class jl extends hu{constructor(l,c,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],c,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,c=this;return(0,S.Z)(function*(){let g=pu.get(c.auth._key());if(!g){try{const C=(yield function wo(f,l){return lh.apply(this,arguments)}(c.resolver,c.auth))?yield l().call(c):null;g=()=>Promise.resolve(C)}catch(I){g=()=>Promise.reject(I)}pu.set(c.auth._key(),g)}return c.bypassAuthState||pu.set(c.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var c=()=>super.onAuthEvent,g=this;return(0,S.Z)(function*(){if("signInViaRedirect"===l.type)return c().call(g,l);if("unknown"!==l.type){if(l.eventId){const I=yield g.auth._redirectUserForId(l.eventId);if(I)return g.user=I,c().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,S.Z)(function*(){})()}cleanUp(){}}function lh(){return(lh=(0,S.Z)(function*(f,l){const c=Gl(l),g=nr(f);if(!(yield g._isAvailable()))return!1;const I="true"===(yield g._get(c));return yield g._remove(c),I})).apply(this,arguments)}function $l(f,l){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,S.Z)(function*(f,l){return nr(f)._set(Gl(l),"true")})).apply(this,arguments)}function oa(){pu.clear()}function _g(f,l){pu.set(f._key(),l)}function nr(f){return oe(f._redirectPersistence)}function Gl(f){return gt(mg,f.config.apiKey,f.name)}function _v(f,l,c){return function yg(f,l,c){return aa.apply(this,arguments)}(f,l,c)}function aa(){return(aa=(0,S.Z)(function*(f,l,c){if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(kt(f));const g=zt(f);ot(f,l,Qi),yield g._initializationPromise;const I=sa(g,c);return yield $l(I,g),I._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function ua(f,l,c){return function la(f,l,c){return js.apply(this,arguments)}(f,l,c)}function js(){return(js=(0,S.Z)(function*(f,l,c){const g=(0,P.m9)(f);if(ot(g.auth,l,Qi),(0,Ee._isFirebaseServerApp)(g.auth.app))return Promise.reject(kt(g.auth));yield g.auth._initializationPromise;const I=sa(g.auth,c);yield $l(I,g.auth);const C=yield yv(g);return I._openRedirect(g.auth,l,"reauthViaRedirect",C)})).apply(this,arguments)}function vg(f,l,c){return function ch(f,l,c){return $s.apply(this,arguments)}(f,l,c)}function $s(){return($s=(0,S.Z)(function*(f,l,c){const g=(0,P.m9)(f);ot(g.auth,l,Qi),yield g.auth._initializationPromise;const I=sa(g.auth,c);yield ks(!1,g,l.providerId),yield $l(I,g.auth);const C=yield yv(g);return I._openRedirect(g.auth,l,"linkViaRedirect",C)})).apply(this,arguments)}function g0(f,l){return dh.apply(this,arguments)}function dh(){return(dh=(0,S.Z)(function*(f,l){return yield zt(f)._initializationPromise,Me(f,l,!1)})).apply(this,arguments)}function Me(f,l){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,S.Z)(function*(f,l,c=!1){if((0,Ee._isFirebaseServerApp)(f.app))return Promise.reject(kt(f));const g=zt(f),I=sa(g,l),V=yield new jl(g,I,c).execute();return V&&!c&&(delete V.user._redirectEventId,yield g._persistUserIfCurrent(V.user),yield g._setRedirectUser(null,l)),V})).apply(this,arguments)}function yv(f){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,S.Z)(function*(f){const l=Ji(`${f.uid}:::`);return f._redirectEventId=l,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),l})).apply(this,arguments)}class vv{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let c=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(c=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function gu(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ev(f);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,c||(this.queuedRedirectEvent=l,c=!0)),c}sendToConsumer(l,c){var g;if(l.error&&!Ev(l)){const I=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";c.onError(Ft(this.auth,I))}else c.onAuthEvent(l)}isEventForConsumer(l,c){const g=null===c.eventId||!!l.eventId&&l.eventId===c.eventId;return c.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(l))}saveEventToCache(l){this.cachedEventUids.add(Iv(l)),this.lastProcessedEventTime=Date.now()}}function Iv(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(l=>l).join("-")}function Ev({type:f,error:l}){return"unknown"===f&&"auth/no-auth-event"===l?.code}function wv(f){return wg.apply(this,arguments)}function wg(){return(wg=(0,S.Z)(function*(f,l={}){return J(f,"GET","/v1/projects",l)})).apply(this,arguments)}const Wn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hh=/^https?/;function fh(){return(fh=(0,S.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:l}=yield wv(f);for(const c of l)try{if(Ti(c))return}catch{}yt(f,"unauthorized-domain")})).apply(this,arguments)}function Ti(f){const l=dn(),{protocol:c,hostname:g}=new URL(l);if(f.startsWith("chrome-extension://")){const V=new URL(f);return""===V.hostname&&""===g?"chrome-extension:"===c&&f.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===c&&V.hostname===g}if(!hh.test(c))return!1;if(Wn.test(f))return g===f;const I=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(g)}const To=new Mi(3e4,6e4);function ph(){const f=kn().___jsl;if(f?.H)for(const l of Object.keys(f.H))if(f.H[l].r=f.H[l].r||[],f.H[l].L=f.H[l].L||[],f.H[l].r=[...f.H[l].L],f.CP)for(let c=0;c<f.CP.length;c++)f.CP[c]=null}let Hs=null;const _0=new Mi(5e3,15e3),Dv="__/auth/iframe",y0="emulator/auth/iframe",ui={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ca(f){const l=f.config;ue(l.authDomain,f,"auth-domain-config-required");const c=l.emulator?K(l,y0):`https://${f.config.authDomain}/${Dv}`,g={apiKey:l.apiKey,appName:f.name,v:Ee.SDK_VERSION},I=gh.get(f.config.apiHost);I&&(g.eid=I);const C=f._getFrameworks();return C.length&&(g.fw=C.join(",")),`${c}?${(0,P.xO)(g).slice(1)}`}function ql(){return ql=(0,S.Z)(function*(f){const l=yield function Tv(f){return Hs=Hs||function zl(f){return new Promise((l,c)=>{var g,I,C;function V(){ph(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{ph(),c(Ft(f,"network-request-failed"))},timeout:To.get()})}if(null!==(I=null===(g=kn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==I&&I.Iframe)l(gapi.iframes.getContext());else{if(null===(C=kn().gapi)||void 0===C||!C.load){const W=Oy("iframefcb");return kn()[W]=()=>{gapi.load?V():c(Ft(f,"network-request-failed"))},Md(`${function Bt(){return Ka.gapiScript}()}?onload=${W}`).catch(ce=>c(ce))}V()}}).catch(l=>{throw Hs=null,l})}(f),Hs}(f),c=kn().gapi;return ue(c,f,"internal-error"),l.open({where:document.body,url:ca(f),messageHandlersFilter:c.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ui,dontclear:!0},g=>new Promise(function(){var I=(0,S.Z)(function*(C,V){yield g.restyle({setHideOnLeave:!1});const W=Ft(f,"network-request-failed"),ce=kn().setTimeout(()=>{V(W)},_0.get());function Re(){kn().clearTimeout(ce),C(g)}g.ping(Re).then(Re,()=>{V(W)})});return function(C,V){return I.apply(this,arguments)}}()))}),ql.apply(this,arguments)}const Cv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Av=500,bv=600,Sv="_blank",Rv="http://localhost";class Tg{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const _h="__/auth/handler",da="emulator/auth/handler",Dg=encodeURIComponent("fac");function Do(f,l,c,g,I,C){return yh.apply(this,arguments)}function yh(){return(yh=(0,S.Z)(function*(f,l,c,g,I,C){ue(f.config.authDomain,f,"auth-domain-config-required"),ue(f.config.apiKey,f,"invalid-api-key");const V={apiKey:f.config.apiKey,appName:f.name,authType:c,redirectUrl:g,v:Ee.SDK_VERSION,eventId:I};if(l instanceof Qi){l.setDefaultLanguage(f.languageCode),V.providerId=l.providerId||"",(0,P.xb)(l.getCustomParameters())||(V.customParameters=JSON.stringify(l.getCustomParameters()));for(const[$e,Dt]of Object.entries(C||{}))V[$e]=Dt}if(l instanceof Ke){const $e=l.getScopes().filter(Dt=>""!==Dt);$e.length>0&&(V.scopes=$e.join(","))}f.tenantId&&(V.tid=f.tenantId);const W=V;for(const $e of Object.keys(W))void 0===W[$e]&&delete W[$e];const ce=yield f._getAppCheckToken(),Re=ce?`#${Dg}=${encodeURIComponent(ce)}`:"";return`${function Cg({config:f}){return f.emulator?K(f,da):`https://${f.authDomain}/${_h}`}(f)}?${(0,P.xO)(W).slice(1)}${Re}`})).apply(this,arguments)}const Co="webStorageSupport",vh=class Kl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hr,this._completeRedirectFn=Me,this._overrideRedirectResult=_g}_openPopup(l,c,g,I){var C=this;return(0,S.Z)(function*(){var V;Gt(null===(V=C.eventManagers[l._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()");const W=yield Do(l,c,g,dn(),I);return function mh(f,l,c,g=Av,I=bv){const C=Math.max((window.screen.availHeight-I)/2,0).toString(),V=Math.max((window.screen.availWidth-g)/2,0).toString();let W="";const ce=Object.assign(Object.assign({},Cv),{width:g.toString(),height:I.toString(),top:C,left:V}),Re=(0,P.z$)().toLowerCase();c&&(W=Oi(Re)?Sv:c),xe(Re)&&(l=l||Rv,ce.scrollbars="yes");const $e=Object.entries(ce).reduce(($r,[vs,fa])=>`${$r}${vs}=${fa},`,"");if(function Q(f=(0,P.z$)()){var l;return Tt(f)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Re)&&"_self"!==W)return function Wl(f,l){const c=document.createElement("a");c.href=f,c.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),c.dispatchEvent(g)}(l||"",W),new Tg(null);const Dt=window.open(l||"",W,$e);ue(Dt,f,"popup-blocked");try{Dt.focus()}catch{}return new Tg(Dt)}(l,W,Ji())})()}_openRedirect(l,c,g,I){var C=this;return(0,S.Z)(function*(){return yield C._originValidation(l),function sg(f){kn().location.href=f}(yield Do(l,c,g,dn(),I)),new Promise(()=>{})})()}_initialize(l){const c=l._key();if(this.eventManagers[c]){const{manager:I,promise:C}=this.eventManagers[c];return I?Promise.resolve(I):(Gt(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(l);return this.eventManagers[c]={promise:g},g.catch(()=>{delete this.eventManagers[c]}),g}initAndGetManager(l){var c=this;return(0,S.Z)(function*(){const g=yield function v0(f){return ql.apply(this,arguments)}(l),I=new vv(l);return g.register("authEvent",C=>(ue(C?.authEvent,l,"invalid-auth-event"),{status:I.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),c.eventManagers[l._key()]={manager:I},c.iframes[l._key()]=g,I})()}_isIframeWebStorageSupported(l,c){this.iframes[l._key()].send(Co,{type:Co},I=>{var C;const V=null===(C=I?.[0])||void 0===C?void 0:C[Co];void 0!==V&&c(!!V),yt(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const c=l._key();return this.originValidationPromises[c]||(this.originValidationPromises[c]=function mu(f){return fh.apply(this,arguments)}(l)),this.originValidationPromises[c]}get _shouldInitProactively(){return ne()||sn()||Tt()}};class Pv{constructor(l){this.factorId=l}_process(l,c,g){switch(c.type){case"enroll":return this._finalizeEnroll(l,c.credential,g);case"signin":return this._finalizeSignIn(l,c.credential);default:return nn("unexpected MultiFactorSessionType")}}}class Ih extends Pv{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new Ih(l)}_finalizeEnroll(l,c,g){return function tv(f,l){return J(f,"POST","/v2/accounts/mfaEnrollment:finalize",se(f,l))}(l,{idToken:c,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,c){return function lv(f,l){return J(f,"POST","/v2/accounts/mfaSignIn:finalize",se(f,l))}(l,{mfaPendingCredential:c,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ha=(()=>{class f{constructor(){}static assertion(c){return Ih._fromCredential(c)}}return f.FACTOR_ID="phone",f})();var Ag="@firebase/auth";class Nv{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var c=this;return(0,S.Z)(function*(){return c.assertAuthConfigured(),yield c.auth._initializationPromise,c.auth.currentUser?{accessToken:yield c.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const c=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,c),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const c=this.internalListeners.get(l);c&&(this.internalListeners.delete(l),c(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,P.Pz)("authIdTokenMaxAge"),function ZC(f){Ka=f}({loadJS:f=>new Promise((l,c)=>{const g=document.createElement("script");g.setAttribute("src",f),g.onload=l,g.onerror=I=>{const C=Ft("internal-error");C.customData=I,c(C)},g.type="text/javascript",g.charset="UTF-8",function Pg(){var f,l;return null!==(l=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function kv(f){(0,Ee._registerComponent)(new cn.wA("auth",(l,{options:c})=>{const g=l.getProvider("app").getImmediate(),I=l.getProvider("heartbeat"),C=l.getProvider("app-check-internal"),{apiKey:V,authDomain:W}=g.options;ue(V&&!V.includes(":"),"invalid-api-key",{appName:g.name});const ce={apiKey:V,authDomain:W,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ye(f)},Re=new Ii(g,I,C,ce);return function ll(f,l){const c=l?.persistence||[],g=(Array.isArray(c)?c:[c]).map(oe);l?.errorMap&&f._updateErrorMap(l.errorMap),f._initializeWithPersistence(g,l?.popupRedirectResolver)}(Re,c),Re},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,c,g)=>{l.getProvider("auth-internal").initialize()})),(0,Ee._registerComponent)(new cn.wA("auth-internal",l=>{const c=zt(l.getProvider("auth").getImmediate());return new Nv(c)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ee.registerVersion)(Ag,"1.7.9",function Ov(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Ee.registerVersion)(Ag,"1.7.9","esm2017")}("Browser")},90:(qi,Bn,We)=>{We.d(Bn,{BH:()=>Or,G6:()=>Y,L:()=>At,LL:()=>vt,L_:()=>dn,Pz:()=>Ft,Rd:()=>bt,Sg:()=>kt,UG:()=>ue,ZB:()=>Fe,ZR:()=>Ie,aH:()=>yt,b$:()=>ti,eu:()=>re,hl:()=>ee,jU:()=>nn,m9:()=>Ni,n2:()=>Gt,ne:()=>an,pd:()=>wr,r3:()=>ur,ru:()=>kr,tV:()=>ae,uI:()=>wn,vZ:()=>Vr,w1:()=>Wi,xO:()=>ni,xb:()=>Ki,z$:()=>ot,zd:()=>_i});const ke=function(T){const E=[];let w=0;for(let x=0;x<T.length;x++){let R=T.charCodeAt(x);R<128?E[w++]=R:R<2048?(E[w++]=R>>6|192,E[w++]=63&R|128):55296==(64512&R)&&x+1<T.length&&56320==(64512&T.charCodeAt(x+1))?(R=65536+((1023&R)<<10)+(1023&T.charCodeAt(++x)),E[w++]=R>>18|240,E[w++]=R>>12&63|128,E[w++]=R>>6&63|128,E[w++]=63&R|128):(E[w++]=R>>12|224,E[w++]=R>>6&63|128,E[w++]=63&R|128)}return E},cn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(T,E){if(!Array.isArray(T))throw Error("encodeByteArray takes an array as a parameter");this.init_();const w=E?this.byteToCharMapWebSafe_:this.byteToCharMap_,x=[];for(let R=0;R<T.length;R+=3){const oe=T[R],me=R+1<T.length,je=me?T[R+1]:0,gt=R+2<T.length,Le=gt?T[R+2]:0;let sn=(15&je)<<2|Le>>6,Oi=63&Le;gt||(Oi=64,me||(sn=64)),x.push(w[oe>>2],w[(3&oe)<<4|je>>4],w[sn],w[Oi])}return x.join("")},encodeString(T,E){return this.HAS_NATIVE_SUPPORT&&!E?btoa(T):this.encodeByteArray(ke(T),E)},decodeString(T,E){return this.HAS_NATIVE_SUPPORT&&!E?atob(T):function(T){const E=[];let w=0,x=0;for(;w<T.length;){const R=T[w++];if(R<128)E[x++]=String.fromCharCode(R);else if(R>191&&R<224){const oe=T[w++];E[x++]=String.fromCharCode((31&R)<<6|63&oe)}else if(R>239&&R<365){const gt=((7&R)<<18|(63&T[w++])<<12|(63&T[w++])<<6|63&T[w++])-65536;E[x++]=String.fromCharCode(55296+(gt>>10)),E[x++]=String.fromCharCode(56320+(1023&gt))}else{const oe=T[w++],me=T[w++];E[x++]=String.fromCharCode((15&R)<<12|(63&oe)<<6|63&me)}}return E.join("")}(this.decodeStringToByteArray(T,E))},decodeStringToByteArray(T,E){this.init_();const w=E?this.charToByteMapWebSafe_:this.charToByteMap_,x=[];for(let R=0;R<T.length;){const oe=w[T.charAt(R++)],je=R<T.length?w[T.charAt(R)]:0;++R;const Le=R<T.length?w[T.charAt(R)]:64;++R;const xe=R<T.length?w[T.charAt(R)]:64;if(++R,null==oe||null==je||null==Le||null==xe)throw new Rn;x.push(oe<<2|je>>4),64!==Le&&(x.push(je<<4&240|Le>>2),64!==xe&&x.push(Le<<6&192|xe))}return x},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let T=0;T<this.ENCODED_VALS.length;T++)this.byteToCharMap_[T]=this.ENCODED_VALS.charAt(T),this.charToByteMap_[this.byteToCharMap_[T]]=T,this.byteToCharMapWebSafe_[T]=this.ENCODED_VALS_WEBSAFE.charAt(T),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[T]]=T,T>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(T)]=T,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(T)]=T)}}};class Rn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const At=function(T){return function(T){const E=ke(T);return cn.encodeByteArray(E,!0)}(T).replace(/\./g,"")},ae=function(T){try{return cn.decodeString(T,!0)}catch(E){console.error("base64Decode failed: ",E)}return null};function Fe(T,E){if(!(E instanceof Object))return E;switch(E.constructor){case Date:return new Date(E.getTime());case Object:void 0===T&&(T={});break;case Array:T=[];break;default:return E}for(const w in E)!E.hasOwnProperty(w)||!st(w)||(T[w]=Fe(T[w],E[w]));return T}function st(T){return"__proto__"!==T}function bt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const tt=()=>{try{return bt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const T=process.env.__FIREBASE_DEFAULTS__;return T?JSON.parse(T):void 0})()||(()=>{if(typeof document>"u")return;let T;try{T=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const E=T&&ae(T[1]);return E&&JSON.parse(E)})()}catch(T){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${T}`)}},yt=()=>{var T;return null===(T=tt())||void 0===T?void 0:T.config},Ft=T=>{var E;return null===(E=tt())||void 0===E?void 0:E[`_${T}`]};class Or{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((E,w)=>{this.resolve=E,this.reject=w})}wrapCallback(E){return(w,x)=>{w?this.reject(w):this.resolve(x),"function"==typeof E&&(this.promise.catch(()=>{}),1===E.length?E(w):E(w,x))}}}function kt(T,E){if(T.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const x=E||"demo-project",R=T.iat||0,oe=T.sub||T.user_id;if(!oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${x}`,aud:x,iat:R,exp:R+3600,auth_time:R,sub:oe,user_id:oe,firebase:{sign_in_provider:"custom",identities:{}}},T);return[At(JSON.stringify({alg:"none",type:"JWT"})),At(JSON.stringify(me)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function wn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function ue(){var T;const E=null===(T=tt())||void 0===T?void 0:T.forceEnvironment;if("node"===E)return!0;if("browser"===E)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function nn(){return typeof window<"u"||Gt()}function Gt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function dn(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function kr(){const T="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof T&&void 0!==T.id}function ti(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Wi(){const T=ot();return T.indexOf("MSIE ")>=0||T.indexOf("Trident/")>=0}function Y(){return!ue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((T,E)=>{try{let w=!0;const x="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(x);R.onsuccess=()=>{R.result.close(),w||self.indexedDB.deleteDatabase(x),T(!0)},R.onupgradeneeded=()=>{w=!1},R.onerror=()=>{var oe;E((null===(oe=R.error)||void 0===oe?void 0:oe.message)||"")}}catch(w){E(w)}})}class Ie extends Error{constructor(E,w,x){super(w),this.code=E,this.customData=x,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}}class vt{constructor(E,w,x){this.service=E,this.serviceName=w,this.errors=x}create(E,...w){const x=w[0]||{},R=`${this.service}/${E}`,oe=this.errors[E],me=oe?function be(T,E){return T.replace(Oe,(w,x)=>{const R=E[x];return null!=R?String(R):`<${x}?>`})}(oe,x):"Error";return new Ie(R,`${this.serviceName}: ${me} (${R}).`,x)}}const Oe=/\{\$([^}]+)}/g;function ur(T,E){return Object.prototype.hasOwnProperty.call(T,E)}function Ki(T){for(const E in T)if(Object.prototype.hasOwnProperty.call(T,E))return!1;return!0}function Vr(T,E){if(T===E)return!0;const w=Object.keys(T),x=Object.keys(E);for(const R of w){if(!x.includes(R))return!1;const oe=T[R],me=E[R];if(as(oe)&&as(me)){if(!Vr(oe,me))return!1}else if(oe!==me)return!1}for(const R of x)if(!w.includes(R))return!1;return!0}function as(T){return null!==T&&"object"==typeof T}function ni(T){const E=[];for(const[w,x]of Object.entries(T))Array.isArray(x)?x.forEach(R=>{E.push(encodeURIComponent(w)+"="+encodeURIComponent(R))}):E.push(encodeURIComponent(w)+"="+encodeURIComponent(x));return E.length?"&"+E.join("&"):""}function _i(T){const E={};return T.replace(/^\?/,"").split("&").forEach(x=>{if(x){const[R,oe]=x.split("=");E[decodeURIComponent(R)]=decodeURIComponent(oe)}}),E}function wr(T){const E=T.indexOf("?");if(!E)return"";const w=T.indexOf("#",E);return T.substring(E,w>0?w:void 0)}function an(T,E){const w=new Tr(T,E);return w.subscribe.bind(w)}class Tr{constructor(E,w){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=w,this.task.then(()=>{E(this)}).catch(x=>{this.error(x)})}next(E){this.forEachObserver(w=>{w.next(E)})}error(E){this.forEachObserver(w=>{w.error(E)}),this.close(E)}complete(){this.forEachObserver(E=>{E.complete()}),this.close()}subscribe(E,w,x){let R;if(void 0===E&&void 0===w&&void 0===x)throw new Error("Missing Observer.");R=function lr(T,E){if("object"!=typeof T||null===T)return!1;for(const w of E)if(w in T&&"function"==typeof T[w])return!0;return!1}(E,["next","error","complete"])?E:{next:E,error:w,complete:x},void 0===R.next&&(R.next=Mn),void 0===R.error&&(R.error=Mn),void 0===R.complete&&(R.complete=Mn);const oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),oe}unsubscribeOne(E){void 0===this.observers||void 0===this.observers[E]||(delete this.observers[E],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(E){if(!this.finalized)for(let w=0;w<this.observers.length;w++)this.sendOne(w,E)}sendOne(E,w){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[E])try{w(this.observers[E])}catch(x){typeof console<"u"&&console.error&&console.error(x)}})}close(E){this.finalized||(this.finalized=!0,void 0!==E&&(this.finalError=E),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}function Ni(T){return T&&T._delegate?T._delegate:T}},857:(qi,Bn,We)=>{function S(n){return"function"==typeof n}function Ee(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const P=Ee(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ke(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ot{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(S(r))try{r()}catch(s){e=s instanceof P?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Jt(s)}catch(o){e=e??[],o instanceof P?e=[...e,...o.errors]:e.push(o)}}if(e)throw new P(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Jt(e);else{if(e instanceof Ot){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ke(t,e)}remove(e){const{_finalizers:t}=this;t&&ke(t,e),e instanceof Ot&&e._removeParent(this)}}Ot.EMPTY=(()=>{const n=new Ot;return n.closed=!0,n})();const cn=Ot.EMPTY;function Rn(n){return n instanceof Ot||n&&"closed"in n&&S(n.remove)&&S(n.add)&&S(n.unsubscribe)}function Jt(n){S(n)?n():n.unsubscribe()}const At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ae={setTimeout(n,e,...t){const{delegate:r}=ae;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ae;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function pe(n){ae.setTimeout(()=>{const{onUnhandledError:e}=At;if(!e)throw n;e(n)})}function Fe(){}const st=_t("C",void 0,void 0);function _t(n,e,t){return{kind:n,value:e,error:t}}let Ye=null;function tt(n){if(At.useDeprecatedSynchronousErrorHandling){const e=!Ye;if(e&&(Ye={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ye;if(Ye=null,t)throw r}}else n()}class En extends Ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rn(e)&&e.add(this)):this.destination=nn}static create(e,t,r){return new kt(e,t,r)}next(e){this.isStopped?ue(function jn(n){return _t("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ue(function bt(n){return _t("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ue(st,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function Ft(n,e){return yt.call(n,e)}class Or{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ot(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ot(r)}else ot(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ot(t)}}}class kt extends En{constructor(e,t,r){let i;if(super(),S(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&At.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ft(e.next,s),error:e.error&&Ft(e.error,s),complete:e.complete&&Ft(e.complete,s)}):i=e}this.destination=new Or(i)}}function ot(n){At.useDeprecatedSynchronousErrorHandling?function Jn(n){At.useDeprecatedSynchronousErrorHandling&&Ye&&(Ye.errorThrown=!0,Ye.error=n)}(n):pe(n)}function ue(n,e){const{onStoppedNotification:t}=At;t&&ae.setTimeout(()=>t(n,e))}const nn={closed:!0,next:Fe,error:function wn(n){throw n},complete:Fe},Gt="function"==typeof Symbol&&Symbol.observable||"@@observable";function dn(n){return n}function ti(n){return 0===n.length?dn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ct=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function K(n){return n&&n instanceof En||function Mi(n){return n&&S(n.next)&&S(n.error)&&S(n.complete)}(n)&&Rn(n)}(t)?t:new kt(t,r,i);return tt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Wi(r))((i,s)=>{const o=new kt({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Gt](){return this}pipe(...t){return ti(t)(this)}toPromise(t){return new(t=Wi(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Wi(n){var e;return null!==(e=n??At.Promise)&&void 0!==e?e:Promise}const Y=Ee(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ee=(()=>{class n extends ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new re(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Y}next(t){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?cn:(this.currentObservers=null,s.push(t),new Ot(()=>{this.currentObservers=null,ke(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new ct;return t.source=this,t}}return n.create=(e,t)=>new re(e,t),n})();class re extends ee{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:cn}}function se(n){return S(n?.lift)}function J(n){return e=>{if(se(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ie(n,e,t,r,i){return new vt(n,e,t,r,i)}class vt extends En{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function be(n,e){return J((t,r)=>{let i=0;t.subscribe(Ie(r,s=>{r.next(n.call(e,s,i++))}))})}var Oe=We(582);const Mt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function rn(n){return S(n?.then)}function ar(n){return S(n[Gt])}function xt(n){return Symbol.asyncIterator&&S(n?.[Symbol.asyncIterator])}function qt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const $n=function Pn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ur(n){return S(n?.[$n])}function os(n){return(0,Oe.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Oe.qq)(t.read());if(i)return yield(0,Oe.qq)(void 0);yield yield(0,Oe.qq)(r)}}finally{t.releaseLock()}})}function Ki(n){return S(n?.getReader)}function Ut(n){if(n instanceof ct)return n;if(null!=n){if(ar(n))return function Vr(n){return new ct(e=>{const t=n[Gt]();if(S(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Mt(n))return function as(n){return new ct(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(rn(n))return function Ps(n){return new ct(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,pe)})}(n);if(xt(n))return _i(n);if(ur(n))return function ni(n){return new ct(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Ki(n))return function wr(n){return _i(os(n))}(n)}throw qt(n)}function _i(n){return new ct(e=>{(function Fr(n,e){var t,r,i,s;return(0,Oe.mG)(this,void 0,void 0,function*(){try{for(t=(0,Oe.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function an(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function hn(n,e,t=1/0){return S(e)?hn((r,i)=>be((s,o)=>e(r,s,i,o))(Ut(n(r,i))),t):("number"==typeof e&&(t=e),J((r,i)=>function Tr(n,e,t,r,i,s,o,a){const u=[];let h=0,p=0,m=!1;const y=()=>{m&&!u.length&&!h&&e.complete()},D=N=>h<r?b(N):u.push(N),b=N=>{s&&e.next(N),h++;let O=!1;Ut(t(N,p++)).subscribe(Ie(e,z=>{i?.(z),s?D(z):e.next(z)},()=>{O=!0},void 0,()=>{if(O)try{for(h--;u.length&&h<r;){const z=u.shift();o?an(e,o,()=>b(z)):b(z)}y()}catch(z){e.error(z)}}))};return n.subscribe(Ie(e,D,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function lr(n=1/0){return hn(dn,n)}const Mn=new ct(n=>n.complete());function vi(n){return n[n.length-1]}function us(n){return S(vi(n))?n.pop():void 0}function xn(n){return function Wt(n){return n&&S(n.schedule)}(vi(n))?n.pop():void 0}function On(n,e=0){return J((t,r)=>{t.subscribe(Ie(r,i=>an(r,n,()=>r.next(i),e),()=>an(r,n,()=>r.complete(),e),i=>an(r,n,()=>r.error(i),e)))})}function Dr(n,e=0){return J((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function xs(n,e){if(!n)throw new Error("Iterable cannot be null");return new ct(t=>{an(t,e,()=>{const r=n[Symbol.asyncIterator]();an(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function T(n,e){return e?function Ni(n,e){if(null!=n){if(ar(n))return function ls(n,e){return Ut(n).pipe(Dr(e),On(e))}(n,e);if(Mt(n))return function ds(n,e){return new ct(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(rn(n))return function cs(n,e){return Ut(n).pipe(Dr(e),On(e))}(n,e);if(xt(n))return xs(n,e);if(ur(n))return function ao(n,e){return new ct(t=>{let r;return an(t,e,()=>{r=n[$n](),an(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>S(r?.return)&&r.return()})}(n,e);if(Ki(n))return function xi(n,e){return xs(os(n),e)}(n,e)}throw qt(n)}(n,e):Ut(n)}function E(...n){const e=xn(n),t=function cr(n,e){return"number"==typeof vi(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ut(r[0]):lr(t)(T(r,e)):Mn}function w(n={}){const{connector:e=(()=>new ee),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,h=0,p=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},D=()=>{y(),o=u=void 0,p=m=!1},b=()=>{const N=o;D(),N?.unsubscribe()};return J((N,O)=>{h++,!m&&!p&&y();const z=u=u??e();O.add(()=>{h--,0===h&&!m&&!p&&(a=x(b,i))}),z.subscribe(O),!o&&h>0&&(o=new kt({next:te=>z.next(te),error:te=>{m=!0,y(),a=x(D,t,te),z.error(te)},complete:()=>{p=!0,y(),a=x(D,r),z.complete()}}),Ut(N).subscribe(o))})(s)}}function x(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new kt({next:()=>{r.unsubscribe(),n()}});return Ut(e(...t)).subscribe(r)}function R(n){for(let e in n)if(n[e]===R)return e;throw Error("Could not find renamed property on target object.")}function oe(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function je(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const gt=R({__forward_ref__:R});function Le(n){return n.__forward_ref__=Le,n.toString=function(){return me(this())},n}function Ae(n){return xe(n)?n():n}function xe(n){return"function"==typeof n&&n.hasOwnProperty(gt)&&n.__forward_ref__===Le}function sn(n){return n&&!!n.\u0275providers}const uo="https://g.co/ng/security#xss";class _e extends Error{constructor(e,t){super(lo(e,t)),this.code=e}}function lo(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function Xe(n){return"string"==typeof n?n:null==n?"":String(n)}function ne(n,e){throw new _e(-201,!1)}function Ei(n,e){null==n&&function Bt(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function He(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Cr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ns(n){return Fp(n,ll)||Fp(n,Od)}function Fp(n,e){return n.hasOwnProperty(e)?n[e]:null}function Lp(n){return n&&(n.hasOwnProperty(cl)||n.hasOwnProperty(Vy))?n[cl]:null}const ll=R({\u0275prov:R}),cl=R({\u0275inj:R}),Od=R({ngInjectableDef:R}),Vy=R({ngInjectorDef:R});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let kd;function ri(n){const e=kd;return kd=n,e}function dl(n,e,t){const r=Ns(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Qe.Optional?null:void 0!==e?e:void ne(me(n))}const Kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),co={},Vd="__NG_DI_FLAG__",Xo="ngTempTokenPath",hl="ngTokenPath",Fd=/\n/gm,Fy="\u0275",fl="__source";let Za;function Os(n){const e=Za;return Za=n,e}function Ly(n,e=Qe.Default){if(void 0===Za)throw new _e(-203,!1);return null===Za?dl(n,void 0,e):Za.get(n,e&Qe.Optional?null:void 0,e)}function ve(n,e=Qe.Default){return(function Jo(){return kd}()||Ly)(Ae(n),e)}function mt(n,e=Qe.Default){return ve(n,pl(e))}function pl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qa(n){const e=[];for(let t=0;t<n.length;t++){const r=Ae(n[t]);if(Array.isArray(r)){if(0===r.length)throw new _e(900,!1);let i,s=Qe.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Ld(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ve(i,s))}else e.push(ve(r))}return e}function Ya(n,e){return n[Vd]=e,n.prototype[Vd]=e,n}function Ld(n){return n[Vd]}function ki(n){return{toString:n}.toString()}var Zi=(()=>((Zi=Zi||{})[Zi.OnPush=0]="OnPush",Zi[Zi.Default=1]="Default",Zi))(),Hn=(()=>{return(n=Hn||(Hn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Hn;var n})();const fs={},Nt=[],gl=R({\u0275cmp:R}),Xa=R({\u0275dir:R}),Ud=R({\u0275pipe:R}),ml=R({\u0275mod:R}),ps=R({\u0275fac:R}),eu=R({__NG_ELEMENT_ID__:R});let Bd=0;function Lr(n){return ki(()=>{const e=jp(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Zi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Hn.Emulated,id:"c"+Bd++,styles:n.styles||Nt,_:null,schemas:n.schemas||null,tView:null};nu(t);const r=n.dependencies;return t.directiveDefs=_l(r,!1),t.pipeDefs=_l(r,!0),t})}function By(n){return jt(n)||yr(n)}function tu(n){return null!==n}function Vi(n){return ki(()=>({type:n.type,bootstrap:n.bootstrap||Nt,declarations:n.declarations||Nt,imports:n.imports||Nt,exports:n.exports||Nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Qi(n,e){if(null==n)return fs;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ke(n){return ki(()=>{const e=jp(n);return nu(e),e})}function jt(n){return n[gl]||null}function yr(n){return n[Xa]||null}function Ur(n){return n[Ud]||null}function er(n,e){const t=n[ml]||null;if(!t&&!0===e)throw new Error(`Type ${me(n)} does not have '\u0275mod' property.`);return t}function jp(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Nt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qi(n.inputs,e),outputs:Qi(n.outputs)}}function nu(n){n.features?.forEach(e=>e(n))}function _l(n,e){if(!n)return null;const t=e?Ur:By;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(tu)}const Yi=0,Se=1,Ze=2,pn=3,Fi=4,gs=5,Gn=6,ho=7,Tn=8,yl=9,ta=10,ut=11,ru=12,ks=13,vl=14,fo=15,tr=16,na=17,Vs=18,ii=19,po=20,$d=21,Zt=22,iu=1,$p=2,ra=7,Il=8,Fs=9,zn=10;function Ar(n){return Array.isArray(n)&&"object"==typeof n[iu]}function Br(n){return Array.isArray(n)&&!0===n[iu]}function su(n){return 0!=(4&n.flags)}function go(n){return n.componentOffset>-1}function El(n){return 1==(1&n.flags)}function si(n){return!!n.template}function $y(n){return 0!=(256&n[Ze])}function ms(n,e){return n.hasOwnProperty(ps)?n[ps]:null}class zy{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function jr(){return Jp}function Jp(n){return n.type.prototype.ngOnChanges&&(n.setInput=qy),Gd}function Gd(){const n=Xp(this),e=n?.current;if(e){const t=n.previous;if(t===fs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function qy(n,e,t,r){const i=this.declaredInputs[t],s=Xp(n)||function Wy(n,e){return n[Tl]=e}(n,{previous:fs,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new zy(u&&u.currentValue,e,a===fs),n[r]=e}jr.ngInherit=!0;const Tl="__ngSimpleChanges__";function Xp(n){return n[Tl]||null}const wi=function(n,e,t){};function dr(n){for(;Array.isArray(n);)n=n[Yi];return n}function Cl(n,e){return dr(e[n])}function oi(n,e){return dr(e[n.index])}function Qy(n,e){return n.data[e]}function ai(n,e){const t=e[n];return Ar(t)?t:t[Yi]}function Al(n){return 64==(64&n[Ze])}function _o(n,e){return null==e?null:n[e]}function Jy(n){n[Vs]=0}function eg(n,e){n[gs]+=e;let t=n,r=n[pn];for(;null!==r&&(1===e&&1===t[gs]||-1===e&&0===t[gs]);)r[gs]+=e,t=r,r=r[pn]}const at={lFrame:lu(null),bindingsEnabled:!0};function tg(){return at.bindingsEnabled}function he(){return at.lFrame.lView}function St(){return at.lFrame.tView}function qn(){let n=rg();for(;null!==n&&64===n.type;)n=n.parent;return n}function rg(){return at.lFrame.currentTNode}function Li(n,e){const t=at.lFrame;t.currentTNode=n,t.isParent=e}function Qd(){return at.lFrame.isParent}function Ji(){return at.lFrame.bindingIndex++}function Jd(n,e){const t=at.lFrame;t.bindingIndex=t.bindingRootIndex=n,au(e)}function au(n){at.lFrame.currentDirectiveIndex=n}function Sl(n){at.lFrame.currentQueryIndex=n}function sv(n){const e=n[Se];return 2===e.type?e.declTNode:1===e.type?n[Gn]:null}function uu(n,e,t){if(t&Qe.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Qe.Host||(i=sv(s),null===i||(s=s[fo],10&i.type))););if(null===i)return!1;e=i,n=s}const r=at.lFrame=ia();return r.currentTNode=e,r.lView=n,!0}function Rl(n){const e=ia(),t=n[Se];at.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ia(){const n=at.lFrame,e=null===n?null:n.child;return null===e?lu(n):e}function lu(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ag(){const n=at.lFrame;return at.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Pl=ag;function Ml(){const n=ag();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fr(){return at.lFrame.selectedIndex}function Us(n){at.lFrame.selectedIndex=n}function gn(){const n=at.lFrame;return Qy(n.tView,n.selectedIndex)}function xl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:h,ngOnDestroy:p}=s;o&&(n.contentHooks??(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),u&&(n.viewHooks??(n.viewHooks=[])).push(-t,u),h&&((n.viewHooks??(n.viewHooks=[])).push(t,h),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,h)),null!=p&&(n.destroyHooks??(n.destroyHooks=[])).push(t,p)}}function Nl(n,e,t){lg(n,e,3,t)}function vo(n,e,t,r){(3&n[Ze])===t&&lg(n,e,t,r)}function th(n,e){let t=n[Ze];(3&t)===e&&(t&=2047,t+=1,n[Ze]=t)}function lg(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[Vs]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[Vs]+=65536),(a<s||-1==s)&&(dv(n,t,e,u),n[Vs]=(4294901760&n[Vs])+u+2),u++}function dv(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[Ze]>>11<n[Vs]>>16&&(3&n[Ze])===e){n[Ze]+=2048,wi(4,a,s);try{s.call(a)}finally{wi(5,a,s)}}}else{wi(4,a,s);try{s.call(a)}finally{wi(5,a,s)}}}const Bs=-1;class cu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function rh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];dg(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Ol(n){return 3===n||4===n||6===n}function dg(n){return 64===n.charCodeAt(0)}function Io(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||hg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function hg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function kl(n){return n!==Bs}function Eo(n){return 32767&n}function Vl(n,e){let t=function ih(n){return n>>16}(n),r=e;for(;t>0;)r=r[fo],t--;return r}let du=!0;function Fl(n){const e=du;return du=n,e}const Ll=255,fg=5;let mv=0;const Xi={};function hu(n,e){const t=pg(n,e);if(-1!==t)return t;const r=e[Se];r.firstCreatePass&&(n.injectorIndex=e.length,oh(r.data,n),oh(e,null),oh(r.blueprint,null));const i=fu(n,e),s=n.injectorIndex;if(kl(i)){const o=Eo(i),a=Vl(i,e),u=a[Se].data;for(let h=0;h<8;h++)e[s+h]=a[o+h]|u[o+h]}return e[s+8]=i,s}function oh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function pg(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function fu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=yg(i),null===r)return Bs;if(t++,i=i[fo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Bs}function ah(n,e,t){!function sh(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(eu)&&(r=t[eu]),null==r&&(r=t[eu]=mv++);const i=r&Ll;e.data[n+(i>>fg)]|=1<<i}(n,e,t)}function gg(n,e,t){if(t&Qe.Optional||void 0!==n)return n;ne()}function Ul(n,e,t,r){if(t&Qe.Optional&&void 0===r&&(r=null),!(t&(Qe.Self|Qe.Host))){const i=n[yl],s=ri(void 0);try{return i?i.get(e,r,t&Qe.Optional):dl(e,r,t&Qe.Optional)}finally{ri(s)}}return gg(r,0,t)}function Bl(n,e,t,r=Qe.Default,i){if(null!==n){if(1024&e[Ze]){const o=function _v(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[Ze]&&!(256&o[Ze]);){const a=mg(s,o,t,r|Qe.Self,Xi);if(a!==Xi)return a;let u=s.parent;if(!u){const h=o[$d];if(h){const p=h.get(t,Xi,r);if(p!==Xi)return p}u=yg(o),o=o[fo]}s=u}return i}(n,e,t,r,Xi);if(o!==Xi)return o}const s=mg(n,e,t,r,Xi);if(s!==Xi)return s}return Ul(e,t,r,i)}function mg(n,e,t,r,i){const s=function lh(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(eu)?n[eu]:void 0;return"number"==typeof e?e>=0?e&Ll:_g:e}(t);if("function"==typeof s){if(!uu(e,n,r))return r&Qe.Host?gg(i,0,r):Ul(e,t,r,i);try{const o=s(r);if(null!=o||r&Qe.Optional)return o;ne()}finally{Pl()}}else if("number"==typeof s){let o=null,a=pg(n,e),u=Bs,h=r&Qe.Host?e[tr][Gn]:null;for((-1===a||r&Qe.SkipSelf)&&(u=-1===a?fu(n,e):e[a+8],u!==Bs&&Hl(r,!1)?(o=e[Se],a=Eo(u),e=Vl(u,e)):a=-1);-1!==a;){const p=e[Se];if($l(s,a,p.data)){const m=pu(a,e,t,o,r,h);if(m!==Xi)return m}u=e[a+8],u!==Bs&&Hl(r,e[Se].data[a+8]===h)&&$l(s,a,e)?(o=p,a=Eo(u),e=Vl(u,e)):a=-1}}return i}function pu(n,e,t,r,i,s){const o=e[Se],a=o.data[n+8],p=function jl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,p=s>>20,y=i?a+p:n.directiveEnd;for(let D=r?a:a+p;D<y;D++){const b=o[D];if(D<u&&t===b||D>=u&&b.type===t)return D}if(i){const D=o[u];if(D&&si(D)&&D.type===t)return u}return null}(a,o,t,null==r?go(a)&&du:r!=o&&0!=(3&a.type),i&Qe.Host&&s===a);return null!==p?wo(e,o,p,a):Xi}function wo(n,e,t,r){let i=n[t];const s=e.data;if(function hv(n){return n instanceof cu}(i)){const o=i;o.resolving&&function Rd(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new _e(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Tt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Xe(n)}(s[t]));const a=Fl(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?ri(o.injectImpl):null;uu(n,r,Qe.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function cv(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Jp(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==u&&ri(u),Fl(a),o.resolving=!1,Pl()}}return i}function $l(n,e,t){return!!(t[e+(n>>fg)]&1<<n)}function Hl(n,e){return!(n&Qe.Self||n&Qe.Host&&e)}class oa{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Bl(this._tNode,this._lView,e,pl(r),t)}}function _g(){return new oa(qn(),he())}function nr(n){return ki(()=>{const e=n.prototype.constructor,t=e[ps]||Gl(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[ps]||Gl(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Gl(n){return xe(n)?()=>{const e=Gl(Ae(n));return e&&e()}:ms(n)}function yg(n){const e=n[Se],t=e.type;return 2===t?e.declTNode:1===t?n[Gn]:null}const la="__parameters__";function $s(n,e,t){return ki(()=>{const r=function ch(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,h,p){const m=u.hasOwnProperty(la)?u[la]:Object.defineProperty(u,la,{value:[]})[la];for(;m.length<=p;)m.push(null);return(m[p]=m[p]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Me{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=He({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function To(n,e){n.forEach(t=>Array.isArray(t)?To(t,e):e(t))}function ph(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function zl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ui(n,e,t){let r=ca(n,e);return r>=0?n[1|r]=t:(r=~r,function Dv(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function gh(n,e){const t=ca(n,e);if(t>=0)return n[1|t]}function ca(n,e){return function ql(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const da=Ya($s("Optional"),8),Do=Ya($s("SkipSelf"),4);var br=(()=>((br=br||{})[br.Important=1]="Important",br[br.DashCase=2]="DashCase",br))();const Xl=new Map;let Vv=0;const Uv="__ngContext__";function Hr(n,e){Ar(e)?(n[Uv]=e[po],function Fv(n){Xl.set(n[po],n)}(e)):n[Uv]=e}let Bv;function jv(n,e){return Bv(n,e)}function bh(n){const e=n[pn];return Br(e)?e[pn]:e}function $v(n){return b0(n[ks])}function Hv(n){return b0(n[Fi])}function b0(n){for(;null!==n&&!Br(n);)n=n[Fi];return n}function ec(n,e,t,r,i){if(null!=r){let s,o=!1;Br(r)?s=r:Ar(r)&&(o=!0,r=r[Yi]);const a=dr(r);0===n&&null!==t?null==i?N0(e,t,a):yu(e,t,a,i||null,!0):1===n&&null!==t?yu(e,t,a,i||null,!0):2===n?function Qv(n,e,t){const r=Ng(n,e);r&&function XF(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function nL(n,e,t,r,i){const s=t[ra];s!==dr(t)&&ec(e,n,r,s,i);for(let a=zn;a<t.length;a++){const u=t[a];Sh(u[Se],u,n,e,r,s)}}(e,n,s,t,i)}}function zv(n,e,t){return n.createElement(e,t)}function R0(n,e){const t=n[Fs],r=t.indexOf(e),i=e[pn];512&e[Ze]&&(e[Ze]&=-513,eg(i,-1)),t.splice(r,1)}function qv(n,e){if(n.length<=zn)return;const t=zn+e,r=n[t];if(r){const i=r[na];null!==i&&i!==n&&R0(i,r),e>0&&(n[t-1][Fi]=r[Fi]);const s=zl(n,zn+e);!function zF(n,e){Sh(n,e,e[ut],2,null,null),e[Yi]=null,e[Gn]=null}(r[Se],r);const o=s[ii];null!==o&&o.detachView(s[Se]),r[pn]=null,r[Fi]=null,r[Ze]&=-65}return r}function P0(n,e){if(!(128&e[Ze])){const t=e[ut];t.destroyNode&&Sh(n,e,t,3,null,null),function KF(n){let e=n[ks];if(!e)return Wv(n[Se],n);for(;e;){let t=null;if(Ar(e))t=e[ks];else{const r=e[zn];r&&(t=r)}if(!t){for(;e&&!e[Fi]&&e!==n;)Ar(e)&&Wv(e[Se],e),e=e[pn];null===e&&(e=n),Ar(e)&&Wv(e[Se],e),t=e&&e[Fi]}e=t}}(e)}}function Wv(n,e){if(!(128&e[Ze])){e[Ze]&=-65,e[Ze]|=128,function JF(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof cu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];wi(4,a,u);try{u.call(a)}finally{wi(5,a,u)}}else{wi(4,i,s);try{s.call(i)}finally{wi(5,i,s)}}}}}(n,e),function YF(n,e){const t=n.cleanup,r=e[ho];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[ho]=null}}(n,e),1===e[Se].type&&e[ut].destroy();const t=e[na];if(null!==t&&Br(e[pn])){t!==e[pn]&&R0(t,e);const r=e[ii];null!==r&&r.detachView(n)}!function OF(n){Xl.delete(n[po])}(e)}}function M0(n,e,t){return function x0(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Yi];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Hn.None||s===Hn.Emulated)return null}return oi(r,t)}}(n,e.parent,t)}function yu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function N0(n,e,t){n.appendChild(e,t)}function O0(n,e,t,r,i){null!==r?yu(n,e,t,r,i):N0(n,e,t)}function Ng(n,e){return n.parentNode(e)}let Kv,Xv,Fg,F0=function V0(n,e,t){return 40&n.type?oi(n,t):null};function Og(n,e,t,r){const i=M0(n,r,e),s=e[ut],a=function k0(n,e,t){return F0(n,e,t)}(r.parent||e[Gn],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)O0(s,i,t[u],a,!1);else O0(s,i,t,a,!1);void 0!==Kv&&Kv(s,r,e,t,i)}function kg(n,e){if(null!==e){const t=e.type;if(3&t)return oi(e,n);if(4&t)return Zv(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return kg(n,r);{const i=n[e.index];return Br(i)?Zv(-1,i):dr(i)}}if(32&t)return jv(e,n)()||dr(n[e.index]);{const r=U0(n,e);return null!==r?Array.isArray(r)?r[0]:kg(bh(n[tr]),r):kg(n,e.next)}}return null}function U0(n,e){return null!==e?n[tr][Gn].projection[e.projection]:null}function Zv(n,e){const t=zn+n+1;if(t<e.length){const r=e[t],i=r[Se].firstChild;if(null!==i)return kg(r,i)}return e[ra]}function Yv(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&Hr(dr(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)Yv(n,e,t.child,r,i,s,!1),ec(e,n,i,a,s);else if(32&u){const h=jv(t,r);let p;for(;p=h();)ec(e,n,i,p,s);ec(e,n,i,a,s)}else 16&u?B0(n,e,r,t,i,s):ec(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Sh(n,e,t,r,i,s){Yv(t,r,n.firstChild,e,i,s,!1)}function B0(n,e,t,r,i,s){const o=t[tr],u=o[Gn].projection[r.projection];if(Array.isArray(u))for(let h=0;h<u.length;h++)ec(e,n,i,u[h],s);else Yv(n,e,u,o[pn],i,s,!0)}function j0(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $0(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&rh(n,e,r),null!==i&&j0(n,e,i),null!==s&&function iL(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function q0(n){return function eI(){if(void 0===Fg&&(Fg=null,Kt.trustedTypes))try{Fg=Kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Fg}()?.createScriptURL(n)||n}class W0{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${uo})`}}function pa(n){return n instanceof W0?n.changingThisBreaksApplicationSecurity:n}function Rh(n,e){const t=function pL(n){return n instanceof W0&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${uo})`)}return t===e}const yL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var rr=(()=>((rr=rr||{})[rr.NONE=0]="NONE",rr[rr.HTML=1]="HTML",rr[rr.STYLE=2]="STYLE",rr[rr.SCRIPT=3]="SCRIPT",rr[rr.URL=4]="URL",rr[rr.RESOURCE_URL=5]="RESOURCE_URL",rr))();function eA(n){const e=Mh();return e?e.sanitize(rr.URL,n)||"":Rh(n,"URL")?pa(n):function tI(n){return(n=String(n)).match(yL)?n:"unsafe:"+n}(Xe(n))}function tA(n){const e=Mh();if(e)return q0(e.sanitize(rr.RESOURCE_URL,n)||"");if(Rh(n,"ResourceURL"))return q0(pa(n));throw new _e(904,!1)}function Mh(){const n=he();return n&&n[ru]}const Ug=new Me("ENVIRONMENT_INITIALIZER"),rA=new Me("INJECTOR",-1),iA=new Me("INJECTOR_DEF_TYPES");class sA{get(e,t=co){if(t===co){const r=new Error(`NullInjectorError: No provider for ${me(e)}!`);throw r.name="NullInjectorError",r}return t}}function ML(...n){return{\u0275providers:oA(0,n),\u0275fromNgModule:!0}}function oA(n,...e){const t=[],r=new Set;let i;return To(e,s=>{const o=s;sI(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&aA(i,t),t}function aA(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];oI(i,s=>{e.push(s)})}}function sI(n,e,t,r){if(!(n=Ae(n)))return!1;let i=null,s=Lp(n);const o=!s&&jt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Lp(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const h of u)sI(h,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let h;r.add(i);try{To(s.imports,p=>{sI(p,e,t,r)&&(h||(h=[]),h.push(p))})}finally{}void 0!==h&&aA(h,e)}if(!a){const h=ms(i)||(()=>new i);e.push({provide:i,useFactory:h,deps:Nt},{provide:iA,useValue:i,multi:!0},{provide:Ug,useValue:()=>ve(i),multi:!0})}const u=s.providers;null==u||a||oI(u,p=>{e.push(p)})}}return i!==n&&void 0!==n.providers}function oI(n,e){for(let t of n)sn(t)&&(t=t.\u0275providers),Array.isArray(t)?oI(t,e):e(t)}const xL=R({provide:String,useValue:R});function aI(n){return null!==n&&"object"==typeof n&&xL in n}function vu(n){return"function"==typeof n}const uI=new Me("Set Injector scope."),Bg={},OL={};let lI;function jg(){return void 0===lI&&(lI=new sA),lI}class bo{}class cA extends bo{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dI(e,o=>this.processProvider(o)),this.records.set(rA,nc(void 0,this)),i.has("environment")&&this.records.set(bo,nc(void 0,this));const s=this.records.get(uI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(iA.multi,Nt,Qe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Os(this),r=ri(void 0);try{return e()}finally{Os(t),ri(r)}}get(e,t=co,r=Qe.Default){this.assertNotDestroyed(),r=pl(r);const i=Os(this),s=ri(void 0);try{if(!(r&Qe.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function UL(n){return"function"==typeof n||"object"==typeof n&&n instanceof Me}(e)&&Ns(e);a=u&&this.injectableDefInScope(u)?nc(cI(e),Bg):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Qe.Self?jg():this.parent).get(e,t=r&Qe.Optional&&t===co?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Xo]=o[Xo]||[]).unshift(me(e)),i)throw o;return function Ja(n,e,t,r){const i=n[Xo];throw e[fl]&&i.unshift(e[fl]),n.message=function hs(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Fy?n.slice(2):n;let i=me(e);if(Array.isArray(e))i=e.map(me).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):me(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Fd,"\n  ")}`}("\n"+n.message,i,t,r),n[hl]=i,n[Xo]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{ri(s),Os(i)}}resolveInjectorInitializers(){const e=Os(this),t=ri(void 0);try{const r=this.get(Ug.multi,Nt,Qe.Self);for(const i of r)i()}finally{Os(e),ri(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(me(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(e){let t=vu(e=Ae(e))?e:Ae(e&&e.provide);const r=function VL(n){return aI(n)?nc(void 0,n.useValue):nc(dA(n),Bg)}(e);if(vu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=nc(void 0,Bg,!0),i.factory=()=>Qa(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Bg&&(t.value=OL,t.value=t.factory()),"object"==typeof t.value&&t.value&&function LL(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ae(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function cI(n){const e=Ns(n),t=null!==e?e.factory:ms(n);if(null!==t)return t;if(n instanceof Me)throw new _e(204,!1);if(n instanceof Function)return function kL(n){const e=n.length;if(e>0)throw function Hs(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new _e(204,!1);const t=function Nd(n){return n&&(n[ll]||n[Od])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new _e(204,!1)}function dA(n,e,t){let r;if(vu(n)){const i=Ae(n);return ms(i)||cI(i)}if(aI(n))r=()=>Ae(n.useValue);else if(function lA(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Qa(n.deps||[]));else if(function uA(n){return!(!n||!n.useExisting)}(n))r=()=>ve(Ae(n.useExisting));else{const i=Ae(n&&(n.useClass||n.provide));if(!function FL(n){return!!n.deps}(n))return ms(i)||cI(i);r=()=>new i(...Qa(n.deps))}return r}function nc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function dI(n,e){for(const t of n)Array.isArray(t)?dI(t,e):t&&sn(t)?dI(t.\u0275providers,e):e(t)}class BL{}class hA{}class $L{resolveComponentFactory(e){throw function jL(n){const e=Error(`No component factory found for ${me(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let xh=(()=>{class n{}return n.NULL=new $L,n})();function HL(){return rc(qn(),he())}function rc(n,e){return new Ui(oi(n,e))}let Ui=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=HL,n})();class pA{}let So=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function zL(){const n=he(),t=ai(qn().index,n);return(Ar(t)?t:n)[ut]}(),n})(),qL=(()=>{class n{}return n.\u0275prov=He({token:n,providedIn:"root",factory:()=>null}),n})();class ic{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const gA=new ic("15.2.10"),hI={},fI="ngOriginalError";function pI(n){return n[fI]}class sc{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&pI(e);for(;t&&pI(t);)t=pI(t);return t||null}}function Ro(n){return n instanceof Function?n():n}function _A(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const yA="ng-template";function r2(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==_A(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function vA(n){return 4===n.type&&n.value!==yA}function i2(n,e,t){return e===(4!==n.type||t?n.value:yA)}function s2(n,e,t){let r=4;const i=n.attrs||[],s=function u2(n){for(let e=0;e<n.length;e++)if(Ol(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!i2(n,u,t)||""===u&&1===e.length){if(Is(r))return!1;o=!0}}else{const h=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!r2(n.attrs,h,t)){if(Is(r))return!1;o=!0}continue}const m=o2(8&r?"class":u,i,vA(n),t);if(-1===m){if(Is(r))return!1;o=!0;continue}if(""!==h){let y;y=m>s?"":i[m+1].toLowerCase();const D=8&r?y:null;if(D&&-1!==_A(D,h,0)||2&r&&h!==y){if(Is(r))return!1;o=!0}}}}else{if(!o&&!Is(r)&&!Is(u))return!1;if(o&&Is(u))continue;o=!1,r=u|1&r}}return Is(r)||o}function Is(n){return 0==(1&n)}function o2(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function l2(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function IA(n,e,t=!1){for(let r=0;r<e.length;r++)if(s2(n,e[r],t))return!0;return!1}function EA(n,e){return n?":not("+e.trim()+")":e}function d2(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Is(o)&&(e+=EA(s,i),i=""),r=o,s=s||!Is(r);t++}return""!==i&&(e+=EA(s,i)),e}const lt={};function li(n){wA(St(),he(),fr()+n,!1)}function wA(n,e,t,r){if(!r)if(3==(3&e[Ze])){const s=n.preOrderCheckHooks;null!==s&&Nl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&vo(e,s,0,t)}Us(t)}function AA(n,e=null,t=null,r){const i=bA(n,e,t,r);return i.resolveInjectorInitializers(),i}function bA(n,e=null,t=null,r,i=new Set){const s=[t||Nt,ML(n)];return r=r||("object"==typeof n?void 0:me(n)),new cA(s,e||jg(),r||null,i)}let Gs=(()=>{class n{static create(t,r){if(Array.isArray(t))return AA({name:""},r,t,"");{const i=t.name??"";return AA({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=co,n.NULL=new sA,n.\u0275prov=He({token:n,providedIn:"any",factory:()=>ve(rA)}),n.__NG_ELEMENT_ID__=-1,n})();function ge(n,e=Qe.Default){const t=he();return null===t?ve(n,e):Bl(qn(),t,Ae(n),e)}function kA(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Sl(t[r]),o.contentQueries(2,e[s],s)}}}function Hg(n,e,t,r,i,s,o,a,u,h,p){const m=e.blueprint.slice();return m[Yi]=i,m[Ze]=76|r,(null!==p||n&&1024&n[Ze])&&(m[Ze]|=1024),Jy(m),m[pn]=m[fo]=n,m[Tn]=t,m[ta]=o||n&&n[ta],m[ut]=a||n&&n[ut],m[ru]=u||n&&n[ru]||null,m[yl]=h||n&&n[yl]||null,m[Gn]=s,m[po]=function Ch(){return Vv++}(),m[$d]=p,m[tr]=2==e.type?n[tr]:m,m}function uc(n,e,t,r,i){let s=n.data[e];if(null===s)s=function vI(n,e,t,r,i){const s=rg(),o=Qd(),u=n.data[e]=function F2(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function kn(){return at.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Ls(){const n=at.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Li(s,!0),s}function Nh(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function II(n,e,t){Rl(e);try{const r=n.viewQuery;null!==r&&RI(1,r,t);const i=n.template;null!==i&&VA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&kA(n,e),n.staticViewQueries&&RI(2,n.viewQuery,t);const s=n.components;null!==s&&function O2(n,e){for(let t=0;t<e.length;t++)rU(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ze]&=-5,Ml()}}function Gg(n,e,t,r){const i=e[Ze];if(128!=(128&i)){Rl(e);try{Jy(e),function ig(n){return at.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&VA(n,e,t,2,r);const o=3==(3&i);if(o){const h=n.preOrderCheckHooks;null!==h&&Nl(e,h,null)}else{const h=n.preOrderHooks;null!==h&&vo(e,h,0,null),th(e,0)}if(function tU(n){for(let e=$v(n);null!==e;e=Hv(e)){if(!e[$p])continue;const t=e[Fs];for(let r=0;r<t.length;r++){const i=t[r];512&i[Ze]||eg(i[pn],1),i[Ze]|=512}}}(e),function eU(n){for(let e=$v(n);null!==e;e=Hv(e))for(let t=zn;t<e.length;t++){const r=e[t],i=r[Se];Al(r)&&Gg(i,r,i.template,r[Tn])}}(e),null!==n.contentQueries&&kA(n,e),o){const h=n.contentCheckHooks;null!==h&&Nl(e,h)}else{const h=n.contentHooks;null!==h&&vo(e,h,1),th(e,1)}!function x2(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Us(~i);else{const s=i,o=t[++r],a=t[++r];Jd(o,s),a(2,e[s])}}}finally{Us(-1)}}(n,e);const a=n.components;null!==a&&function N2(n,e){for(let t=0;t<e.length;t++)nU(n,e[t])}(e,a);const u=n.viewQuery;if(null!==u&&RI(2,u,r),o){const h=n.viewCheckHooks;null!==h&&Nl(e,h)}else{const h=n.viewHooks;null!==h&&vo(e,h,2),th(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ze]&=-41,512&e[Ze]&&(e[Ze]&=-513,eg(e[pn],-1))}finally{Ml()}}}function VA(n,e,t,r,i){const s=fr(),o=2&r;try{Us(-1),o&&e.length>Zt&&wA(n,e,Zt,!1),wi(o?2:0,i),t(r,i)}finally{Us(s),wi(o?3:1,i)}}function EI(n,e,t){if(su(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function wI(n,e,t){tg()&&(function G2(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;go(t)&&function Y2(n,e,t){const r=oi(e,n),i=FA(t),s=n[ta],o=zg(n,Hg(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=o}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||hu(t,e),Hr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],h=wo(e,n,a,t);Hr(h,e),null!==o&&J2(0,a-i,h,u,0,o),si(u)&&(ai(t.index,e)[Tn]=wo(e,n,a,t))}}(n,e,t,oi(t,e)),64==(64&t.flags)&&$A(n,e,t))}function TI(n,e,t=oi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function FA(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=DI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function DI(n,e,t,r,i,s,o,a,u,h){const p=Zt+r,m=p+i,y=function k2(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:lt);return t}(p,m),D="function"==typeof h?h():h;return y[Se]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1}}function UA(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?BA(t,e,i,s):r.hasOwnProperty(i)&&BA(t,e,r[i],s)}return t}function BA(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function CI(n,e,t,r){if(tg()){const i=null===r?null:{"":-1},s=function q2(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(IA(e,o.selectors,!1))if(r||(r=[]),si(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),AI(n,e,a.length)}else r.unshift(o),AI(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&jA(n,e,t,o,i,a),i&&function W2(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new _e(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Io(t.mergedAttrs,t.attrs)}function jA(n,e,t,r,i,s){for(let h=0;h<r.length;h++)ah(hu(t,e),n,r[h].type);!function Z2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let h=0;h<r.length;h++){const p=r[h];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,u=Nh(n,e,r.length,null);for(let h=0;h<r.length;h++){const p=r[h];t.mergedAttrs=Io(t.mergedAttrs,p.hostAttrs),Q2(n,t,e,u,p),K2(u,p,i),null!==p.contentQueries&&(t.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=64);const m=p.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),a=!0),u++}!function L2(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,h=null;for(let p=e.directiveStart;p<i;p++){const m=s[p],y=t?t.get(m):null,b=y?y.outputs:null;u=UA(m.inputs,p,u,y?y.inputs:null),h=UA(m.outputs,p,h,b);const N=null===u||null===o||vA(e)?null:X2(u,p,o);a.push(N)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=h}(n,t,s)}function $A(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function iv(){return at.lFrame.currentDirectiveIndex}();try{Us(s);for(let a=r;a<i;a++){const u=n.data[a],h=e[a];au(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&z2(u,h)}}finally{Us(-1),au(o)}}function z2(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function AI(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function K2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;si(e)&&(t[""]=n)}}function Q2(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ms(i.type)),o=new cu(s,si(i),ge);n.blueprint[r]=o,t[r]=o,function $2(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function H2(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Nh(n,t,i.hostVars,lt),i)}function zs(n,e,t,r,i,s){const o=oi(n,e);!function bI(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Xe(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[ut],o,s,n.value,t,r,i)}function J2(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const h=o[u++],p=o[u++],m=o[u++];null!==a?r.setInput(t,m,h,p):t[p]=m}}}function X2(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function HA(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function nU(n,e){const t=ai(e,n);if(Al(t)){const r=t[Se];48&t[Ze]?Gg(r,t,r.template,t[Tn]):t[gs]>0&&SI(t)}}function SI(n){for(let r=$v(n);null!==r;r=Hv(r))for(let i=zn;i<r.length;i++){const s=r[i];if(Al(s))if(512&s[Ze]){const o=s[Se];Gg(o,s,o.template,s[Tn])}else s[gs]>0&&SI(s)}const t=n[Se].components;if(null!==t)for(let r=0;r<t.length;r++){const i=ai(t[r],n);Al(i)&&i[gs]>0&&SI(i)}}function rU(n,e){const t=ai(e,n),r=t[Se];(function iU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),II(r,t,t[Tn])}function zg(n,e){return n[ks]?n[vl][Fi]=e:n[ks]=e,n[vl]=e,e}function qg(n){for(;n;){n[Ze]|=32;const e=bh(n);if($y(n)&&!e)return n;n=e}return null}function Wg(n,e,t,r=!0){const i=e[ta];i.begin&&i.begin();try{Gg(n,e,n.template,t)}catch(o){throw r&&WA(e,o),o}finally{i.end&&i.end()}}function RI(n,e,t){Sl(0),e(n,t)}function GA(n){return n[ho]||(n[ho]=[])}function zA(n){return n.cleanup||(n.cleanup=[])}function WA(n,e){const t=n[yl],r=t?t.get(sc,null):null;r&&r.handleError(e)}function PI(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],u=e[o],h=n.data[o];null!==h.setInput?h.setInput(u,i,r,a):u[a]=i}}function Kg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=je(i,a):2==s&&(r=je(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Zg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(dr(s)),Br(s))for(let a=zn;a<s.length;a++){const u=s[a],h=u[Se].firstChild;null!==h&&Zg(u[Se],u,h,r)}const o=t.type;if(8&o)Zg(n,e,t.child,r);else if(32&o){const a=jv(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=U0(e,t);if(Array.isArray(a))r.push(...a);else{const u=bh(e[tr]);Zg(u[Se],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Oh{get rootNodes(){const e=this._lView,t=e[Se];return Zg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tn]}set context(e){this._lView[Tn]=e}get destroyed(){return 128==(128&this._lView[Ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[pn];if(Br(e)){const t=e[Il],r=t?t.indexOf(this):-1;r>-1&&(qv(e,r),zl(t,r))}this._attachedToViewContainer=!1}P0(this._lView[Se],this._lView)}onDestroy(e){!function LA(n,e,t,r){const i=GA(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&zA(n).push(r,i.length-1))}(this._lView[Se],this._lView,null,e)}markForCheck(){qg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ze]&=-65}reattach(){this._lView[Ze]|=64}detectChanges(){Wg(this._lView[Se],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function WF(n,e){Sh(n,e,e[ut],2,null,null)}(this._lView[Se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=e}}class sU extends Oh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Wg(e[Se],e,e[Tn],!1)}checkNoChanges(){}get context(){return null}}class KA extends xh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=jt(e);return new kh(t,this.ngModule)}}function ZA(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class aU{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=pl(r);const i=this.injector.get(e,hI,r);return i!==hI||t===hI?i:this.parentInjector.get(e,t,r)}}class kh extends hA{get inputs(){return ZA(this.componentDef.inputs)}get outputs(){return ZA(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function h2(n){return n.map(d2).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof bo?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new aU(e,s):e,a=o.get(pA,null);if(null===a)throw new _e(407,!1);const u=o.get(qL,null),h=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?function V2(n,e,t){return n.selectRootElement(e,t===Hn.ShadowDom)}(h,r,this.componentDef.encapsulation):zv(h,p,function oU(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(p)),y=this.componentDef.onPush?288:272,D=DI(0,null,null,1,0,null,null,null,null,null),b=Hg(null,D,null,y,null,null,a,h,u,o,null);let N,O;Rl(b);try{const z=this.componentDef;let te,L=null;z.findHostDirectiveDefs?(te=[],L=new Map,z.findHostDirectiveDefs(z,te,L),te.push(z)):te=[z];const le=function lU(n,e){const t=n[Se],r=Zt;return n[r]=e,uc(t,r,2,"#host",null)}(b,m),Ce=function cU(n,e,t,r,i,s,o,a){const u=i[Se];!function dU(n,e,t,r){for(const i of n)e.mergedAttrs=Io(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Kg(e,e.mergedAttrs,!0),null!==t&&$0(r,t,e))}(r,n,e,o);const h=s.createRenderer(e,t),p=Hg(i,FA(t),null,t.onPush?32:16,i[n.index],n,s,h,a||null,null,null);return u.firstCreatePass&&AI(u,n,r.length-1),zg(i,p),i[n.index]=p}(le,m,z,te,b,a,h);O=Qy(D,Zt),m&&function fU(n,e,t,r){if(r)rh(n,t,["ng-version",gA.full]);else{const{attrs:i,classes:s}=function f2(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Is(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&rh(n,t,i),s&&s.length>0&&j0(n,t,s.join(" "))}}(h,z,m,r),void 0!==t&&function pU(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(O,this.ngContentSelectors,t),N=function hU(n,e,t,r,i,s){const o=qn(),a=i[Se],u=oi(o,i);jA(a,i,o,t,null,r);for(let p=0;p<t.length;p++)Hr(wo(i,a,o.directiveStart+p,o),i);$A(a,i,o),u&&Hr(u,i);const h=wo(i,a,o.directiveStart+o.componentOffset,o);if(n[Tn]=i[Tn]=h,null!==s)for(const p of s)p(h,e);return EI(a,o,n),h}(Ce,z,te,L,b,[gU]),II(D,b,null)}finally{Ml()}return new uU(this.componentType,N,rc(O,b),b,O)}}class uU extends BL{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new sU(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;PI(s[Se],s,i,e,t),qg(ai(this._tNode.index,s))}}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function gU(){const n=qn();xl(he()[Se],n)}function Qt(n){let e=function QA(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(si(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new _e(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=MI(n.inputs),o.declaredInputs=MI(n.declaredInputs),o.outputs=MI(n.outputs);const a=i.hostBindings;a&&vU(n,a);const u=i.viewQuery,h=i.contentQueries;if(u&&_U(n,u),h&&yU(n,h),oe(n.inputs,i.inputs),oe(n.declaredInputs,i.declaredInputs),oe(n.outputs,i.outputs),si(i)&&i.data.animation){const p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Qt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function mU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Io(i.hostAttrs,t=Io(t,i.hostAttrs))}}(r)}function MI(n){return n===fs?{}:n===Nt?[]:n}function _U(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function yU(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function vU(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function Qg(n){return!!function xI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Gr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ws(n,e,t,r){const i=he();return Gr(i,Ji(),e)&&(St(),zs(gn(),i,n,e,t,r)),Ws}function ts(n,e,t){const r=he();return Gr(r,Ji(),e)&&function Bi(n,e,t,r,i,s,o,a){const u=oi(e,t);let p,h=e.inputs;!a&&null!=h&&(p=h[r])?(PI(n,t,p,r,i),go(e)&&function B2(n,e){const t=ai(e,n);16&t[Ze]||(t[Ze]|=32)}(t,e.index)):3&e.type&&(r=function U2(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(St(),gn(),r,n,e,r[ut],t,!1),ts}function NI(n,e,t,r,i){const o=i?"class":"style";PI(n,t,e.inputs[o],o,r)}function ze(n,e,t,r){const i=he(),s=St(),o=Zt+n,a=i[ut],u=s.firstCreatePass?function xU(n,e,t,r,i,s){const o=e.consts,u=uc(e,n,2,r,_o(o,i));return CI(e,t,u,_o(o,s)),null!==u.attrs&&Kg(u,u.attrs,!1),null!==u.mergedAttrs&&Kg(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],h=i[o]=zv(a,e,function lv(){return at.lFrame.currentNamespace}()),p=El(u);return Li(u,!0),$0(a,h,u),32!=(32&u.flags)&&Og(s,i,h,u),0===function Kd(){return at.lFrame.elementDepthCount}()&&Hr(h,i),function yo(){at.lFrame.elementDepthCount++}(),p&&(wI(s,i,u),EI(s,u,i)),null!==r&&TI(i,u),ze}function qe(){let n=qn();Qd()?function Yd(){at.lFrame.isParent=!1}():(n=n.parent,Li(n,!1));const e=n;!function Zd(){at.lFrame.elementDepthCount--}();const t=St();return t.firstCreatePass&&(xl(t,n),su(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function pv(n){return 0!=(8&n.flags)}(e)&&NI(t,e,he(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function gv(n){return 0!=(16&n.flags)}(e)&&NI(t,e,he(),e.stylesWithoutHost,!1),qe}function zr(n,e,t,r){return ze(n,e,t,r),qe(),zr}function Fh(n){return!!n&&"function"==typeof n.then}const VI=function hb(n){return!!n&&"function"==typeof n.subscribe};function Xt(n,e,t,r){const i=he(),s=St(),o=qn();return function pb(n,e,t,r,i,s,o){const a=El(r),h=n.firstCreatePass&&zA(n),p=e[Tn],m=GA(e);let y=!0;if(3&r.type||o){const N=oi(r,e),O=o?o(N):N,z=m.length,te=o?le=>o(dr(le[r.index])):r.index;let L=null;if(!o&&a&&(L=function OU(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ho],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==L)(L.__ngLastListenerFn__||L).__ngNextListenerFn__=s,L.__ngLastListenerFn__=s,y=!1;else{s=mb(r,e,p,s,!1);const le=t.listen(O,i,s);m.push(s,le),h&&h.push(i,te,z,z+1)}}else s=mb(r,e,p,s,!1);const D=r.outputs;let b;if(y&&null!==D&&(b=D[i])){const N=b.length;if(N)for(let O=0;O<N;O+=2){const Ce=e[b[O]][b[O+1]].subscribe(s),Ve=m.length;m.push(s,Ce),h&&h.push(i,r.index,Ve,-(Ve+1))}}}(s,i,i[ut],o,n,e,r),Xt}function gb(n,e,t,r){try{return wi(6,e,t),!1!==t(r)}catch(i){return WA(n,i),!1}finally{wi(7,e,t)}}function mb(n,e,t,r,i){return function s(o){if(o===Function)return r;qg(n.componentOffset>-1?ai(n.index,e):e);let u=gb(e,t,r,o),h=s.__ngNextListenerFn__;for(;h;)u=gb(e,t,h,o)&&u,h=h.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function _b(n=1){return function eh(n){return(at.lFrame.contextLView=function ov(n,e){for(;n>0;)e=e[fo],n--;return e}(n,at.lFrame.contextLView))[Tn]}(n)}function Jg(n,e){return n<<17|e<<2}function ga(n){return n>>17&32767}function LI(n){return 2|n}function Eu(n){return(131068&n)>>2}function UI(n,e){return-131069&n|e<<2}function BI(n){return 1|n}function bb(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?ga(s):Eu(s),u=!1;for(;0!==a&&(!1===u||o);){const p=n[a+1];HU(n[a],e)&&(u=!0,n[a+1]=r?BI(p):LI(p)),a=r?ga(p):Eu(p)}u&&(n[t+1]=r?LI(s):BI(s))}function HU(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ca(n,e)>=0}function Xg(n,e){return function Es(n,e,t,r){const i=he(),s=St(),o=function ys(n){const e=at.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function Vb(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[fr()],o=function kb(n,e){return e>=n.expandoStartIndex}(n,t);(function Bb(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function JU(n,e,t,r){const i=function Xd(n){const e=at.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Lh(t=jI(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=jI(i,n,e,t,r),null===s){let u=function XU(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Eu(r))return n[ga(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=jI(null,n,e,u[1],r),u=Lh(u,e.attrs,r),function eB(n,e,t,r){n[ga(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function tB(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Lh(r,n[s].hostAttrs,t);return Lh(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function jU(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ga(o),u=Eu(o);n[r]=t;let p,h=!1;if(Array.isArray(t)?(p=t[1],(null===p||ca(t,p)>0)&&(h=!0)):p=t,i)if(0!==u){const y=ga(n[a+1]);n[r+1]=Jg(y,a),0!==y&&(n[y+1]=UI(n[y+1],r)),n[a+1]=function UU(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Jg(a,0),0!==a&&(n[a+1]=UI(n[a+1],r)),a=r;else n[r+1]=Jg(u,0),0===a?a=r:n[u+1]=UI(n[u+1],r),u=r;h&&(n[r+1]=LI(n[r+1])),bb(n,p,r,!0),bb(n,p,r,!1),function $U(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ca(s,e)>=0&&(t[r+1]=BI(t[r+1]))}(e,p,n,r,s),o=Jg(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==lt&&Gr(i,o,e)&&function Lb(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,h=u[a+1],p=function BU(n){return 1==(1&n)}(h)?Ub(u,e,t,i,Eu(h),o):void 0;em(p)||(em(s)||function LU(n){return 2==(2&n)}(h)&&(s=Ub(u,null,t,i,a,o)),function rL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:br.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=br.Important),n.setStyle(t,r,i,s))}}(r,o,Cl(fr(),t),i,s))}(s,s.data[fr()],i,i[ut],n,i[o+1]=function sB(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=me(pa(n)))),n}(e,t),r,o)}(n,e,null,!0),Xg}function jI(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Lh(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Lh(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ui(n,o,!!t||e[++s]))}return void 0===n?null:n}function Ub(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],h=Array.isArray(u),p=h?u[1]:u,m=null===p;let y=t[i+1];y===lt&&(y=m?Nt:void 0);let D=m?gh(y,r):p===r?y:void 0;if(h&&!em(D)&&(D=gh(u,r)),em(D)&&(a=D,o))return a;const b=n[i+1];i=o?ga(b):Eu(b)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=gh(u,r))}return a}function em(n){return void 0!==n}function It(n,e=""){const t=he(),r=St(),i=n+Zt,s=r.firstCreatePass?uc(r,i,1,e,null):r.data[i],o=t[i]=function Gv(n,e){return n.createText(e)}(t[ut],e);Og(r,t,o,s),Li(s,!1)}function vc(n){return $I("",n,""),vc}function $I(n,e,t){const r=he(),i=function cc(n,e,t,r){return Gr(n,Ji(),t)?e+Xe(t)+r:lt}(r,n,e,t);return i!==lt&&function Po(n,e,t){const r=Cl(e,n);!function S0(n,e,t){n.setValue(e,t)}(n[ut],r,t)}(r,fr(),i),$I}const Ec="en-US";let uS=Ec;function zI(n,e,t,r,i){if(n=Ae(n),Array.isArray(n))for(let s=0;s<n.length;s++)zI(n[s],e,t,r,i);else{const s=St(),o=he();let a=vu(n)?n:Ae(n.provide),u=dA(n);const h=qn(),p=1048575&h.providerIndexes,m=h.directiveStart,y=h.providerIndexes>>20;if(vu(n)||!n.multi){const D=new cu(u,i,ge),b=WI(a,e,i?p:p+y,m);-1===b?(ah(hu(h,o),s,a),qI(s,n,e.length),e.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(D),o.push(D)):(t[b]=D,o[b]=D)}else{const D=WI(a,e,p+y,m),b=WI(a,e,p,p+y),O=b>=0&&t[b];if(i&&!O||!i&&!(D>=0&&t[D])){ah(hu(h,o),s,a);const z=function Tj(n,e,t,r,i){const s=new cu(n,t,ge);return s.multi=[],s.index=e,s.componentProviders=0,NS(s,i,r&&!t),s}(i?wj:Ej,t.length,i,r,u);!i&&O&&(t[b].providerFactory=z),qI(s,n,e.length,0),e.push(a),h.directiveStart++,h.directiveEnd++,i&&(h.providerIndexes+=1048576),t.push(z),o.push(z)}else qI(s,n,D>-1?D:b,NS(t[i?b:D],u,!i&&r));!i&&r&&O&&t[b].componentProviders++}}}function qI(n,e,t,r){const i=vu(e),s=function NL(n){return!!n.useClass}(e);if(i||s){const u=(s?Ae(e.useClass):e).prototype.ngOnDestroy;if(u){const h=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const p=h.indexOf(t);-1===p?h.push(t,[r,u]):h[p+1].push(r,u)}else h.push(t,u)}}}function NS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function WI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Ej(n,e,t,r){return KI(this.multi,[])}function wj(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=wo(t,t[Se],this.providerFactory.index,r);s=a.slice(0,o),KI(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],KI(i,s);return s}function KI(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Dn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Ij(n,e,t){const r=St();if(r.firstCreatePass){const i=si(n);zI(t,r.data,r.blueprint,i,!0),zI(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class wc{}class OS{}class kS extends wc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new KA(this);const r=er(e);this._bootstrapComponents=Ro(r.bootstrap),this._r3Injector=bA(e,t,[{provide:wc,useValue:this},{provide:xh,useValue:this.componentFactoryResolver}],me(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ZI extends OS{constructor(e){super(),this.moduleType=e}create(e){return new kS(this.moduleType,e)}}class Cj extends wc{constructor(e,t,r){super(),this.componentFactoryResolver=new KA(this),this.instance=null;const i=new cA([...e,{provide:wc,useValue:this},{provide:xh,useValue:this.componentFactoryResolver}],t||jg(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function sm(n,e,t=null){return new Cj(n,e,t).injector}let Aj=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=oA(0,t.type),i=r.length>0?sm([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=He({token:n,providedIn:"environment",factory:()=>new n(ve(bo))}),n})();function VS(n){n.getStandaloneInjector=e=>e.get(Aj).getOrCreateStandaloneInjector(n)}function YI(n){return e=>{setTimeout(n,void 0,e)}}const Fn=class Jj extends ee{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=YI(s),i&&(i=YI(i)),o&&(o=YI(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ot&&e.add(a),a}};let Mo=(()=>{class n{}return n.__NG_ELEMENT_ID__=n$,n})();const e$=Mo,t$=class extends e${constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tView,i=Hg(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[na]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[ii];return null!==o&&(i[ii]=o.createEmbeddedView(r)),II(r,i,e),new Oh(i)}};function n$(){return function om(n,e){return 4&n.type?new t$(e,n,rc(n,e)):null}(qn(),he())}let Ts=(()=>{class n{}return n.__NG_ELEMENT_ID__=r$,n})();function r$(){return function QS(n,e){let t;const r=e[n.index];if(Br(r))t=r;else{let i;if(8&n.type)i=dr(r);else{const s=e[ut];i=s.createComment("");const o=oi(n,e);yu(s,Ng(s,o),i,function eL(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=HA(r,e,i,n),zg(e,t)}return new KS(t,n,e)}(qn(),he())}const i$=Ts,KS=class extends i${constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return rc(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const e=fu(this._hostTNode,this._hostLView);if(kl(e)){const t=Vl(e,this._hostLView),r=Eo(e);return new oa(t[Se].data[r+8],t)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=ZS(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-zn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,i),o}createComponent(e,t,r,i,s){const o=e&&!function mu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const m=t||{};a=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}const u=o?e:new kh(jt(e)),h=r||this.parentInjector;if(!s&&null==u.ngModule){const y=(o?h:this.parentInjector).get(bo,null);y&&(s=y)}const p=u.create(h,i,void 0,s);return this.insert(p.hostView,a),p}insert(e,t){const r=e._lView,i=r[Se];if(function Yy(n){return Br(n[pn])}(r)){const p=this.indexOf(e);if(-1!==p)this.detach(p);else{const m=r[pn],y=new KS(m,m[Gn],m[pn]);y.detach(y.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function ZF(n,e,t,r){const i=zn+r,s=t.length;r>0&&(t[i-1][Fi]=e),r<s-zn?(e[Fi]=t[i],ph(t,zn+r,e)):(t.push(e),e[Fi]=null),e[pn]=t;const o=e[na];null!==o&&t!==o&&function QF(n,e){const t=n[Fs];e[tr]!==e[pn][pn][tr]&&(n[$p]=!0),null===t?n[Fs]=[e]:t.push(e)}(o,e);const a=e[ii];null!==a&&a.insertView(n),e[Ze]|=64}(i,r,o,s);const a=Zv(s,o),u=r[ut],h=Ng(u,o[ra]);return null!==h&&function qF(n,e,t,r,i,s){r[Yi]=i,r[Gn]=e,Sh(n,r,t,1,i,s)}(i,o[Gn],u,r,h,a),e.attachToViewContainerRef(),ph(XI(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=ZS(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=qv(this._lContainer,t);r&&(zl(XI(this._lContainer),t),P0(r[Se],r))}detach(e){const t=this._adjustIndex(e,-1),r=qv(this._lContainer,t);return r&&null!=zl(XI(this._lContainer),t)?new Oh(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ZS(n){return n[Il]}function XI(n){return n[Il]||(n[Il]=[])}function um(...n){}const lm=new Me("Application Initializer");let cm=(()=>{class n{constructor(t){this.appInits=t,this.resolve=um,this.reject=um,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Fh(s))t.push(s);else if(VI(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ve(lm,8))},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wh=new Me("AppId",{providedIn:"root",factory:function wR(){return`${cE()}${cE()}${cE()}`}});function cE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const TR=new Me("Platform Initializer"),Kh=new Me("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let x$=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const xo=new Me("LocaleId",{providedIn:"root",factory:()=>mt(xo,Qe.Optional|Qe.SkipSelf)||function N$(){return typeof $localize<"u"&&$localize.locale||Ec}()});class k${constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let DR=(()=>{class n{compileModuleSync(t){return new ZI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ro(er(t).declarations).reduce((o,a)=>{const u=jt(a);return u&&o.push(new kh(u)),o},[]);return new k$(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const L$=(()=>Promise.resolve(0))();function dE(n){typeof Zone>"u"?L$.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class mn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fn(!1),this.onMicrotaskEmpty=new Fn(!1),this.onStable=new Fn(!1),this.onError=new Fn(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function U$(){let n=Kt.requestAnimationFrame,e=Kt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function $$(n){const e=()=>{!function j$(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Kt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,fE(n),n.isCheckStableRunning=!0,hE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),fE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return bR(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),SR(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return bR(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),SR(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,fE(n),hE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mn.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(mn.isInAngularZone())throw new _e(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,B$,um,um);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const B$={};function hE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function fE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SR(n){n._nesting--,hE(n)}class H${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fn,this.onMicrotaskEmpty=new Fn,this.onStable=new Fn,this.onError=new Fn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const RR=new Me(""),dm=new Me("");let mE,pE=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mE||(function G$(n){mE=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mn.assertNotInAngularZone(),dE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(ve(mn),ve(gE),ve(dm))},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})(),gE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return mE?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const No=!1;let ma=null;const PR=new Me("AllowMultipleToken"),_E=new Me("PlatformDestroyListeners"),MR=new Me("appBootstrapListener");class xR{constructor(e,t){this.name=e,this.token=t}}function OR(n,e,t=[]){const r=`Platform: ${e}`,i=new Me(r);return(s=[])=>{let o=yE();if(!o||o.injector.get(PR,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function W$(n){if(ma&&!ma.get(PR,!1))throw new _e(400,!1);ma=n;const e=n.get(VR);(function NR(n){const e=n.get(TR,null);e&&e.forEach(t=>t())})(n)}(function kR(n=[],e){return Gs.create({name:e,providers:[{provide:uI,useValue:"platform"},{provide:_E,useValue:new Set([()=>ma=null])},...n]})}(a,r))}return function Z$(n){const e=yE();if(!e)throw new _e(401,!1);return e}()}}function yE(){return ma?.get(VR)??null}let VR=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function LR(n,e){let t;return t="noop"===n?new H$:("zone.js"===n?void 0:n)||new mn(e),t}(r?.ngZone,function FR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:mn,useValue:i}];return i.run(()=>{const o=Gs.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),u=a.injector.get(sc,null);if(!u)throw new _e(402,!1);return i.runOutsideAngular(()=>{const h=i.onError.subscribe({next:p=>{u.handleError(p)}});a.onDestroy(()=>{fm(this._modules,a),h.unsubscribe()})}),function UR(n,e,t){try{const r=t();return Fh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,i,()=>{const h=a.injector.get(cm);return h.runInitializers(),h.donePromise.then(()=>(function lS(n){Ei(n,"Expected localeId to be defined"),"string"==typeof n&&(uS=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(xo,Ec)||Ec),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=BR({},r);return function z$(n,e,t){const r=new ZI(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(hm);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new _e(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(_E,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ve(Gs))},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function BR(n,e){return Array.isArray(e)?e.reduce(BR,n):{...n,...e}}let hm=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new ct(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new ct(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{mn.assertNotInAngularZone(),dE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),h.unsubscribe()}});this.isStable=E(s,o.pipe(w()))}bootstrap(t,r){const i=t instanceof hA;if(!this._injector.get(cm).done){!i&&function ea(n){const e=jt(n)||yr(n)||Ur(n);return null!==e&&e.standalone}(t);throw new _e(405,No)}let o;o=i?t:this._injector.get(xh).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function q$(n){return n.isBoundToModule}(o)?void 0:this._injector.get(wc),h=o.create(Gs.NULL,[],r||o.selector,a),p=h.location.nativeElement,m=h.injector.get(RR,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),fm(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;fm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(MR,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>fm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _e(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(ve(mn),ve(bo),ve(sc))},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let pm=(()=>{class n{}return n.__NG_ELEMENT_ID__=Y$,n})();function Y$(n){return function J$(n,e,t){if(go(n)&&!t){const r=ai(n.index,e);return new Oh(r,r)}return 47&n.type?new Oh(e[tr],e):null}(qn(),he(),16==(16&n))}class qR{constructor(){}supports(e){return Qg(e)}create(e){return new iH(e)}}const rH=(n,e)=>e;class iH{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||rH}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<KR(r,i,s)?t:r,a=KR(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const h=a-i,p=u-i;if(h!=p){for(let y=0;y<h;y++){const D=y<s.length?s[y]:s[y]=0,b=D+y;p<=b&&b<h&&(s[y]=D+1)}s[o.previousIndex]=p-h}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Qg(e))throw new _e(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function AU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new sH(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new WR),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WR),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class sH{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oH{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class WR{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new oH,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function KR(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function QR(){return new _m([new qR])}let _m=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||QR()),deps:[[n,new Do,new da]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new _e(901,!1)}}return n.\u0275prov=He({token:n,providedIn:"root",factory:QR}),n})();const dH=OR(null,"core",[]);let hH=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ve(hm))},n.\u0275mod=Vi({type:n}),n.\u0275inj=Cr({}),n})();function Cc(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let TE=null;function Oo(){return TE}class gH{}const Ci=new Me("DocumentToken");let DE=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:function(){return function mH(){return ve(JR)}()},providedIn:"platform"}),n})();const _H=new Me("Location Initialized");let JR=(()=>{class n extends DE{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Oo().getBaseHref(this._doc)}onPopState(t){const r=Oo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Oo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){XR()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){XR()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ve(Ci))},n.\u0275prov=He({token:n,factory:function(){return function yH(){return new JR(ve(Ci))}()},providedIn:"platform"}),n})();function XR(){return!!window.history.pushState}function CE(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function eP(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ko(n){return n&&"?"!==n[0]?"?"+n:n}let Du=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:function(){return mt(nP)},providedIn:"root"}),n})();const tP=new Me("appBaseHref");let nP=(()=>{class n extends Du{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??mt(Ci).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return CE(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ko(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+ko(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+ko(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ve(DE),ve(tP,8))},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vH=(()=>{class n extends Du{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=CE(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ko(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ko(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(ve(DE),ve(tP,8))},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})(),AE=(()=>{class n{constructor(t){this._subject=new Fn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function wH(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(eP(rP(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ko(r))}normalize(t){return n.stripTrailingSlash(function EH(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,rP(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ko(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ko(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ko,n.joinWithSlash=CE,n.stripTrailingSlash=eP,n.\u0275fac=function(t){return new(t||n)(ve(Du))},n.\u0275prov=He({token:n,factory:function(){return function IH(){return new AE(ve(Du))}()},providedIn:"root"}),n})();function rP(n){return n.replace(/\/index.html$/,"")}class u4{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gP=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new u4(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),mP(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{mP(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(ge(Ts),ge(Mo),ge(_m))},n.\u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function mP(n,e){n.context.$implicit=e.item}let V4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vi({type:n}),n.\u0275inj=Cr({}),n})();const F4="server";function EP(n){return n===F4}let B4=(()=>{class n{}return n.\u0275prov=He({token:n,providedIn:"root",factory:()=>new j4(ve(Ci),window)}),n})();class j4{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $4(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=wP(this.window.history)||wP(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function wP(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class mG extends gH{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class HE extends mG{static makeCurrent(){!function pH(n){TE||(TE=n)}(new HE)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _G(){return Xh=Xh||document.querySelector("base"),Xh?Xh.getAttribute("href"):null}();return null==t?null:function yG(n){Rm=Rm||document.createElement("a"),Rm.setAttribute("href",n);const e=Rm.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Xh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function s4(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Rm,Xh=null;const bP=new Me("TRANSITION_ID"),IG=[{provide:lm,useFactory:function vG(n,e,t){return()=>{t.get(cm).donePromise.then(()=>{const r=Oo(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[bP,Ci,Gs],multi:!0}];let wG=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})();const Pm=new Me("EventManagerPlugins");let Mm=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ve(Pm),ve(mn))},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})();class SP{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Oo().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let RP=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})(),ef=(()=>{class n extends RP{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(ve(Ci))},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})();const GE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zE=/%COMP%/g,xP=new Me("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function NP(n,e){return e.flat(100).map(t=>t.replace(zE,n))}function OP(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let qE=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new WE(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof FP?i.applyToHost(t):i instanceof KE&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,u=this.removeStylesOnCompDestory;switch(r.encapsulation){case Hn.Emulated:s=new FP(o,a,r,this.appId,u);break;case Hn.ShadowDom:return new RG(o,a,t,r);default:s=new KE(o,a,r,u)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ve(Mm),ve(ef),ve(Wh),ve(xP))},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})();class WE{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(GE[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(VP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(VP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=GE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=GE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(br.DashCase|br.Important)?e.style.setProperty(t,r,i&br.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&br.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,OP(r)):this.eventManager.addEventListener(e,t,OP(r))}}function VP(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class RG extends WE{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=NP(i.id,i.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class KE extends WE{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=NP(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class FP extends KE{constructor(e,t,r,i,s){const o=i+"-"+r.id;super(e,t,r,s,o),this.contentAttr=function AG(n){return"_ngcontent-%COMP%".replace(zE,n)}(o),this.hostAttr=function bG(n){return"_nghost-%COMP%".replace(zE,n)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let PG=(()=>{class n extends SP{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(ve(Ci))},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})();const LP=["alt","control","meta","shift"],MG={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let NG=(()=>{class n extends SP{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oo().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),LP.forEach(h=>{const p=r.indexOf(h);p>-1&&(r.splice(p,1),o+=h+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=MG[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),LP.forEach(o=>{o!==i&&(0,xG[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ve(Ci))},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})();const FG=OR(dH,"browser",[{provide:Kh,useValue:"browser"},{provide:TR,useValue:function OG(){HE.makeCurrent()},multi:!0},{provide:Ci,useFactory:function VG(){return function uL(n){Xv=n}(document),document},deps:[]}]),jP=new Me(""),$P=[{provide:dm,useClass:class EG{addToWindow(e){Kt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Kt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kt.getAllAngularRootElements=()=>e.getAllRootElements(),Kt.frameworkStabilizers||(Kt.frameworkStabilizers=[]),Kt.frameworkStabilizers.push(r=>{const i=Kt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Oo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:RR,useClass:pE,deps:[mn,gE,dm]},{provide:pE,useClass:pE,deps:[mn,gE,dm]}],HP=[{provide:uI,useValue:"root"},{provide:sc,useFactory:function kG(){return new sc},deps:[]},{provide:Pm,useClass:PG,multi:!0,deps:[Ci,mn,Kh]},{provide:Pm,useClass:NG,multi:!0,deps:[Ci]},{provide:qE,useClass:qE,deps:[Mm,ef,Wh,xP]},{provide:pA,useExisting:qE},{provide:RP,useExisting:ef},{provide:ef,useClass:ef,deps:[Ci]},{provide:Mm,useClass:Mm,deps:[Pm,mn]},{provide:class H4{},useClass:wG,deps:[]},[]];let LG=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Wh,useValue:t.appId},{provide:bP,useExisting:Wh},IG]}}}return n.\u0275fac=function(t){return new(t||n)(ve(jP,12))},n.\u0275mod=Vi({type:n}),n.\u0275inj=Cr({providers:[...HP,...$P],imports:[V4,hH]}),n})(),GP=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(ve(Ci))},n.\u0275prov=He({token:n,factory:function(t){let r=null;return r=t?new t:function BG(){return new GP(ve(Ci))}(),r},providedIn:"root"}),n})();function Ge(...n){return T(n,xn(n))}typeof window<"u"&&window;class bs extends ee{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const xm=Ee(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:qG}=Array,{getPrototypeOf:WG,prototype:KG,keys:ZG}=Object;function WP(n){if(1===n.length){const e=n[0];if(qG(e))return{args:e,keys:null};if(function QG(n){return n&&"object"==typeof n&&WG(n)===KG}(e)){const t=ZG(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:YG}=Array;function KP(n){return be(e=>function JG(n,e){return YG(e)?n(...e):n(e)}(n,e))}function ZP(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function QP(...n){const e=xn(n),t=us(n),{args:r,keys:i}=WP(n);if(0===r.length)return T([],e);const s=new ct(function XG(n,e,t=dn){return r=>{YP(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)YP(e,()=>{const h=T(n[u],e);let p=!1;h.subscribe(Ie(r,m=>{s[u]=m,p||(p=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>ZP(i,o):dn));return t?s.pipe(KP(t)):s}function YP(n,e,t){n?an(t,n,e):e()}function YE(...n){return function ez(){return lr(1)}()(T(n,xn(n)))}function JP(n){return new ct(e=>{Ut(n()).subscribe(e)})}function tf(n,e){const t=S(n)?n:()=>n,r=i=>i.error(t());return new ct(e?i=>e.schedule(r,0,i):r)}function JE(){return J((n,e)=>{let t=null;n._refCount++;const r=Ie(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class XP extends ct{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,se(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ot;const t=this.getSubject();e.add(this.source.subscribe(Ie(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ot.EMPTY)}return e}refCount(){return JE()(this)}}function vr(n,e){return J((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Ie(r,u=>{i?.unsubscribe();let h=0;const p=s++;Ut(n(u,p)).subscribe(i=Ie(r,m=>r.next(e?e(u,m,p,h++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ac(n){return n<=0?()=>Mn:J((e,t)=>{let r=0;e.subscribe(Ie(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Nm(...n){const e=xn(n);return J((t,r)=>{(e?YE(n,t,e):YE(n,t)).subscribe(r)})}function Ss(n,e){return J((t,r)=>{let i=0;t.subscribe(Ie(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Om(n){return J((e,t)=>{let r=!1;e.subscribe(Ie(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function eM(n=tz){return J((e,t)=>{let r=!1;e.subscribe(Ie(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tz(){return new xm}function Fo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ss((i,s)=>n(i,s,r)):dn,Ac(1),t?Om(e):eM(()=>new xm))}function Cu(n,e){return S(e)?hn(n,e,1):hn(n,1)}function Sr(n,e,t){const r=S(n)||e||t?{next:n,error:e,complete:t}:n;return r?J((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ie(s,u=>{var h;null===(h=r.next)||void 0===h||h.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var h;a=!1,null===(h=r.error)||void 0===h||h.call(r,u),s.error(u)},()=>{var u,h;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(h=r.finalize)||void 0===h||h.call(r)}))}):dn}function ya(n){return J((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Ie(t,void 0,void 0,o=>{s=Ut(n(o,ya(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function nf(n,e){return J(function nz(n,e,t,r,i){return(s,o)=>{let a=t,u=e,h=0;s.subscribe(Ie(o,p=>{const m=h++;u=a?n(u,p,m):(a=!0,p),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function XE(n){return n<=0?()=>Mn:J((e,t)=>{let r=[];e.subscribe(Ie(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function tM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ss((i,s)=>n(i,s,r)):dn,XE(1),t?Om(e):eM(()=>new xm))}function ew(n){return J((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const dt="primary",rf=Symbol("RouteTitle");class sz{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bc(n){return new sz(n)}function oz(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!nM(n[i],e[i]))return!1;return!0}function nM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function rM(n){return Array.prototype.concat.apply([],n)}function iM(n){return n.length>0?n[n.length-1]:null}function Rr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function va(n){return VI(n)?n:Fh(n)?T(Promise.resolve(n)):Ge(n)}const km=!1,uz={exact:function aM(n,e,t){if(!Au(n.segments,e.segments)||!Vm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!aM(n.children[r],e.children[r],t))return!1;return!0},subset:uM},sM={exact:function lz(n,e){return Qs(n,e)},subset:function cz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nM(n[t],e[t]))},ignored:()=>!0};function oM(n,e,t){return uz[t.paths](n.root,e.root,t.matrixParams)&&sM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uM(n,e,t){return lM(n,e,e.segments,t)}function lM(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Au(i,t)||e.hasChildren()||!Vm(i,t,r))}if(n.segments.length===t.length){if(!Au(n.segments,t)||!Vm(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!uM(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Au(n.segments,i)&&Vm(n.segments,i,r)&&n.children[dt])&&lM(n.children[dt],e,s,r)}}function Vm(n,e,t){return e.every((r,i)=>sM[t](n[i].parameters,r.parameters))}class Ia{constructor(e=new Et([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bc(this.queryParams)),this._queryParamMap}toString(){return fz.serialize(this)}}class Et{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Rr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fm(this)}}class sf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bc(this.parameters)),this._parameterMap}toString(){return hM(this)}}function Au(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let af=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:function(){return new tw},providedIn:"root"}),n})();class tw{parse(e){const t=new wz(e);return new Ia(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${uf(e.root,!0)}`,r=function mz(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Lm(t)}=${Lm(i)}`).join("&"):`${Lm(t)}=${Lm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function pz(n){return encodeURI(n)}(e.fragment)}`:""}`}}const fz=new tw;function Fm(n){return n.segments.map(e=>hM(e)).join("/")}function uf(n,e){if(!n.hasChildren())return Fm(n);if(e){const t=n.children[dt]?uf(n.children[dt],!1):"",r=[];return Rr(n.children,(i,s)=>{s!==dt&&r.push(`${s}:${uf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function hz(n,e){let t=[];return Rr(n.children,(r,i)=>{i===dt&&(t=t.concat(e(r,i)))}),Rr(n.children,(r,i)=>{i!==dt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===dt?[uf(n.children[dt],!1)]:[`${i}:${uf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${Fm(n)}/${t[0]}`:`${Fm(n)}/(${t.join("//")})`}}function cM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lm(n){return cM(n).replace(/%3B/gi,";")}function nw(n){return cM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Um(n){return decodeURIComponent(n)}function dM(n){return Um(n.replace(/\+/g,"%20"))}function hM(n){return`${nw(n.path)}${function gz(n){return Object.keys(n).map(e=>`;${nw(e)}=${nw(n[e])}`).join("")}(n.parameters)}`}const _z=/^[^\/()?;=#]+/;function Bm(n){const e=n.match(_z);return e?e[0]:""}const yz=/^[^=?&#]+/,Iz=/^[^&#]+/;class wz{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dt]=new Et(e,t)),r}parseSegment(){const e=Bm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _e(4009,km);return this.capture(e),new sf(Um(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Bm(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Bm(this.remaining);i&&(r=i,this.capture(r))}e[Um(t)]=Um(r)}parseQueryParam(e){const t=function vz(n){const e=n.match(yz);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Ez(n){const e=n.match(Iz);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=dM(t),s=dM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Bm(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new _e(4010,km);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=dt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[dt]:new Et([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _e(4011,km)}}function rw(n){return n.segments.length>0?new Et([],{[dt]:n}):n}function jm(n){const e={};for(const r of Object.keys(n.children)){const s=jm(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Tz(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new Et(n.segments.concat(e.segments),e.children)}return n}(new Et(n.segments,e))}function bu(n){return n instanceof Ia}const iw=!1;function Dz(n,e,t,r,i){if(0===t.length)return Sc(e.root,e.root,e.root,r,i);const s=function _M(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mM(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Rr(s.outlets,(u,h)=>{a[h]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new mM(t,e,r)}(t);return s.toRoot()?Sc(e.root,e.root,new Et([],{}),r,i):function o(u){const h=function Az(n,e,t,r){if(n.isAbsolute)return new Rc(e.root,!0,0);if(-1===r)return new Rc(t,t===e.root,0);return function yM(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new _e(4005,iw&&"Invalid number of '../'");i=r.segments.length}return new Rc(r,!1,i-s)}(t,r+(lf(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,u),p=h.processChildren?Pc(h.segmentGroup,h.index,s.commands):sw(h.segmentGroup,h.index,s.commands);return Sc(e.root,h.segmentGroup,p,r,i)}(n.snapshot?._lastPathIndex)}function lf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function cf(n){return"object"==typeof n&&null!=n&&n.outlets}function Sc(n,e,t,r,i){let o,s={};r&&Rr(r,(u,h)=>{s[h]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`}),o=n===e?t:gM(n,e,t);const a=rw(jm(o));return new Ia(a,s,i)}function gM(n,e,t){const r={};return Rr(n.children,(i,s)=>{r[s]=i===e?t:gM(i,e,t)}),new Et(n.segments,r)}class mM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&lf(r[0]))throw new _e(4003,iw&&"Root segment cannot have matrix parameters");const i=r.find(cf);if(i&&i!==iM(r))throw new _e(4004,iw&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function sw(n,e,t){if(n||(n=new Et([],{})),0===n.segments.length&&n.hasChildren())return Pc(n,e,t);const r=function Sz(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(cf(a))break;const u=`${a}`,h=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&h&&"object"==typeof h&&void 0===h.outlets){if(!IM(u,h,o))return s;r+=2}else{if(!IM(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Et(n.segments.slice(0,r.pathIndex),{});return s.children[dt]=new Et(n.segments.slice(r.pathIndex),n.children),Pc(s,0,i)}return r.match&&0===i.length?new Et(n.segments,{}):r.match&&!n.hasChildren()?ow(n,e,t):r.match?Pc(n,0,i):ow(n,e,t)}function Pc(n,e,t){if(0===t.length)return new Et(n.segments,{});{const r=function bz(n){return cf(n[0])?n[0].outlets:{[dt]:n}}(t),i={};if(!r[dt]&&n.children[dt]&&1===n.numberOfChildren&&0===n.children[dt].segments.length){const s=Pc(n.children[dt],e,t);return new Et(n.segments,s.children)}return Rr(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=sw(n.children[o],e,s))}),Rr(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Et(n.segments,i)}}function ow(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(cf(s)){const u=Rz(s.outlets);return new Et(r,u)}if(0===i&&lf(t[0])){r.push(new sf(n.segments[e].path,vM(t[0]))),i++;continue}const o=cf(s)?s.outlets[dt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&lf(a)?(r.push(new sf(o,vM(a))),i+=2):(r.push(new sf(o,{})),i++)}return new Et(r,{})}function Rz(n){const e={};return Rr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ow(new Et([],{}),0,t))}),e}function vM(n){const e={};return Rr(n,(t,r)=>e[r]=`${t}`),e}function IM(n,e,t){return n==t.path&&Qs(e,t.parameters)}const df="imperative";class Ys{constructor(e,t){this.id=e,this.url=t}}class aw extends Ys{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Su extends Ys{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $m extends Ys{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Hm extends Ys{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class uw extends Ys{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Pz extends Ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mz extends Ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xz extends Ys{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nz extends Ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oz extends Ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kz{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vz{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fz{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lz{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uz{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bz{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Hz=(()=>{class n{createUrlTree(t,r,i,s,o,a){return Dz(t||r.root,i,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})(),zz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:function(e){return Hz.\u0275fac(e)},providedIn:"root"}),n})();class wM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=lw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=lw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cw(e,this._root).map(t=>t.value)}}function lw(n,e){if(n===e.value)return e;for(const t of e.children){const r=lw(n,t);if(r)return r}return null}function cw(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cw(n,t);if(r.length)return r.unshift(e),r}return[]}class Lo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class TM extends wM{constructor(e,t){super(e),this.snapshot=t,dw(this,e)}toString(){return this.snapshot.toString()}}function DM(n,e){const t=function qz(n,e){const o=new Gm([],{},{},"",{},dt,e,null,n.root,-1,{});return new AM("",new Lo(o,[]))}(n,e),r=new bs([new sf("",{})]),i=new bs({}),s=new bs({}),o=new bs({}),a=new bs(""),u=new xc(r,i,o,a,s,dt,e,t.root);return u.snapshot=t.root,new TM(new Lo(u,[]),t)}class xc{constructor(e,t,r,i,s,o,a,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(be(h=>h[rf]))??Ge(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(e=>bc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(e=>bc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function CM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Wz(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Gm{get title(){return this.data?.[rf]}constructor(e,t,r,i,s,o,a,u,h,p,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=h,this._lastPathIndex=p,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AM extends wM{constructor(e,t){super(t),this.url=e,dw(this,t)}toString(){return bM(this._root)}}function dw(n,e){e.value._routerState=n,e.children.forEach(t=>dw(n,t))}function bM(n){const e=n.children.length>0?` { ${n.children.map(bM).join(", ")} } `:"";return`${n.value}${e}`}function hw(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Qs(e.params,t.params)||n.params.next(t.params),function az(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Qs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fw(n,e){const t=Qs(n.params,e.params)&&function dz(n,e){return Au(n,e)&&n.every((t,r)=>Qs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fw(n.parent,e.parent))}function hf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Zz(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hf(n,r,i);return hf(n,r)})}(n,e,t);return new Lo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>hf(n,a)),o}}const r=function Qz(n){return new xc(new bs(n.url),new bs(n.params),new bs(n.queryParams),new bs(n.fragment),new bs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>hf(n,s));return new Lo(r,i)}}const pw="ngNavigationCancelingError";function SM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=bu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=RM(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function RM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pw]=!0,r.cancellationCode=e,t&&(r.url=t),r}function PM(n){return MM(n)&&bu(n.url)}function MM(n){return n&&n[pw]}class Yz{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ff,this.attachRef=null}}let ff=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Yz,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zm=!1;let gw=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=dt,this.activateEvents=new Fn,this.deactivateEvents=new Fn,this.attachEvents=new Fn,this.detachEvents=new Fn,this.parentContexts=mt(ff),this.location=mt(Ts),this.changeDetector=mt(pm),this.environmentInjector=mt(bo)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,zm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,zm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,zm);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new _e(4013,zm);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Jz(t,a,i.injector);if(r&&function Xz(n){return!!n.resolveComponentFactory}(r)){const h=r.resolveComponentFactory(o);this.activated=i.createComponent(h,i.length,u)}else this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[jr]}),n})();class Jz{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xc?this.route:e===ff?this.childContexts:this.parent.get(e,t)}}let mw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Lr({type:n,selectors:[["ng-component"]],standalone:!0,features:[VS],decls:1,vars:0,template:function(t,r){1&t&&zr(0,"router-outlet")},dependencies:[gw],encapsulation:2}),n})();function xM(n,e){return n.providers&&!n._injector&&(n._injector=sm(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yw(n){const e=n.children&&n.children.map(yw),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=mw),t}function is(n){return n.outlet||dt}function NM(n,e){const t=n.filter(r=>is(r)===e);return t.push(...n.filter(r=>is(r)!==e)),t}function pf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class i3{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Mc(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Rr(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Mc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Bz(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Lz(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(hw(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),hw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=pf(i.snapshot),u=a?.get(xh)??null;o.attachRef=null,o.route=i,o.resolver=u,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class OM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qm{constructor(e,t){this.component=e,this.route=t}}function s3(n,e,t){const r=n._root;return gf(r,e?e._root:null,t,[r.value])}function Nc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function xd(n){return null!==Ns(n)}(n)?e.get(n):n:r}function gf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Mc(e);return n.children.forEach(o=>{(function a3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function u3(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Au(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Au(n.url,e.url)||!Qs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fw(n,e)||!Qs(n.queryParams,e.queryParams);default:return!fw(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new OM(r)):(s.data=o.data,s._resolvedData=o._resolvedData),gf(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qm(a.outlet.component,o))}else o&&mf(e,a,i),i.canActivateChecks.push(new OM(r)),gf(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Rr(s,(o,a)=>mf(o,t.getContext(a),i)),i}function mf(n,e,t){const r=Mc(n),i=n.value;Rr(r,(s,o)=>{mf(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new qm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function _f(n){return"function"==typeof n}function vw(n){return n instanceof xm||"EmptyError"===n?.name}const Wm=Symbol("INITIAL_VALUE");function Oc(){return vr(n=>QP(n.map(e=>e.pipe(Ac(1),Nm(Wm)))).pipe(be(e=>{for(const t of e)if(!0!==t){if(t===Wm)return Wm;if(!1===t||t instanceof Ia)return t}return!0}),Ss(e=>e!==Wm),Ac(1)))}function kM(n){return function kr(...n){return ti(n)}(Sr(e=>{if(bu(e))throw SM(0,e)}),be(e=>!0===e))}const Iw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VM(n,e,t,r,i){const s=Ew(n,e,t);return s.matched?function C3(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ge(i.map(o=>{const a=Nc(o,n);return va(function p3(n){return n&&_f(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Oc(),kM()):Ge(!0)}(r=xM(e,r),e,t).pipe(be(o=>!0===o?s:{...Iw})):Ge(s)}function Ew(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Iw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||oz)(t,n,e);if(!i)return{...Iw};const s={};Rr(i.posParams,(a,u)=>{s[u]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Km(n,e,t,r){if(t.length>0&&function S3(n,e,t){return t.some(r=>Zm(n,e,r)&&is(r)!==dt)}(n,t,r)){const s=new Et(e,function b3(n,e,t,r){const i={};i[dt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&is(s)!==dt){const o=new Et([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[is(s)]=o}return i}(n,e,r,new Et(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function R3(n,e,t){return t.some(r=>Zm(n,e,r))}(n,t,r)){const s=new Et(n.segments,function A3(n,e,t,r,i){const s={};for(const o of r)if(Zm(n,t,o)&&!i[is(o)]){const a=new Et([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[is(o)]=a}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new Et(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Zm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function FM(n,e,t,r){return!!(is(n)===r||r!==dt&&Zm(e,t,n))&&("**"===n.path||Ew(e,n,t).matched)}function LM(n,e,t){return 0===e.length&&!n.children[t]}const Qm=!1;class Ym{constructor(e){this.segmentGroup=e||null}}class UM{constructor(e){this.urlTree=e}}function yf(n){return tf(new Ym(n))}function BM(n){return tf(new UM(n))}class N3{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Km(this.urlTree.root,[],[],this.config).segmentGroup,t=new Et(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,dt).pipe(be(s=>this.createUrlTree(jm(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ya(s=>{if(s instanceof UM)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Ym?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,dt).pipe(be(i=>this.createUrlTree(jm(i),e.queryParams,e.fragment))).pipe(ya(i=>{throw i instanceof Ym?this.noMatchError(i):i}))}noMatchError(e){return new _e(4002,Qm)}createUrlTree(e,t,r){const i=rw(e);return new Ia(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(be(s=>new Et([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return T(i).pipe(Cu(s=>{const o=r.children[s],a=NM(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(be(u=>({segment:u,outlet:s})))}),nf((s,o)=>(s[o.outlet]=o.segment,s),{}),tM())}expandSegment(e,t,r,i,s,o){return T(r).pipe(Cu(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(ya(h=>{if(h instanceof Ym)return Ge(null);throw h}))),Fo(a=>!!a),ya((a,u)=>{if(vw(a))return LM(t,i,s)?Ge(new Et([],{})):yf(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return FM(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):yf(t):yf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?BM(s):this.lineralizeSegments(r,s).pipe(hn(o=>{const a=new Et(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:h,positionalParamSegments:p}=Ew(t,i,s);if(!a)return yf(t);const m=this.applyRedirectCommands(u,i.redirectTo,p);return i.redirectTo.startsWith("/")?BM(m):this.lineralizeSegments(i,m).pipe(hn(y=>this.expandSegment(e,t,r,y.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=xM(r,e),r.loadChildren?(r._loadedRoutes?Ge({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(be(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new Et(i,{})))):Ge(new Et(i,{}))):VM(t,r,i,e).pipe(vr(({matched:o,consumedSegments:a,remainingSegments:u})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(hn(p=>{const m=p.injector??e,y=p.routes,{segmentGroup:D,slicedSegments:b}=Km(t,a,u,y),N=new Et(D.segments,D.children);if(0===b.length&&N.hasChildren())return this.expandChildren(m,y,N).pipe(be(L=>new Et(a,L)));if(0===y.length&&0===b.length)return Ge(new Et(a,{}));const O=is(r)===s;return this.expandSegment(m,N,y,b,O?dt:s,!0).pipe(be(te=>new Et(a.concat(te.segments),te.children)))})):yf(t)))}getChildConfig(e,t,r){return t.children?Ge({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ge({routes:t._loadedRoutes,injector:t._loadedInjector}):function D3(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ge(!0):Ge(i.map(o=>{const a=Nc(o,n);return va(function c3(n){return n&&_f(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Oc(),kM())}(e,t,r).pipe(hn(i=>i?this.configLoader.loadChildren(e,t).pipe(Sr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function M3(n){return tf(RM(Qm,3))}())):Ge({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ge(r);if(i.numberOfChildren>1||!i.children[dt])return e.redirectTo,tf(new _e(4e3,Qm));i=i.children[dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ia(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Rr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Rr(t.children,(a,u)=>{o[u]=this.createSegmentGroup(e,a,r,i)}),new Et(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new _e(4001,Qm);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class k3{}class L3{constructor(e,t,r,i,s,o,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=Km(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,dt).pipe(be(t=>{if(null===t)return null;const r=new Gm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Lo(r,t),s=new AM(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=CM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return T(Object.keys(r.children)).pipe(Cu(i=>{const s=r.children[i],o=NM(t,i);return this.processSegmentGroup(e,o,s,i)}),nf((i,s)=>i&&s?(i.push(...s),i):null),function rz(n,e=!1){return J((t,r)=>{let i=0;t.subscribe(Ie(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),Om(null),tM(),be(i=>{if(null===i)return null;const s=$M(i);return function U3(n){n.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return T(t).pipe(Cu(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),Fo(o=>!!o),ya(o=>{if(vw(o))return LM(r,i,s)?Ge([]):Ge(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!FM(t,r,i,s))return Ge(null);let o;if("**"===t.path){const a=i.length>0?iM(i).parameters:{},u=GM(r)+i.length;o=Ge({snapshot:new Gm(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zM(t),is(t),t.component??t._loadedComponent??null,t,HM(r),u,qM(t)),consumedSegments:[],remainingSegments:[]})}else o=VM(r,t,i,e).pipe(be(({matched:a,consumedSegments:u,remainingSegments:h,parameters:p})=>{if(!a)return null;const m=GM(r)+u.length;return{snapshot:new Gm(u,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zM(t),is(t),t.component??t._loadedComponent??null,t,HM(r),m,qM(t)),consumedSegments:u,remainingSegments:h}}));return o.pipe(vr(a=>{if(null===a)return Ge(null);const{snapshot:u,consumedSegments:h,remainingSegments:p}=a;e=t._injector??e;const m=t._loadedInjector??e,y=function B3(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:D,slicedSegments:b}=Km(r,h,p,y.filter(O=>void 0===O.redirectTo));if(0===b.length&&D.hasChildren())return this.processChildren(m,y,D).pipe(be(O=>null===O?null:[new Lo(u,O)]));if(0===y.length&&0===b.length)return Ge([new Lo(u,[])]);const N=is(t)===s;return this.processSegment(m,y,D,b,N?dt:s).pipe(be(O=>null===O?null:[new Lo(u,O)]))}))}}function j3(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function $M(n){const e=[],t=new Set;for(const r of n){if(!j3(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=$M(r.children);e.push(new Lo(r.value,i))}return e.filter(r=>!t.has(r))}function HM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function GM(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function zM(n){return n.data||{}}function qM(n){return n.resolve||{}}function WM(n){return"string"==typeof n.title||null===n.title}function ww(n){return vr(e=>{const t=n(e);return t?T(t).pipe(be(()=>e)):Ge(e)})}const kc=new Me("ROUTES");let Tw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=mt(DR)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ge(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=va(t.loadComponent()).pipe(be(ZM),Sr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ew(()=>{this.componentLoaders.delete(t)})),i=new XP(r,()=>new ee).pipe(JE());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ge({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(be(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,h,p=!1;Array.isArray(a)?h=a:(u=a.create(t).injector,h=rM(u.get(kc,[],Qe.Self|Qe.Optional)));return{routes:h.map(yw),injector:u}}),ew(()=>{this.childrenLoaders.delete(r)})),o=new XP(s,()=>new ee).pipe(JE());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return va(t()).pipe(be(ZM),hn(r=>r instanceof OS||Array.isArray(r)?Ge(r):T(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ZM(n){return function Z3(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Xm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ee,this.configLoader=mt(Tw),this.environmentInjector=mt(bo),this.urlSerializer=mt(af),this.rootContexts=mt(ff),this.navigationId=0,this.afterPreactivation=()=>Ge(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Vz(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new kz(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new bs({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:df,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ss(r=>0!==r.id),be(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),vr(r=>{let i=!1,s=!1;return Ge(r).pipe(Sr(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),vr(o=>{const a=t.browserUrlTree.toString(),u=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const p="";return this.events.next(new Hm(o.id,t.serializeUrl(r.rawUrl),p,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),Mn}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return QM(o.source)&&(t.browserUrlTree=o.extractedUrl),Ge(o).pipe(vr(p=>{const m=this.transitions?.getValue();return this.events.next(new aw(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Mn:Promise.resolve(p)}),function O3(n,e,t,r){return vr(i=>function x3(n,e,t,r,i){return new N3(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(be(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Sr(p=>{this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects},r.urlAfterRedirects=p.urlAfterRedirects}),function H3(n,e,t,r,i){return hn(s=>function F3(n,e,t,r,i,s,o="emptyOnly"){return new L3(n,e,t,r,i,o,s).recognize().pipe(vr(a=>null===a?function V3(n){return new ct(e=>e.error(n))}(new k3):Ge(a)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(be(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Sr(p=>{if(r.targetSnapshot=p.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!p.extras.skipLocationChange){const y=t.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);t.setBrowserUrl(y,p)}t.browserUrlTree=p.urlAfterRedirects}const m=new Pz(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:p,extractedUrl:m,source:y,restoredState:D,extras:b}=o,N=new aw(p,this.urlSerializer.serialize(m),y,D);this.events.next(N);const O=DM(m,this.rootComponentType).snapshot;return Ge(r={...o,targetSnapshot:O,urlAfterRedirects:m,extras:{...b,skipLocationChange:!1,replaceUrl:!1}})}{const p="";return this.events.next(new Hm(o.id,t.serializeUrl(r.extractedUrl),p,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),Mn}}),Sr(o=>{const a=new Mz(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),be(o=>r={...o,guards:s3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function m3(n,e){return hn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ge({...t,guardsResult:!0}):function _3(n,e,t,r){return T(n).pipe(hn(i=>function T3(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ge(s.map(a=>{const u=pf(e)??i,h=Nc(a,u);return va(function f3(n){return n&&_f(n.canDeactivate)}(h)?h.canDeactivate(n,e,t,r):u.runInContext(()=>h(n,e,t,r))).pipe(Fo())})).pipe(Oc()):Ge(!0)}(i.component,i.route,t,e,r)),Fo(i=>!0!==i,!0))}(o,r,i,n).pipe(hn(a=>a&&function l3(n){return"boolean"==typeof n}(a)?function y3(n,e,t,r){return T(e).pipe(Cu(i=>YE(function I3(n,e){return null!==n&&e&&e(new Fz(n)),Ge(!0)}(i.route.parent,r),function v3(n,e){return null!==n&&e&&e(new Uz(n)),Ge(!0)}(i.route,r),function w3(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function o3(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>JP(()=>Ge(o.guards.map(u=>{const h=pf(o.node)??t,p=Nc(u,h);return va(function h3(n){return n&&_f(n.canActivateChild)}(p)?p.canActivateChild(r,n):h.runInContext(()=>p(r,n))).pipe(Fo())})).pipe(Oc())));return Ge(s).pipe(Oc())}(n,i.path,t),function E3(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ge(!0);const i=r.map(s=>JP(()=>{const o=pf(e)??t,a=Nc(s,o);return va(function d3(n){return n&&_f(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Fo())}));return Ge(i).pipe(Oc())}(n,i.route,t))),Fo(i=>!0!==i,!0))}(r,s,n,e):Ge(a)),be(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Sr(o=>{if(r.guardsResult=o.guardsResult,bu(o.guardsResult))throw SM(0,o.guardsResult);const a=new xz(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Ss(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),ww(o=>{if(o.guards.canActivateChecks.length)return Ge(o).pipe(Sr(a=>{const u=new Nz(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),vr(a=>{let u=!1;return Ge(a).pipe(function G3(n,e){return hn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ge(t);let s=0;return T(i).pipe(Cu(o=>function z3(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!WM(i)&&(s[rf]=i.title),function q3(n,e,t,r){const i=function W3(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ge({});const s={};return T(i).pipe(hn(o=>function K3(n,e,t,r){const i=pf(e)??r,s=Nc(n,i);return va(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Fo(),Sr(a=>{s[o]=a}))),XE(1),function iz(n){return be(()=>n)}(s),ya(o=>vw(o)?Mn:tf(o)))}(s,n,e,r).pipe(be(o=>(n._resolvedData=o,n.data=CM(n,t).resolve,i&&WM(i)&&(n.data[rf]=i.title),null)))}(o.route,r,n,e)),Sr(()=>s++),XE(1),hn(o=>s===i.length?Ge(t):Mn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Sr({next:()=>u=!0,complete:()=>{u||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Sr(a=>{const u=new Oz(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),ww(o=>{const a=u=>{const h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(Sr(p=>{u.component=p}),be(()=>{})));for(const p of u.children)h.push(...a(p));return h};return QP(a(o.targetSnapshot.root)).pipe(Om(),Ac(1))}),ww(()=>this.afterPreactivation()),be(o=>{const a=function Kz(n,e,t){const r=hf(n,e._root,t?t._root:void 0);return new TM(r,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),Sr(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>be(r=>(new i3(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),Ac(1),Sr({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Su(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ew(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ya(o=>{if(s=!0,MM(o)){PM(o)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new $m(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),PM(o)){const u=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),h={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||QM(r.source)};t.scheduleNavigation(u,df,null,h,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new uw(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(o))}catch(u){r.reject(u)}}return Mn}))}))}cancelNavigationTransition(t,r,i){const s=new $m(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QM(n){return n!==df}let YM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===dt);return r}getResolvedTitleForRoute(t){return t.data[rf]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:function(){return mt(Q3)},providedIn:"root"}),n})(),Q3=(()=>{class n extends YM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(ve(GP))},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:function(){return mt(X3)},providedIn:"root"}),n})();class J3{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let X3=(()=>{class n extends J3{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=nr(n)))(r||n)}}(),n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const e_=new Me("",{providedIn:"root",factory:()=>({})});let t9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:function(){return mt(n9)},providedIn:"root"}),n})(),n9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function r9(n){throw n}function i9(n,e,t){return e.parse("/")}const s9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},o9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=mt(x$),this.isNgZoneEnabled=!1,this.options=mt(e_,{optional:!0})||{},this.errorHandler=this.options.errorHandler||r9,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||i9,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=mt(t9),this.routeReuseStrategy=mt(Y3),this.urlCreationStrategy=mt(zz),this.titleStrategy=mt(YM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=rM(mt(kc,{optional:!0})??[]),this.navigationTransitions=mt(Xm),this.urlSerializer=mt(af),this.location=mt(AE),this.isNgZoneEnabled=mt(mn)instanceof mn&&mn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ia,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=DM(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),df,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(yw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:o;let p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,p,h??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=bu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,df,null,r)}navigate(t,r={skipLocationChange:!1}){return function a9(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new _e(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...s9}:!1===r?{...o9}:r,bu(t))return oM(this.currentUrlTree,t,i);const s=this.parseUrl(t);return oM(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,h,p;return o?(a=o.resolve,u=o.reject,h=o.promise):h=new Promise((m,y)=>{a=m,u=y}),p="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:p,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ru=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ee;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(h=>{h instanceof Su&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Cc(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Cc(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Cc(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function nA(n,e,t){return function PL(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?tA:eA}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(ge(bi),ge(xc),function aa(n){return function uh(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Ol(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(qn(),n)}("tabindex"),ge(So),ge(Ui),ge(Du))},n.\u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&Xt("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Ws("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[jr]}),n})();class JM{}let c9=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ss(t=>t instanceof Su),Cu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=sm(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return T(i).pipe(lr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ge(null);const s=i.pipe(hn(o=>null===o?Ge(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?T([s,this.loader.loadComponent(r)]).pipe(lr()):s})}}return n.\u0275fac=function(t){return new(t||n)(ve(bi),ve(DR),ve(bo),ve(JM),ve(Tw))},n.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Cw=new Me("");let XM=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof aw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Su&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof EM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new EM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function OA(){throw new Error("invalid")}()},n.\u0275prov=He({token:n,factory:n.\u0275fac}),n})();var ji=(()=>((ji=ji||{})[ji.COMPLETE=0]="COMPLETE",ji[ji.FAILED=1]="FAILED",ji[ji.REDIRECTING=2]="REDIRECTING",ji))();const Vc=!1;function Ea(n,e){return{\u0275kind:n,\u0275providers:e}}const Aw=new Me("",{providedIn:"root",factory:()=>!1});function tx(){const n=mt(Gs);return e=>{const t=n.get(hm);if(e!==t.components[0])return;const r=n.get(bi),i=n.get(nx);1===n.get(bw)&&r.initialNavigation(),n.get(rx,null,Qe.Optional)?.setUpPreloading(),n.get(Cw,null,Qe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const nx=new Me(Vc?"bootstrap done indicator":"",{factory:()=>new ee}),bw=new Me(Vc?"initial navigation":"",{providedIn:"root",factory:()=>1});function g9(){let n=[];return n=Vc?[{provide:Ug,multi:!0,useFactory:()=>{const e=mt(bi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function jz(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Ea(1,n)}const rx=new Me(Vc?"router preloader":"");function m9(n){return Ea(0,[{provide:rx,useExisting:c9},{provide:JM,useExisting:n}])}const vf=!1,ix=new Me(vf?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),_9=[AE,{provide:af,useClass:tw},bi,ff,{provide:xc,useFactory:function ex(n){return n.routerState.root},deps:[bi]},Tw,vf?{provide:Aw,useValue:!0}:[]];function y9(){return new xR("Router",bi)}let sx=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_9,vf&&r?.enableTracing?g9().\u0275providers:[],{provide:kc,multi:!0,useValue:t},{provide:ix,useFactory:w9,deps:[[bi,new da,new Do]]},{provide:e_,useValue:r||{}},r?.useHash?{provide:Du,useClass:vH}:{provide:Du,useClass:nP},{provide:Cw,useFactory:()=>{const n=mt(B4),e=mt(mn),t=mt(e_),r=mt(Xm),i=mt(af);return t.scrollOffset&&n.setOffset(t.scrollOffset),new XM(i,r,n,e,t)}},r?.preloadingStrategy?m9(r.preloadingStrategy).\u0275providers:[],{provide:xR,multi:!0,useFactory:y9},r?.initialNavigation?T9(r):[],[{provide:ox,useFactory:tx},{provide:MR,multi:!0,useExisting:ox}]]}}static forChild(t){return{ngModule:n,providers:[{provide:kc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(ve(ix,8))},n.\u0275mod=Vi({type:n}),n.\u0275inj=Cr({imports:[mw]}),n})();function w9(n){if(vf&&n)throw new _e(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function T9(n){return["disabled"===n.initialNavigation?Ea(3,[{provide:lm,multi:!0,useFactory:()=>{const e=mt(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:bw,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ea(2,[{provide:bw,useValue:0},{provide:lm,multi:!0,deps:[Gs],useFactory:e=>{const t=e.get(_H,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(bi),s=e.get(nx);(function d9(n,e){n.events.pipe(Ss(t=>t instanceof Su||t instanceof $m||t instanceof uw||t instanceof Hm),be(t=>t instanceof Su||t instanceof Hm?ji.COMPLETE:t instanceof $m&&(0===t.code||1===t.code)?ji.REDIRECTING:ji.FAILED),Ss(t=>t!==ji.REDIRECTING),Ac(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Xm).afterPreactivation=()=>(r(!0),s.closed?Ge(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const ox=new Me(vf?"Router Initializer":"");var C9=We(966),Fc=We(881),Ht=We(90),Js=We(877),ax=We(859);We(568),(0,Fc.registerVersion)("firebase","10.13.2","app");class S9 extends Ot{constructor(e,t){super()}schedule(e,t=0){return this}}const t_={setInterval(n,e,...t){const{delegate:r}=t_;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=t_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class ux extends S9{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return t_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&t_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ke(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Sw={now:()=>(Sw.delegate||Date).now(),delegate:void 0};class If{constructor(e,t=If.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}If.now=Sw.now;class lx extends If{constructor(e,t=If.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const M9=new class P9 extends lx{}(class R9 extends ux{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),cx=new lx(ux),dx=new ic("ANGULARFIRE2_VERSION");class hx{constructor(){return((n,e)=>{const t=(0,Fc.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(N9)}}const N9="app-check";function Lc(){}class fx{zone;delegate;constructor(e,t=M9){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class O9{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lc,{},Lc,Lc)),t.pipe(Sr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let px=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new fx(Zone.current)),this.insideAngular=t.run(()=>new fx(Zone.current,cx)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ve(mn))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $i(n){return function V9(n){return function(t){return(t=t.lift(new O9(n.ngZone))).pipe(Dr(n.outsideAngular),On(n.insideAngular))}}(function Uc(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Mu=We(942);Mu.Z.registerVersion("firebase","10.13.2","app-compat");const B9=["ngOnDestroy"];class gx{constructor(e){return e}}const n_=new Me("angularfire2.app.options"),r_=new Me("angularfire2.app.name");function Rw(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Mu.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Mu.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;H9("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new gx(o)}const H9=(n,...e)=>{},G9={provide:gx,useFactory:Rw,deps:[n_,mn,[new da,r_]]};let z9=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:n_,useValue:t},{provide:r_,useValue:r}]}}constructor(t){Mu.Z.registerVersion("angularfire",dx.full,"core"),Mu.Z.registerVersion("angularfire",dx.full,"app-compat"),Mu.Z.registerVersion("angular",gA.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ve(Kh))};static \u0275mod=Vi({type:n});static \u0275inj=Cr({providers:[G9]})}return n})();function mx(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function q9(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(_x("error",`${e} was already initialized on the ${t} Firebase App with different settings.${W9?" You may need to reload as Firebase is not HMR aware.":""}`),_x("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const W9=typeof module<"u"&&!!module.hot,_x=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class K9 extends ee{constructor(e=1/0,t=1/0,r=Sw){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function yx(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,w({connector:()=>new K9(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function vx(n,e){return S(e)?vr(()=>n,e):vr(()=>n)}const Ix=new Me("angularfire2.auth.use-emulator"),Ex=new Me("angularfire2.auth.settings"),wx=new Me("angularfire2.auth.tenant-id"),Tx=new Me("angularfire2.auth.langugage-code"),Dx=new Me("angularfire2.auth.use-device-language"),Cx=new Me("angularfire.auth.persistence"),Ax=(n,e,t,r,i,s,o,a)=>mx(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[h,p]of Object.entries(o))u.settings[h]=p;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let Pw=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,h,p,m,y,D){const b=new ee,N=Ge(void 0).pipe(On(o.outsideAngular),vr(()=>s.runOutsideAngular(()=>Promise.resolve().then(We.bind(We,568)))),be(()=>Rw(t,s,r)),be(O=>Ax(O,s,a,h,p,m,u,y)),yx({bufferSize:1,refCount:!1}));if(EP(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ge(null);else{N.pipe(Fo()).subscribe();const O=N.pipe(vr(L=>L.getRedirectResult().then(le=>le,()=>null)),$i,yx({bufferSize:1,refCount:!1})),z=N.pipe(vr(L=>new ct(le=>({unsubscribe:s.runOutsideAngular(()=>L.onAuthStateChanged(Ce=>le.next(Ce),Ce=>le.error(Ce),()=>le.complete()))})))),te=N.pipe(vr(L=>new ct(le=>({unsubscribe:s.runOutsideAngular(()=>L.onIdTokenChanged(Ce=>le.next(Ce),Ce=>le.error(Ce),()=>le.complete()))}))));this.authState=O.pipe(vx(z),Dr(o.outsideAngular),On(o.insideAngular)),this.user=O.pipe(vx(te),Dr(o.outsideAngular),On(o.insideAngular)),this.idToken=this.user.pipe(vr(L=>L?T(L.getIdToken()):Ge(null))),this.idTokenResult=this.user.pipe(vr(L=>L?T(L.getIdTokenResult()):Ge(null))),this.credential=E(O,b,this.authState.pipe(Ss(L=>!L))).pipe(be(L=>L?.user?L:null),Dr(o.outsideAngular),On(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(B9.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(h=>t.run(()=>h)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,h)=>o.then(p=>{const m=p?.(...h);return r?.spy?.apply&&r.spy.apply(s,h,m),m})})})}))(this,N,s,{spy:{apply:(O,z,te)=>{(O.startsWith("signIn")||O.startsWith("createUser"))&&te.then(L=>b.next(L))}}})}static \u0275fac=function(r){return new(r||n)(ve(n_),ve(r_,8),ve(Kh),ve(mn),ve(px),ve(Ix,8),ve(Ex,8),ve(wx,8),ve(Tx,8),ve(Dx,8),ve(Cx,8),ve(hx,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),i_=(()=>{const e=class{constructor(r,i){this.fireauth=r,this.router=i}ngOnInit(){}login(r,i){this.fireauth.signInWithEmailAndPassword(r,i).then(s=>{localStorage.setItem("token","true"),this.router.navigate(1==s.user?.emailVerified?["/dashboard"]:["/verify-email"])},s=>{alert("User Not Found"),this.router.navigate(["/login"])})}register(r,i){this.fireauth.createUserWithEmailAndPassword(r,i).then(s=>{alert("Verify your email"),this.verifyEmail(s.user)},s=>{alert("something Went Wrong")})}logout(){this.fireauth.signOut(),this.router.navigate(["/login"])}forgotPassword(r){this.fireauth.sendPasswordResetEmail(r).then(()=>{this.router.navigate(["/verify-email"])},i=>{alert("something went wrong")})}verifyEmail(r){r.sendEmailVerification().then(i=>{this.router.navigate(["/verify-email"])},i=>{alert("something went wrong")})}signWithGoogle(){return this.fireauth.signInWithPopup(new C9.X).then(r=>{localStorage.setItem("token",JSON.stringify(r.user?.uid)),this.router.navigate(["/dashboard"])},r=>{alert(r.message)})}};let n=e;return e.\u0275fac=function(i){return new(i||e)(ve(Pw),ve(bi))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),bx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(ge(So),ge(Ui))},n.\u0275dir=Ke({type:n}),n})(),xu=(()=>{class n extends bx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=nr(n)))(r||n)}}(),n.\u0275dir=Ke({type:n,features:[Qt]}),n})();const Xs=new Me("NgValueAccessor"),J9={provide:Xs,useExisting:Le(()=>Nu),multi:!0},eq=new Me("CompositionEventMode");let Nu=(()=>{class n extends bx{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function X9(){const n=Oo()?Oo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(ge(So),ge(Ui),ge(eq,8))},n.\u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&Xt("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Dn([J9]),Qt]}),n})();const tq=!1,qr=new Me("NgValidators"),Ta=new Me("NgAsyncValidators");function Lx(n){return null!=n}function Ux(n){const e=Fh(n)?T(n):n;if(tq&&!VI(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new _e(-1101,t)}return e}function Bx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function jx(n,e){return e.map(t=>t(n))}function $x(n){return n.map(e=>function rq(n){return!n.validate}(e)?e:t=>e.validate(t))}function Mw(n){return null!=n?function Hx(n){if(!n)return null;const e=n.filter(Lx);return 0==e.length?null:function(t){return Bx(jx(t,e))}}($x(n)):null}function xw(n){return null!=n?function Gx(n){if(!n)return null;const e=n.filter(Lx);return 0==e.length?null:function(t){return function Q9(...n){const e=us(n),{args:t,keys:r}=WP(n),i=new ct(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,h=o;for(let p=0;p<o;p++){let m=!1;Ut(t[p]).subscribe(Ie(s,y=>{m||(m=!0,h--),a[p]=y},()=>u--,void 0,()=>{(!u||!m)&&(h||s.next(r?ZP(r,a):a),s.complete())}))}});return e?i.pipe(KP(e)):i}(jx(t,e).map(Ux)).pipe(be(Bx))}}($x(n)):null}function zx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Nw(n){return n?Array.isArray(n)?n:[n]:[]}function o_(n,e){return Array.isArray(n)?n.includes(e):n===e}function Kx(n,e){const t=Nw(e);return Nw(n).forEach(i=>{o_(t,i)||t.push(i)}),t}function Zx(n,e){return Nw(e).filter(t=>!o_(n,t))}class Qx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Mw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class hi extends Qx{get formDirective(){return null}get path(){return null}}class Da extends Qx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Yx{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ef=(()=>{class n extends Yx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(ge(Da,2))},n.\u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Xg("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Qt]}),n})(),wf=(()=>{class n extends Yx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(ge(hi,10))},n.\u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Xg("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Qt]}),n})();function Jx(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Vw=!1,Tf="VALID",u_="INVALID",Bc="PENDING",Df="DISABLED";function Fw(n){return(l_(n)?n.validators:n)||null}function Lw(n,e){return(l_(e)?e.asyncValidators:n)||null}function l_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class tN{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Tf}get invalid(){return this.status===u_}get pending(){return this.status==Bc}get disabled(){return this.status===Df}get enabled(){return this.status!==Df}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Kx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Zx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Zx(e,this._rawAsyncValidators))}hasValidator(e){return o_(this._rawValidators,e)}hasAsyncValidator(e){return o_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Df,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tf||this.status===Bc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Df:Tf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bc,this._hasOwnPendingAsyncValidator=!0;const t=Ux(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Fn,this.statusChanges=new Fn}_calculateStatus(){return this._allControlsDisabled()?Df:this.errors?u_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bc)?Bc:this._anyControlsHaveStatus(u_)?u_:Tf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){l_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function cq(n){return Array.isArray(n)?Mw(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function dq(n){return Array.isArray(n)?xw(n):n||null}(this._rawAsyncValidators)}}class Uw extends tN{constructor(e,t,r){super(Fw(t),Lw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function eN(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new _e(1002,Vw?function lq(n,e){return`Must supply a value for form control ${Jx(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function Xx(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new _e(1e3,Vw?function aq(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new _e(1001,Vw?function uq(n,e){return`Cannot find form control ${Jx(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ou=new Me("CallSetDisabledState",{providedIn:"root",factory:()=>Cf}),Cf="always";function Af(n,e,t=Cf){Bw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function pq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&nN(n,e)})}(n,e),function mq(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function gq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&nN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function fq(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function h_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bw(n,e){const t=function qx(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(zx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Wx(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(zx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();h_(e._rawValidators,i),h_(e._rawAsyncValidators,i)}function nN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Eq={provide:hi,useExisting:Le(()=>ku)},bf=(()=>Promise.resolve())();let ku=(()=>{class n extends hi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Fn,this.form=new Uw({},Mw(t),xw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){bf.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Af(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){bf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){bf.then(()=>{const r=this._findContainer(t.path),i=new Uw({});(function rN(n,e){Bw(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){bf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){bf.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function iN(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(ge(qr,10),ge(Ta,10),ge(Ou,8))},n.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&Xt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Dn([Eq]),Qt]}),n})();function sN(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function oN(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const aN=class extends tN{constructor(e=null,t,r){super(Fw(t),Lw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),l_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=oN(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){oN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Dq={provide:Da,useExisting:Le(()=>jc)},cN=(()=>Promise.resolve())();let jc=(()=>{class n extends Da{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new aN,this._registered=!1,this.update=new Fn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Hw(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Nu?t=s:function vq(n){return Object.getPrototypeOf(n.constructor)===xu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function $w(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Af(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){cN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Cc(r);cN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function c_(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(ge(hi,9),ge(qr,10),ge(Ta,10),ge(Xs,10),ge(pm,8),ge(Ou,8))},n.\u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Dn([Dq]),Qt,jr]}),n})(),Sf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),hN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vi({type:n}),n.\u0275inj=Cr({}),n})();const Gw=new Me("NgModelWithFormControlWarning");let RN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vi({type:n}),n.\u0275inj=Cr({imports:[hN]}),n})(),Zq=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ou,useValue:t.callSetDisabledState??Cf}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vi({type:n}),n.\u0275inj=Cr({imports:[RN]}),n})(),Qq=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gw,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ou,useValue:t.callSetDisabledState??Cf}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Vi({type:n}),n.\u0275inj=Cr({imports:[RN]}),n})(),Yq=(()=>{const e=class{constructor(r){this.auth=r,this.email="",this.password=""}login(){""!=this.email?""!=this.password?(this.auth.login(this.email,this.password),this.email="",this.password=""):alert("Enter Your Password"):alert("Enter Your Email")}register(){""!=this.email?""!=this.password?(this.auth.register(this.email,this.password),this.email="",this.password=""):alert("enter your password"):alert("enter your Email")}signInWithGoogle(){this.auth.signWithGoogle()}};let n=e;return e.\u0275fac=function(i){return new(i||e)(ge(i_))},e.\u0275cmp=Lr({type:e,selectors:[["app-login"]],decls:35,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["name","email","type","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["name","password","type","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row","mt-3"],["routerLink","/register",1,"text-decoration-none"],["routerLink","/forgot-password",1,"text-decoration-none"],[1,"row","mt-4"],[1,"btn",3,"click"],["height","30px","src","/assets/icons8-google-48.png","alt",""]],template:function(i,s){1&i&&(ze(0,"div",0)(1,"div",1),zr(2,"div",2),ze(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"h3",6),It(8,"Login"),qe(),ze(9,"div",7)(10,"label",8),It(11,"Email address"),qe(),ze(12,"input",9),Xt("ngModelChange",function(a){return s.email=a}),qe()(),ze(13,"div",7)(14,"label",10),It(15,"Password"),qe(),ze(16,"input",11),Xt("ngModelChange",function(a){return s.password=a}),qe()(),ze(17,"button",12),Xt("click",function(){return s.login()}),It(18,"Login"),qe(),ze(19,"div",13)(20,"div",2)(21,"a",14),It(22,"No Account ? "),ze(23,"span"),It(24,"Register"),qe()()(),ze(25,"div",2)(26,"a",15),It(27,"Forgot Password ?"),qe()()(),ze(28,"div",16)(29,"div",4)(30,"button",17),Xt("click",function(){return s.signInWithGoogle()}),zr(31,"img",18),ze(32,"span"),It(33,"Sign in with google"),qe()()()()()()()(),zr(34,"div",2),qe()()),2&i&&(li(12),ts("ngModel",s.email),li(4),ts("ngModel",s.password))},dependencies:[Ru,Sf,Nu,Ef,wf,jc,ku],encapsulation:2}),n})(),Jq=(()=>{const e=class{constructor(r){this.auth=r,this.email="",this.password=""}register(){""!=this.email?""!=this.password?this.auth.register(this.email,this.password):alert("Enter your password"):alert("Enter your Email")}};let n=e;return e.\u0275fac=function(i){return new(i||e)(ge(i_))},e.\u0275cmp=Lr({type:e,selectors:[["app-register"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["name","email","type","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["name","password","type","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row","mt-3"],["routerLink","/login",1,"text-decoration-none"]],template:function(i,s){1&i&&(ze(0,"div",0)(1,"div",1),zr(2,"div",2),ze(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"h3",6),It(8,"Register"),qe(),ze(9,"div",7)(10,"label",8),It(11,"Email address"),qe(),ze(12,"input",9),Xt("ngModelChange",function(a){return s.email=a}),qe()(),ze(13,"div",7)(14,"label",10),It(15,"Password"),qe(),ze(16,"input",11),Xt("ngModelChange",function(a){return s.password=a}),qe()(),ze(17,"button",12),Xt("click",function(){return s.register()}),It(18,"Register"),qe(),ze(19,"div",13)(20,"div",2)(21,"a",14),It(22,"Already Have Account ? "),ze(23,"span"),It(24,"Login"),qe()()(),zr(25,"div",2),qe()()()()(),zr(26,"div",2),qe()()),2&i&&(li(12),ts("ngModel",s.email),li(4),ts("ngModel",s.password))},dependencies:[Ru,Sf,Nu,Ef,wf,jc,ku]}),n})();function Yw(){return J((n,e)=>{let t,r=!1;n.subscribe(Ie(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function e6(n,e){return n===e}var Fu,xN,ie=We(861),PN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},MN={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(U,M,F){F||(F=0);var B=Array(16);if("string"==typeof M)for(var $=0;16>$;++$)B[$]=M.charCodeAt(F++)|M.charCodeAt(F++)<<8|M.charCodeAt(F++)<<16|M.charCodeAt(F++)<<24;else for($=0;16>$;++$)B[$]=M[F++]|M[F++]<<8|M[F++]<<16|M[F++]<<24;var q=U.g[3],k=(M=U.g[0])+(q^(F=U.g[1])&(($=U.g[2])^q))+B[0]+3614090360&4294967295;k=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=(F=($=(q=(M=F+(k<<7&4294967295|k>>>25))+((k=q+($^M&(F^$))+B[1]+3905402710&4294967295)<<12&4294967295|k>>>20))+((k=$+(F^q&(M^F))+B[2]+606105819&4294967295)<<17&4294967295|k>>>15))+((k=F+(M^$&(q^M))+B[3]+3250441966&4294967295)<<22&4294967295|k>>>10))+((k=M+(q^F&($^q))+B[4]+4118548399&4294967295)<<7&4294967295|k>>>25))+((k=q+($^M&(F^$))+B[5]+1200080426&4294967295)<<12&4294967295|k>>>20))+((k=$+(F^q&(M^F))+B[6]+2821735955&4294967295)<<17&4294967295|k>>>15))+((k=F+(M^$&(q^M))+B[7]+4249261313&4294967295)<<22&4294967295|k>>>10))+((k=M+(q^F&($^q))+B[8]+1770035416&4294967295)<<7&4294967295|k>>>25))+((k=q+($^M&(F^$))+B[9]+2336552879&4294967295)<<12&4294967295|k>>>20))+((k=$+(F^q&(M^F))+B[10]+4294925233&4294967295)<<17&4294967295|k>>>15))+((k=F+(M^$&(q^M))+B[11]+2304563134&4294967295)<<22&4294967295|k>>>10))+((k=M+(q^F&($^q))+B[12]+1804603682&4294967295)<<7&4294967295|k>>>25))+((k=q+($^M&(F^$))+B[13]+4254626195&4294967295)<<12&4294967295|k>>>20))+((k=$+(F^q&(M^F))+B[14]+2792965006&4294967295)<<17&4294967295|k>>>15))+((k=F+(M^$&(q^M))+B[15]+1236535329&4294967295)<<22&4294967295|k>>>10))+((k=M+($^q&(F^$))+B[1]+4129170786&4294967295)<<5&4294967295|k>>>27))+((k=q+(F^$&(M^F))+B[6]+3225465664&4294967295)<<9&4294967295|k>>>23))+((k=$+(M^F&(q^M))+B[11]+643717713&4294967295)<<14&4294967295|k>>>18))+((k=F+(q^M&($^q))+B[0]+3921069994&4294967295)<<20&4294967295|k>>>12))+((k=M+($^q&(F^$))+B[5]+3593408605&4294967295)<<5&4294967295|k>>>27))+((k=q+(F^$&(M^F))+B[10]+38016083&4294967295)<<9&4294967295|k>>>23))+((k=$+(M^F&(q^M))+B[15]+3634488961&4294967295)<<14&4294967295|k>>>18))+((k=F+(q^M&($^q))+B[4]+3889429448&4294967295)<<20&4294967295|k>>>12))+((k=M+($^q&(F^$))+B[9]+568446438&4294967295)<<5&4294967295|k>>>27))+((k=q+(F^$&(M^F))+B[14]+3275163606&4294967295)<<9&4294967295|k>>>23))+((k=$+(M^F&(q^M))+B[3]+4107603335&4294967295)<<14&4294967295|k>>>18))+((k=F+(q^M&($^q))+B[8]+1163531501&4294967295)<<20&4294967295|k>>>12))+((k=M+($^q&(F^$))+B[13]+2850285829&4294967295)<<5&4294967295|k>>>27))+((k=q+(F^$&(M^F))+B[2]+4243563512&4294967295)<<9&4294967295|k>>>23))+((k=$+(M^F&(q^M))+B[7]+1735328473&4294967295)<<14&4294967295|k>>>18))+((k=F+(q^M&($^q))+B[12]+2368359562&4294967295)<<20&4294967295|k>>>12))+((k=M+(F^$^q)+B[5]+4294588738&4294967295)<<4&4294967295|k>>>28))+((k=q+(M^F^$)+B[8]+2272392833&4294967295)<<11&4294967295|k>>>21))+((k=$+(q^M^F)+B[11]+1839030562&4294967295)<<16&4294967295|k>>>16))+((k=F+($^q^M)+B[14]+4259657740&4294967295)<<23&4294967295|k>>>9))+((k=M+(F^$^q)+B[1]+2763975236&4294967295)<<4&4294967295|k>>>28))+((k=q+(M^F^$)+B[4]+1272893353&4294967295)<<11&4294967295|k>>>21))+((k=$+(q^M^F)+B[7]+4139469664&4294967295)<<16&4294967295|k>>>16))+((k=F+($^q^M)+B[10]+3200236656&4294967295)<<23&4294967295|k>>>9))+((k=M+(F^$^q)+B[13]+681279174&4294967295)<<4&4294967295|k>>>28))+((k=q+(M^F^$)+B[0]+3936430074&4294967295)<<11&4294967295|k>>>21))+((k=$+(q^M^F)+B[3]+3572445317&4294967295)<<16&4294967295|k>>>16))+((k=F+($^q^M)+B[6]+76029189&4294967295)<<23&4294967295|k>>>9))+((k=M+(F^$^q)+B[9]+3654602809&4294967295)<<4&4294967295|k>>>28))+((k=q+(M^F^$)+B[12]+3873151461&4294967295)<<11&4294967295|k>>>21))+((k=$+(q^M^F)+B[15]+530742520&4294967295)<<16&4294967295|k>>>16))+((k=F+($^q^M)+B[2]+3299628645&4294967295)<<23&4294967295|k>>>9))+((k=M+($^(F|~q))+B[0]+4096336452&4294967295)<<6&4294967295|k>>>26))+((k=q+(F^(M|~$))+B[7]+1126891415&4294967295)<<10&4294967295|k>>>22))+((k=$+(M^(q|~F))+B[14]+2878612391&4294967295)<<15&4294967295|k>>>17))+((k=F+(q^($|~M))+B[5]+4237533241&4294967295)<<21&4294967295|k>>>11))+((k=M+($^(F|~q))+B[12]+1700485571&4294967295)<<6&4294967295|k>>>26))+((k=q+(F^(M|~$))+B[3]+2399980690&4294967295)<<10&4294967295|k>>>22))+((k=$+(M^(q|~F))+B[10]+4293915773&4294967295)<<15&4294967295|k>>>17))+((k=F+(q^($|~M))+B[1]+2240044497&4294967295)<<21&4294967295|k>>>11))+((k=M+($^(F|~q))+B[8]+1873313359&4294967295)<<6&4294967295|k>>>26))+((k=q+(F^(M|~$))+B[15]+4264355552&4294967295)<<10&4294967295|k>>>22))+((k=$+(M^(q|~F))+B[6]+2734768916&4294967295)<<15&4294967295|k>>>17))+((k=F+(q^($|~M))+B[13]+1309151649&4294967295)<<21&4294967295|k>>>11))+((q=(M=F+((k=M+($^(F|~q))+B[4]+4149444226&4294967295)<<6&4294967295|k>>>26))+((k=q+(F^(M|~$))+B[11]+3174756917&4294967295)<<10&4294967295|k>>>22))^(($=q+((k=$+(M^(q|~F))+B[2]+718787259&4294967295)<<15&4294967295|k>>>17))|~M))+B[9]+3951481745&4294967295,U.g[0]=U.g[0]+M&4294967295,U.g[1]=U.g[1]+($+(k<<21&4294967295|k>>>11))&4294967295,U.g[2]=U.g[2]+$&4294967295,U.g[3]=U.g[3]+q&4294967295}function o(U,M){this.h=M;for(var F=[],B=!0,$=U.length-1;0<=$;$--){var q=0|U[$];B&&q==M||(F[$]=q,B=!1)}this.g=F}(function e(U,M){function F(){}F.prototype=M.prototype,U.D=M.prototype,U.prototype=new F,U.prototype.constructor=U,U.C=function(B,$,q){for(var k=Array(arguments.length-2),Zo=2;Zo<arguments.length;Zo++)k[Zo-2]=arguments[Zo];return M.prototype[$].apply(B,k)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(U,M){void 0===M&&(M=U.length);for(var F=M-this.blockSize,B=this.B,$=this.h,q=0;q<M;){if(0==$)for(;q<=F;)i(this,U,q),q+=this.blockSize;if("string"==typeof U){for(;q<M;)if(B[$++]=U.charCodeAt(q++),$==this.blockSize){i(this,B),$=0;break}}else for(;q<M;)if(B[$++]=U[q++],$==this.blockSize){i(this,B),$=0;break}}this.h=$,this.o+=M},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var M=1;M<U.length-8;++M)U[M]=0;var F=8*this.o;for(M=U.length-8;M<U.length;++M)U[M]=255&F,F/=256;for(this.u(U),U=Array(16),M=F=0;4>M;++M)for(var B=0;32>B;B+=8)U[F++]=this.g[M]>>>B&255;return U};var a={};function u(U){return-128<=U&&128>U?function s(U,M){var F=a;return Object.prototype.hasOwnProperty.call(F,U)?F[U]:F[U]=M(U)}(U,function(M){return new o([0|M],0>M?-1:0)}):new o([0|U],0>U?-1:0)}function h(U){if(isNaN(U)||!isFinite(U))return m;if(0>U)return O(h(-U));for(var M=[],F=1,B=0;U>=F;B++)M[B]=U/F|0,F*=4294967296;return new o(M,0)}var m=u(0),y=u(1),D=u(16777216);function b(U){if(0!=U.h)return!1;for(var M=0;M<U.g.length;M++)if(0!=U.g[M])return!1;return!0}function N(U){return-1==U.h}function O(U){for(var M=U.g.length,F=[],B=0;B<M;B++)F[B]=~U.g[B];return new o(F,~U.h).add(y)}function z(U,M){return U.add(O(M))}function te(U,M){for(;(65535&U[M])!=U[M];)U[M+1]+=U[M]>>>16,U[M]&=65535,M++}function L(U,M){this.g=U,this.h=M}function le(U,M){if(b(M))throw Error("division by zero");if(b(U))return new L(m,m);if(N(U))return M=le(O(U),M),new L(O(M.g),O(M.h));if(N(M))return M=le(U,O(M)),new L(O(M.g),M.h);if(30<U.g.length){if(N(U)||N(M))throw Error("slowDivide_ only works with positive integers.");for(var F=y,B=M;0>=B.l(U);)F=Ce(F),B=Ce(B);var $=Ve(F,1),q=Ve(B,1);for(B=Ve(B,2),F=Ve(F,2);!b(B);){var k=q.add(B);0>=k.l(U)&&($=$.add(F),q=k),B=Ve(B,1),F=Ve(F,1)}return M=z(U,$.j(M)),new L($,M)}for($=m;0<=U.l(M);){for(F=Math.max(1,Math.floor(U.m()/M.m())),B=48>=(B=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,B-48),k=(q=h(F)).j(M);N(k)||0<k.l(U);)k=(q=h(F-=B)).j(M);b(q)&&(q=y),$=$.add(q),U=z(U,k)}return new L($,U)}function Ce(U){for(var M=U.g.length+1,F=[],B=0;B<M;B++)F[B]=U.i(B)<<1|U.i(B-1)>>>31;return new o(F,U.h)}function Ve(U,M){var F=M>>5;M%=32;for(var B=U.g.length-F,$=[],q=0;q<B;q++)$[q]=0<M?U.i(q+F)>>>M|U.i(q+F+1)<<32-M:U.i(q+F);return new o($,U.h)}(n=o.prototype).m=function(){if(N(this))return-O(this).m();for(var U=0,M=1,F=0;F<this.g.length;F++){var B=this.i(F);U+=(0<=B?B:4294967296+B)*M,M*=4294967296}return U},n.toString=function(U){if(2>(U=U||10)||36<U)throw Error("radix out of range: "+U);if(b(this))return"0";if(N(this))return"-"+O(this).toString(U);for(var M=h(Math.pow(U,6)),F=this,B="";;){var $=le(F,M).g,q=((0<(F=z(F,$.j(M))).g.length?F.g[0]:F.h)>>>0).toString(U);if(b(F=$))return q+B;for(;6>q.length;)q="0"+q;B=q+B}},n.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h},n.l=function(U){return N(U=z(this,U))?-1:b(U)?0:1},n.abs=function(){return N(this)?O(this):this},n.add=function(U){for(var M=Math.max(this.g.length,U.g.length),F=[],B=0,$=0;$<=M;$++){var q=B+(65535&this.i($))+(65535&U.i($)),k=(q>>>16)+(this.i($)>>>16)+(U.i($)>>>16);B=k>>>16,F[$]=(k&=65535)<<16|(q&=65535)}return new o(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(U){if(b(this)||b(U))return m;if(N(this))return N(U)?O(this).j(O(U)):O(O(this).j(U));if(N(U))return O(this.j(O(U)));if(0>this.l(D)&&0>U.l(D))return h(this.m()*U.m());for(var M=this.g.length+U.g.length,F=[],B=0;B<2*M;B++)F[B]=0;for(B=0;B<this.g.length;B++)for(var $=0;$<U.g.length;$++){var q=this.i(B)>>>16,k=65535&this.i(B),Zo=U.i($)>>>16,yp=65535&U.i($);F[2*B+2*$]+=k*yp,te(F,2*B+2*$),F[2*B+2*$+1]+=q*yp,te(F,2*B+2*$+1),F[2*B+2*$+1]+=k*Zo,te(F,2*B+2*$+1),F[2*B+2*$+2]+=q*Zo,te(F,2*B+2*$+2)}for(B=0;B<M;B++)F[B]=F[2*B+1]<<16|F[2*B];for(B=M;B<2*M;B++)F[B]=0;return new o(F,0)},n.A=function(U){return le(this,U).h},n.and=function(U){for(var M=Math.max(this.g.length,U.g.length),F=[],B=0;B<M;B++)F[B]=this.i(B)&U.i(B);return new o(F,this.h&U.h)},n.or=function(U){for(var M=Math.max(this.g.length,U.g.length),F=[],B=0;B<M;B++)F[B]=this.i(B)|U.i(B);return new o(F,this.h|U.h)},n.xor=function(U){for(var M=Math.max(this.g.length,U.g.length),F=[],B=0;B<M;B++)F[B]=this.i(B)^U.i(B);return new o(F,this.h^U.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xN=MN.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=function p(U,M){if(0==U.length)throw Error("number format error: empty string");if(2>(M=M||10)||36<M)throw Error("radix out of range: "+M);if("-"==U.charAt(0))return O(p(U.substring(1),M));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=h(Math.pow(M,8)),B=m,$=0;$<U.length;$+=8){var q=Math.min(8,U.length-$),k=parseInt(U.substring($,$+q),M);8>q?(q=h(Math.pow(M,q)),B=B.j(q).add(h(k))):B=(B=B.j(F)).add(h(k))}return B},Fu=MN.Integer=o}).apply(typeof PN<"u"?PN:typeof self<"u"?self:typeof window<"u"?window:{});var NN,ON,Rf,kN,g_,Jw,VN,FN,LN,p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Uo={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(d,_,v){return d==Array.prototype||d==Object.prototype||(d[_]=v.value),d},r=function t(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof p_&&p_];for(var _=0;_<d.length;++_){var v=d[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}(this);!function i(d,_){if(_)e:{var v=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var H=d[A];if(!(H in v))break e;v=v[H]}(_=_(A=v[d=d[d.length-1]]))!=A&&null!=_&&e(v,d,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(d){return d||function(){return function s(d,_){d instanceof String&&(d+="");var v=0,A=!1,H={next:function(){if(!A&&v<d.length){var X=v++;return{value:_(X,d[X]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}(this,function(_,v){return v})}});var o=o||{},a=this||self;function u(d){var _=typeof d;return"array"==(_="object"!=_?_:d?Array.isArray(d)?"array":_:"null")||"object"==_&&"number"==typeof d.length}function h(d){var _=typeof d;return"object"==_&&null!=d||"function"==_}function p(d,_,v){return d.call.apply(d.bind,arguments)}function m(d,_,v){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),d.apply(_,H)}}return function(){return d.apply(_,arguments)}}function y(d,_,v){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:m).apply(null,arguments)}function D(d,_){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function b(d,_){function v(){}v.prototype=_.prototype,d.aa=_.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(A,H,X){for(var Te=Array(arguments.length-2),on=2;on<arguments.length;on++)Te[on-2]=arguments[on];return _.prototype[H].apply(A,Te)}}function N(d){const _=d.length;if(0<_){const v=Array(_);for(let A=0;A<_;A++)v[A]=d[A];return v}return[]}function O(d,_){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(u(A)){const H=d.length||0,X=A.length||0;d.length=H+X;for(let Te=0;Te<X;Te++)d[H+Te]=A[Te]}else d.push(A)}}function te(d){return/^[\s\xa0]*$/.test(d)}function L(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function le(d){return le[" "](d),d}le[" "]=function(){};var Ce=!(-1==L().indexOf("Gecko")||-1!=L().toLowerCase().indexOf("webkit")&&-1==L().indexOf("Edge")||-1!=L().indexOf("Trident")||-1!=L().indexOf("MSIE")||-1!=L().indexOf("Edge"));function Ve(d,_,v){for(const A in d)_.call(v,d[A],A,d)}function M(d){const _={};for(const v in d)_[v]=d[v];return _}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(d,_){let v,A;for(let H=1;H<arguments.length;H++){for(v in A=arguments[H],A)d[v]=A[v];for(let X=0;X<F.length;X++)v=F[X],Object.prototype.hasOwnProperty.call(A,v)&&(d[v]=A[v])}}function $(d){var _=1;d=d.split(":");const v=[];for(;0<_&&d.length;)v.push(d.shift()),_--;return d.length&&v.push(d.join(":")),v}function q(d){a.setTimeout(()=>{throw d},0)}function k(){var d=DC;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}var yp=new class z{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new LK,d=>d.reset());class LK{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let vp,Ip=!1,DC=new class Zo{constructor(){this.h=this.g=null}add(_,v){const A=yp.get();A.set(_,v),this.h?this.h.next=A:this.g=A,this.h=A}},MV=()=>{const d=a.Promise.resolve(void 0);vp=()=>{d.then(UK)}};var UK=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(v){q(v)}var _=yp;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}Ip=!1};function Ga(){this.s=this.s,this.C=this.C}function Yr(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}Ga.prototype.s=!1,Ga.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ga.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Yr.prototype.h=function(){this.defaultPrevented=!0};var BK=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};a.addEventListener("test",v,_),a.removeEventListener("test",v,_)}catch{}return d}();function Ep(d,_){if(Yr.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(Ce){e:{try{le(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else"mouseover"==v?_=d.fromElement:"mouseout"==v&&(_=d.toElement);this.relatedTarget=_,A?(this.clientX=void 0!==A.clientX?A.clientX:A.pageX,this.clientY=void 0!==A.clientY?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType="string"==typeof d.pointerType?d.pointerType:jK[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ep.aa.h.call(this)}}b(Ep,Yr);var jK={2:"touch",3:"pen",4:"mouse"};Ep.prototype.h=function(){Ep.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var wp="closure_listenable_"+(1e6*Math.random()|0),$K=0;function HK(d,_,v,A,H){this.listener=d,this.proxy=null,this.src=_,this.type=v,this.capture=!!A,this.ha=H,this.key=++$K,this.da=this.fa=!1}function _y(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function yy(d){this.src=d,this.g={},this.h=0}function CC(d,_){var v=_.type;if(v in d.g){var X,A=d.g[v],H=Array.prototype.indexOf.call(A,_,void 0);(X=0<=H)&&Array.prototype.splice.call(A,H,1),X&&(_y(_),0==d.g[v].length&&(delete d.g[v],d.h--))}}function AC(d,_,v,A){for(var H=0;H<d.length;++H){var X=d[H];if(!X.da&&X.listener==_&&X.capture==!!v&&X.ha==A)return H}return-1}yy.prototype.add=function(d,_,v,A,H){var X=d.toString();(d=this.g[X])||(d=this.g[X]=[],this.h++);var Te=AC(d,_,A,H);return-1<Te?(_=d[Te],v||(_.fa=!1)):((_=new HK(_,this.src,X,!!A,H)).fa=v,d.push(_)),_};var bC="closure_lm_"+(1e6*Math.random()|0),SC={};function xV(d,_,v,A,H){if(A&&A.once)return OV(d,_,v,A,H);if(Array.isArray(_)){for(var X=0;X<_.length;X++)xV(d,_[X],v,A,H);return null}return v=xC(v),d&&d[wp]?d.K(_,v,h(A)?!!A.capture:!!A,H):NV(d,_,v,!1,A,H)}function NV(d,_,v,A,H,X){if(!_)throw Error("Invalid event type");var Te=h(H)?!!H.capture:!!H,on=PC(d);if(on||(d[bC]=on=new yy(d)),(v=on.add(_,v,A,Te,X)).proxy)return v;if(A=function GK(){const _=zK;return function d(v){return _.call(d.src,d.listener,v)}}(),v.proxy=A,A.src=d,A.listener=v,d.addEventListener)BK||(H=Te),void 0===H&&(H=!1),d.addEventListener(_.toString(),A,H);else if(d.attachEvent)d.attachEvent(VV(_.toString()),A);else{if(!d.addListener||!d.removeListener)throw Error("addEventListener and attachEvent are unavailable.");d.addListener(A)}return v}function OV(d,_,v,A,H){if(Array.isArray(_)){for(var X=0;X<_.length;X++)OV(d,_[X],v,A,H);return null}return v=xC(v),d&&d[wp]?d.L(_,v,h(A)?!!A.capture:!!A,H):NV(d,_,v,!0,A,H)}function kV(d,_,v,A,H){if(Array.isArray(_))for(var X=0;X<_.length;X++)kV(d,_[X],v,A,H);else A=h(A)?!!A.capture:!!A,v=xC(v),d&&d[wp]?(d=d.i,(_=String(_).toString())in d.g&&-1<(v=AC(X=d.g[_],v,A,H))&&(_y(X[v]),Array.prototype.splice.call(X,v,1),0==X.length&&(delete d.g[_],d.h--))):d&&(d=PC(d))&&(_=d.g[_.toString()],d=-1,_&&(d=AC(_,v,A,H)),(v=-1<d?_[d]:null)&&RC(v))}function RC(d){if("number"!=typeof d&&d&&!d.da){var _=d.src;if(_&&_[wp])CC(_.i,d);else{var v=d.type,A=d.proxy;_.removeEventListener?_.removeEventListener(v,A,d.capture):_.detachEvent?_.detachEvent(VV(v),A):_.addListener&&_.removeListener&&_.removeListener(A),(v=PC(_))?(CC(v,d),0==v.h&&(v.src=null,_[bC]=null)):_y(d)}}}function VV(d){return d in SC?SC[d]:SC[d]="on"+d}function zK(d,_){if(d.da)d=!0;else{_=new Ep(_,this);var v=d.listener,A=d.ha||d.src;d.fa&&RC(d),d=v.call(A,_)}return d}function PC(d){return(d=d[bC])instanceof yy?d:null}var MC="__closure_events_fn_"+(1e9*Math.random()>>>0);function xC(d){return"function"==typeof d?d:(d[MC]||(d[MC]=function(_){return d.handleEvent(_)}),d[MC])}function Jr(){Ga.call(this),this.i=new yy(this),this.M=this,this.F=null}function gi(d,_){var v,A=d.F;if(A)for(v=[];A;A=A.F)v.push(A);if(d=d.M,A=_.type||_,"string"==typeof _)_=new Yr(_,d);else if(_ instanceof Yr)_.target=_.target||d;else{var H=_;B(_=new Yr(A,d),H)}if(H=!0,v)for(var X=v.length-1;0<=X;X--){var Te=_.g=v[X];H=vy(Te,A,!0,_)&&H}if(H=vy(Te=_.g=d,A,!0,_)&&H,H=vy(Te,A,!1,_)&&H,v)for(X=0;X<v.length;X++)H=vy(Te=_.g=v[X],A,!1,_)&&H}function vy(d,_,v,A){if(!(_=d.i.g[String(_)]))return!0;_=_.concat();for(var H=!0,X=0;X<_.length;++X){var Te=_[X];if(Te&&!Te.da&&Te.capture==v){var on=Te.listener,Nr=Te.ha||Te.src;Te.fa&&CC(d.i,Te),H=!1!==on.call(Nr,A)&&H}}return H&&!A.defaultPrevented}function FV(d,_,v){if("function"==typeof d)v&&(d=y(d,v));else{if(!d||"function"!=typeof d.handleEvent)throw Error("Invalid listener argument");d=y(d.handleEvent,d)}return 2147483647<Number(_)?-1:a.setTimeout(d,_||0)}function LV(d){d.g=FV(()=>{d.g=null,d.i&&(d.i=!1,LV(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}b(Jr,Ga),Jr.prototype[wp]=!0,Jr.prototype.removeEventListener=function(d,_,v,A){kV(this,d,_,v,A)},Jr.prototype.N=function(){if(Jr.aa.N.call(this),this.i){var _,d=this.i;for(_ in d.g){for(var v=d.g[_],A=0;A<v.length;A++)_y(v[A]);delete d.g[_],d.h--}}this.F=null},Jr.prototype.K=function(d,_,v,A){return this.i.add(String(d),_,!1,v,A)},Jr.prototype.L=function(d,_,v,A){return this.i.add(String(d),_,!0,v,A)};class qK extends Ga{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:LV(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tp(d){Ga.call(this),this.h=d,this.g={}}b(Tp,Ga);var UV=[];function BV(d){Ve(d.g,function(_,v){this.g.hasOwnProperty(v)&&RC(_)},d),d.g={}}Tp.prototype.N=function(){Tp.aa.N.call(this),BV(this)},Tp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var NC=a.JSON.stringify,WK=a.JSON.parse,KK=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function OC(){}function $V(){}OC.prototype.h=null;var Dp={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kC(){Yr.call(this,"d")}function VC(){Yr.call(this,"c")}b(kC,Yr),b(VC,Yr);var sl={},HV=null;function Iy(){return HV=HV||new Jr}function GV(d){Yr.call(this,sl.La,d)}function Cp(d){const _=Iy();gi(_,new GV(_))}function zV(d,_){Yr.call(this,sl.STAT_EVENT,d),this.stat=_}function mi(d){const _=Iy();gi(_,new zV(_,d))}function qV(d,_){Yr.call(this,sl.Ma,d),this.size=_}function Ap(d,_){if("function"!=typeof d)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},_)}function bp(){this.g=!0}function Cd(d,_,v,A){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+function JK(d,_){if(!d.g)return _;if(!_)return null;try{var v=JSON.parse(_);if(v)for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var A=v[d];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if("noop"!=X&&"stop"!=X&&"close"!=X)for(var Te=1;Te<H.length;Te++)H[Te]=""}}}return NC(v)}catch{return _}}(d,v)+(A?" "+A:"")})}sl.La="serverreachability",b(GV,Yr),sl.STAT_EVENT="statevent",b(zV,Yr),sl.Ma="timingevent",b(qV,Yr),bp.prototype.xa=function(){this.g=!1},bp.prototype.info=function(){};var FC,Ey={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},WV={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function wy(){}function za(d,_,v,A){this.j=d,this.i=_,this.l=v,this.R=A||1,this.U=new Tp(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new KV}function KV(){this.i=null,this.g="",this.h=!1}b(wy,OC),wy.prototype.g=function(){return new XMLHttpRequest},wy.prototype.i=function(){return{}},FC=new wy;var ZV={},LC={};function UC(d,_,v){d.L=1,d.v=Ay(Qo(_)),d.m=v,d.P=!0,QV(d,null)}function QV(d,_){d.F=Date.now(),Ty(d),d.A=Qo(d.v);var v=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),cF(v.i,"t",A),d.C=0,v=d.j.J,d.h=new KV,d.g=SF(d.j,v?_:null,!d.m),0<d.O&&(d.M=new qK(y(d.Y,d,d.g),d.O)),_=d.U,v=d.g,A=d.ca;var H="readystatechange";Array.isArray(H)||(H&&(UV[0]=H.toString()),H=UV);for(var X=0;X<H.length;X++){var Te=xV(v,H[X],A||_.handleEvent,!1,_.h||_);if(!Te)break;_.g[Te.key]=Te}_=d.H?M(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Cp(),function ZK(d,_,v,A,H,X){d.info(function(){if(d.g)if(X)for(var Te="",on=X.split("&"),Nr=0;Nr<on.length;Nr++){var $t=on[Nr].split("=");if(1<$t.length){var Xr=$t[0];$t=$t[1];var ei=Xr.split("_");Te=2<=ei.length&&"type"==ei[1]?Te+(Xr+"=")+$t+"&":Te+(Xr+"=redacted&")}}else Te=null;else Te=X;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+_+"\n"+v+"\n"+Te})}(d.i,d.u,d.A,d.l,d.R,d.m)}function YV(d){return!!d.g&&"GET"==d.u&&2!=d.L&&d.j.Ca}function XK(d,_){var v=d.C,A=_.indexOf("\n",v);return-1==A?LC:(v=Number(_.substring(v,A)),isNaN(v)?ZV:(A+=1)+v>_.length?LC:(_=_.slice(A,A+v),d.C=A+v,_))}function Ty(d){d.S=Date.now()+d.I,JV(d,d.I)}function JV(d,_){if(null!=d.B)throw Error("WatchDog timer not null");d.B=Ap(y(d.ba,d),_)}function BC(d){d.B&&(a.clearTimeout(d.B),d.B=null)}function Sp(d){0==d.j.G||d.J||DF(d.j,d)}function ol(d){BC(d);var _=d.M;_&&"function"==typeof _.ma&&_.ma(),d.M=null,BV(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function jC(d,_){try{var v=d.j;if(0!=v.G&&(v.g==d||$C(v.h,d)))if(!d.K&&$C(v.h,d)&&3==v.G){try{var A=v.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&3==A.length){var H=A;if(0==H[0]){e:if(!v.u){if(v.g){if(!(v.g.F+3e3<d.F))break e;My(v),Ry(v)}qC(v),mi(18)}}else v.za=H[1],0<v.za-v.T&&37500>H[2]&&v.F&&0==v.v&&!v.C&&(v.C=Ap(y(v.Za,v),6e3));if(1>=tF(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ul(v,11)}else if((d.K||v.g==d)&&My(v),!te(_))for(H=v.Da.g.parse(_),_=0;_<H.length;_++){let $t=H[_];if(v.T=$t[0],$t=$t[1],2==v.G)if("c"==$t[0]){v.K=$t[1],v.ia=$t[2];const Xr=$t[3];null!=Xr&&(v.la=Xr,v.j.info("VER="+v.la));const ei=$t[4];null!=ei&&(v.Aa=ei,v.j.info("SVER="+v.Aa));const Sd=$t[5];null!=Sd&&"number"==typeof Sd&&0<Sd&&(v.L=A=1.5*Sd,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Rs=d.g;if(Rs){const Ny=Rs.g?Rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ny){var X=A.h;X.g||-1==Ny.indexOf("spdy")&&-1==Ny.indexOf("quic")&&-1==Ny.indexOf("h2")||(X.j=X.l,X.g=new Set,X.h&&(HC(X,X.h),X.h=null))}if(A.D){const KC=Rs.g?Rs.g.getResponseHeader("X-HTTP-Session-Id"):null;KC&&(A.ya=KC,In(A.I,A.D,KC))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms"));var Te=d;if((A=v).qa=bF(A,A.J?A.ia:null,A.W),Te.K){nF(A.h,Te);var on=Te,Nr=A.L;Nr&&(on.I=Nr),on.B&&(BC(on),Ty(on)),A.g=Te}else wF(A);0<v.i.length&&Py(v)}else"stop"!=$t[0]&&"close"!=$t[0]||ul(v,7);else 3==v.G&&("stop"==$t[0]||"close"==$t[0]?"stop"==$t[0]?ul(v,7):zC(v):"noop"!=$t[0]&&v.l&&v.l.ta($t),v.v=0)}Cp()}catch{}}function XV(d){this.l=d||10,d=a.PerformanceNavigationTiming?0<(d=a.performance.getEntriesByType("navigation")).length&&("hq"==d[0].nextHopProtocol||"h2"==d[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eF(d){return!!d.h||!!d.g&&d.g.size>=d.j}function tF(d){return d.h?1:d.g?d.g.size:0}function $C(d,_){return d.h?d.h==_:!!d.g&&d.g.has(_)}function HC(d,_){d.g?d.g.add(_):d.h=_}function nF(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}function rF(d){if(null!=d.h)return d.i.concat(d.h.D);if(null!=d.g&&0!==d.g.size){let _=d.i;for(const v of d.g.values())_=_.concat(v.D);return _}return N(d.i)}function iF(d,_){if(d.forEach&&"function"==typeof d.forEach)d.forEach(_,void 0);else if(u(d)||"string"==typeof d)Array.prototype.forEach.call(d,_,void 0);else for(var v=function n7(d){if(d.na&&"function"==typeof d.na)return d.na();if(!d.V||"function"!=typeof d.V){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||"string"==typeof d){var _=[];d=d.length;for(var v=0;v<d;v++)_.push(v);return _}_=[],v=0;for(const A in d)_[v++]=A;return _}}}(d),A=function t7(d){if(d.V&&"function"==typeof d.V)return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if("string"==typeof d)return d.split("");if(u(d)){for(var _=[],v=d.length,A=0;A<v;A++)_.push(d[A]);return _}for(A in _=[],v=0,d)_[v++]=d[A];return _}(d),H=A.length,X=0;X<H;X++)_.call(void 0,A[X],v&&v[X],d)}za.prototype.ca=function(d){d=d.target;const _=this.M;_&&3==Yo(d)?_.j():this.Y(d)},za.prototype.Y=function(d){try{if(d==this.g)e:{const ei=Yo(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>ei)&&(3!=ei||this.g&&(this.h.h||this.g.oa()||_F(this.g)))){this.J||4!=ei||7==_||Cp(),BC(this);var v=this.g.Z();this.X=v;t:if(YV(this)){var A=_F(this.g);d="";var H=A.length,X=4==Yo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ol(this),Sp(this);var Te="";break t}this.h.i=new a.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,d+=this.h.i.decode(A[_],{stream:!(X&&_==H-1)});A.length=0,this.h.g+=d,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=200==v,function QK(d,_,v,A,H,X,Te){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+_+"\n"+v+"\n"+X+" "+Te})}(this.i,this.u,this.A,this.l,this.R,ei,v),this.o){if(this.T&&!this.K){t:{if(this.g){var on,Nr=this.g;if((on=Nr.g?Nr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(on)){var $t=on;break t}}$t=null}if(!(v=$t)){this.o=!1,this.s=3,mi(12),ol(this),Sp(this);break e}Cd(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jC(this,v)}if(this.P){let Rs;for(v=!0;!this.J&&this.C<Te.length;){if(Rs=XK(this,Te),Rs==LC){4==ei&&(this.s=4,mi(14),v=!1),Cd(this.i,this.l,null,"[Incomplete Response]");break}if(Rs==ZV){this.s=4,mi(15),Cd(this.i,this.l,Te,"[Invalid Chunk]"),v=!1;break}Cd(this.i,this.l,Rs,null),jC(this,Rs)}if(YV(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ei||0!=Te.length||this.h.h||(this.s=1,mi(16),v=!1),this.o=this.o&&v,v){if(0<Te.length&&!this.W){this.W=!0;var Xr=this.j;Xr.g==this&&Xr.ba&&!Xr.M&&(Xr.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),WC(Xr),Xr.M=!0,mi(11))}}else Cd(this.i,this.l,Te,"[Invalid Chunked Response]"),ol(this),Sp(this)}else Cd(this.i,this.l,Te,null),jC(this,Te);4==ei&&ol(this),this.o&&!this.J&&(4==ei?DF(this.j,this):(this.o=!1,Ty(this)))}else(function m7(d){const _={};d=(d.g&&2<=Yo(d)&&d.g.getAllResponseHeaders()||"").split("\r\n");for(let A=0;A<d.length;A++){if(te(d[A]))continue;var v=$(d[A]);const H=v[0];if("string"!=typeof(v=v[1]))continue;v=v.trim();const X=_[H]||[];_[H]=X,X.push(v)}!function U(d,_){for(const v in d)_.call(void 0,d[v],v,d)}(_,function(A){return A.join(", ")})})(this.g),400==v&&0<Te.indexOf("Unknown SID")?(this.s=3,mi(12)):(this.s=0,mi(13)),ol(this),Sp(this)}}}catch{}},za.prototype.cancel=function(){this.J=!0,ol(this)},za.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(function YK(d,_){d.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Cp(),mi(17)),ol(this),this.s=2,Sp(this)):JV(this,this.S-d)},XV.prototype.cancel=function(){if(this.i=rF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const d of this.g.values())d.cancel();this.g.clear()}};var sF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function al(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof al){this.h=d.h,Dy(this,d.j),this.o=d.o,this.g=d.g,Cy(this,d.s),this.l=d.l;var _=d.i,v=new Mp;v.i=_.i,_.g&&(v.g=new Map(_.g),v.h=_.h),oF(this,v),this.m=d.m}else d&&(_=String(d).match(sF))?(this.h=!1,Dy(this,_[1]||"",!0),this.o=Rp(_[2]||""),this.g=Rp(_[3]||"",!0),Cy(this,_[4]),this.l=Rp(_[5]||"",!0),oF(this,_[6]||"",!0),this.m=Rp(_[7]||"")):(this.h=!1,this.i=new Mp(null,this.h))}function Qo(d){return new al(d)}function Dy(d,_,v){d.j=v?Rp(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Cy(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function oF(d,_,v){_ instanceof Mp?(d.i=_,function l7(d,_){_&&!d.j&&(qa(d),d.i=null,d.g.forEach(function(v,A){var H=A.toLowerCase();A!=H&&(uF(this,A),cF(this,H,v))},d)),d.j=_}(d.i,d.h)):(v||(_=Pp(_,a7)),d.i=new Mp(_,d.h))}function In(d,_,v){d.i.set(_,v)}function Ay(d){return In(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Rp(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Pp(d,_,v){return"string"==typeof d?(d=encodeURI(d).replace(_,i7),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function i7(d){return"%"+((d=d.charCodeAt(0))>>4&15).toString(16)+(15&d).toString(16)}al.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Pp(_,aF,!0),":");var v=this.g;return(v||"file"==_)&&(d.push("//"),(_=this.o)&&d.push(Pp(_,aF,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(v=this.s)&&d.push(":",String(v))),(v=this.l)&&(this.g&&"/"!=v.charAt(0)&&d.push("/"),d.push(Pp(v,"/"==v.charAt(0)?o7:s7,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Pp(v,u7)),d.join("")};var d,aF=/[#\/\?@]/g,s7=/[#\?:]/g,o7=/[#\?]/g,a7=/[#\?@]/g,u7=/#/g;function Mp(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function qa(d){d.g||(d.g=new Map,d.h=0,d.i&&function r7(d,_){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var A=d[v].indexOf("="),H=null;if(0<=A){var X=d[v].substring(0,A);H=d[v].substring(A+1)}else X=d[v];_(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}(d.i,function(_,v){d.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}function uF(d,_){qa(d),_=Ad(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function lF(d,_){return qa(d),_=Ad(d,_),d.g.has(_)}function cF(d,_,v){uF(d,_),0<v.length&&(d.i=null,d.g.set(Ad(d,_),N(v)),d.h+=v.length)}function Ad(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Wa(d,_,v,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(v)}catch{}}function h7(){this.g=new KK}function f7(d,_,v){const A=v||"";try{iF(d,function(H,X){let Te=H;h(H)&&(Te=NC(H)),_.push(A+X+"="+encodeURIComponent(Te))})}catch(H){throw _.push(A+"type="+encodeURIComponent("_badmap")),H}}function xp(d){this.l=d.Ub||null,this.j=d.eb||!1}function by(d,_){Jr.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function dF(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}function Np(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Op(d)}function Op(d){d.onreadystatechange&&d.onreadystatechange.call(d)}function hF(d){let _="";return Ve(d,function(v,A){_+=A,_+=":",_+=v,_+="\r\n"}),_}function GC(d,_,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=hF(v),"string"==typeof d?null!=v&&encodeURIComponent(String(v)):In(d,_,v))}function Un(d){Jr.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Mp.prototype).add=function(d,_){qa(this),this.i=null,d=Ad(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(_),this.h+=1,this},n.forEach=function(d,_){qa(this),this.g.forEach(function(v,A){v.forEach(function(H){d.call(_,H,A,this)},this)},this)},n.na=function(){qa(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),v=[];for(let A=0;A<_.length;A++){const H=d[A];for(let X=0;X<H.length;X++)v.push(_[A])}return v},n.V=function(d){qa(this);let _=[];if("string"==typeof d)lF(this,d)&&(_=_.concat(this.g.get(Ad(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)_=_.concat(d[v])}return _},n.set=function(d,_){return qa(this),this.i=null,lF(this,d=Ad(this,d))&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d&&0<(d=this.V(d)).length?String(d[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var v=0;v<_.length;v++){var A=_[v];const X=encodeURIComponent(String(A)),Te=this.V(A);for(A=0;A<Te.length;A++){var H=X;""!==Te[A]&&(H+="="+encodeURIComponent(String(Te[A]))),d.push(H)}}return this.i=d.join("&")},b(xp,OC),xp.prototype.g=function(){return new by(this.l,this.j)},xp.prototype.i=(d={},function(){return d}),b(by,Jr),(n=by.prototype).open=function(d,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Op(this)},n.send=function(d){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Np(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Op(this)),this.g&&(this.readyState=3,Op(this),this.g)))if("arraybuffer"===this.responseType)d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dF(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Np(this):Op(this),3==this.readyState&&dF(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Np(this))},n.Qa=function(d){this.g&&(this.response=d,Np(this))},n.ga=function(){this.g&&Np(this)},n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var v=_.next();!v.done;)d.push((v=v.value)[0]+": "+v[1]),v=_.next();return d.join("\r\n")},Object.defineProperty(by.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(d){this.m=d?"include":"same-origin"}}),b(Un,Jr);var p7=/^https?$/i,g7=["POST","PUT"];function fF(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,pF(d),Sy(d)}function pF(d){d.A||(d.A=!0,gi(d,"complete"),gi(d,"error"))}function gF(d){if(d.h&&typeof o<"u"&&(!d.v[1]||4!=Yo(d)||2!=d.Z()))if(d.u&&4==Yo(d))FV(d.Ea,0,d);else if(gi(d,"readystatechange"),4==Yo(d)){d.h=!1;try{const Te=d.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var v;if(!(v=_)){var A;if(A=0===Te){var H=String(d.D).match(sF)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),A=!p7.test(H?H.toLowerCase():"")}v=A}if(v)gi(d,"complete"),gi(d,"success");else{d.m=6;try{var X=2<Yo(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",pF(d)}}finally{Sy(d)}}}function Sy(d,_){if(d.g){mF(d);const v=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||gi(d,"ready");try{v.onreadystatechange=A}catch{}}}function mF(d){d.I&&(a.clearTimeout(d.I),d.I=null)}function Yo(d){return d.g?d.g.readyState:0}function _F(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function kp(d,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||_}function yF(d){this.Aa=0,this.i=[],this.j=new bp,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kp("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kp("baseRetryDelayMs",5e3,d),this.cb=kp("retryDelaySeedMs",1e4,d),this.Wa=kp("forwardChannelMaxRetries",2,d),this.wa=kp("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new XV(d&&d.concurrentRequestLimit),this.Da=new h7,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function zC(d){if(vF(d),3==d.G){var _=d.U++,v=Qo(d.I);if(In(v,"SID",d.K),In(v,"RID",_),In(v,"TYPE","terminate"),Vp(d,v),(_=new za(d,d.j,_)).L=2,_.v=Ay(Qo(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!v&&a.Image&&((new Image).src=_.v,v=!0),v||(_.g=SF(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ty(_)}AF(d)}function Ry(d){d.g&&(WC(d),d.g.cancel(),d.g=null)}function vF(d){Ry(d),d.u&&(a.clearTimeout(d.u),d.u=null),My(d),d.h.cancel(),d.s&&("number"==typeof d.s&&a.clearTimeout(d.s),d.s=null)}function Py(d){if(!eF(d.h)&&!d.s){d.s=!0;var _=d.Ga;vp||MV(),Ip||(vp(),Ip=!0),DC.add(_,d),d.B=0}}function IF(d,_){var v;v=_?_.l:d.U++;const A=Qo(d.I);In(A,"SID",d.K),In(A,"RID",v),In(A,"AID",d.T),Vp(d,A),d.m&&d.o&&GC(A,d.m,d.o),v=new za(d,d.j,v,d.B+1),null===d.m&&(v.H=d.o),_&&(d.i=_.D.concat(d.i)),_=EF(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),HC(d.h,v),UC(v,A,_)}function Vp(d,_){d.H&&Ve(d.H,function(v,A){In(_,A,v)}),d.l&&iF({},function(v,A){In(_,A,v)})}function EF(d,_,v){v=Math.min(d.i.length,v);var A=d.l?y(d.l.Na,d.l,d):null;e:{var H=d.i;let X=-1;for(;;){const Te=["count="+v];-1==X?0<v?(X=H[0].g,Te.push("ofs="+X)):X=0:Te.push("ofs="+X);let on=!0;for(let Nr=0;Nr<v;Nr++){let $t=H[Nr].g;const Xr=H[Nr].map;if($t-=X,0>$t)X=Math.max(0,H[Nr].g-100),on=!1;else try{f7(Xr,Te,"req"+$t+"_")}catch{A&&A(Xr)}}if(on){A=Te.join("&");break e}}}return d=d.i.splice(0,v),_.D=d,A}function wF(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;vp||MV(),Ip||(vp(),Ip=!0),DC.add(_,d),d.v=0}}function qC(d){return!(d.g||d.u||3<=d.v||(d.Y++,d.u=Ap(y(d.Fa,d),CF(d,d.v)),d.v++,0))}function WC(d){null!=d.A&&(a.clearTimeout(d.A),d.A=null)}function TF(d){d.g=new za(d,d.j,"rpc",d.Y),null===d.m&&(d.g.H=d.o),d.g.O=0;var _=Qo(d.qa);In(_,"RID","rpc"),In(_,"SID",d.K),In(_,"AID",d.T),In(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&In(_,"TO",d.ja),In(_,"TYPE","xmlhttp"),Vp(d,_),d.m&&d.o&&GC(_,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=Ay(Qo(_)),v.m=null,v.P=!0,QV(v,d)}function My(d){null!=d.C&&(a.clearTimeout(d.C),d.C=null)}function DF(d,_){var v=null;if(d.g==_){My(d),WC(d),d.g=null;var A=2}else{if(!$C(d.h,_))return;v=_.D,nF(d.h,_),A=1}if(0!=d.G)if(_.o)if(1==A){v=_.m?_.m.length:0,_=Date.now()-_.F;var H=d.B;gi(A=Iy(),new qV(A,v)),Py(d)}else wF(d);else if(3==(H=_.s)||0==H&&0<_.X||!(1==A&&function _7(d,_){return!(tF(d.h)>=d.h.j-(d.s?1:0)||(d.s?(d.i=_.D.concat(d.i),0):1==d.G||2==d.G||d.B>=(d.Va?0:d.Wa)||(d.s=Ap(y(d.Ga,d,_),CF(d,d.B)),d.B++,0)))}(d,_)||2==A&&qC(d)))switch(v&&0<v.length&&(_=d.h,_.i=_.i.concat(v)),H){case 1:ul(d,5);break;case 4:ul(d,10);break;case 3:ul(d,6);break;default:ul(d,2)}}function CF(d,_){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*_}function ul(d,_){if(d.j.info("Error code "+_),2==_){var v=y(d.fb,d),A=d.Xa;const H=!A;A=new al(A||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Dy(A,"https"),Ay(A),H?function c7(d,_){const v=new bp;if(a.Image){const A=new Image;A.onload=D(Wa,v,"TestLoadImage: loaded",!0,_,A),A.onerror=D(Wa,v,"TestLoadImage: error",!1,_,A),A.onabort=D(Wa,v,"TestLoadImage: abort",!1,_,A),A.ontimeout=D(Wa,v,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else _(!1)}(A.toString(),v):function d7(d,_){new bp;const A=new AbortController,H=setTimeout(()=>{A.abort(),Wa(0,0,!1,_)},1e4);fetch(d,{signal:A.signal}).then(X=>{clearTimeout(H),Wa(0,0,!!X.ok,_)}).catch(()=>{clearTimeout(H),Wa(0,0,!1,_)})}(A.toString(),v)}else mi(2);d.G=0,d.l&&d.l.sa(_),AF(d),vF(d)}function AF(d){if(d.G=0,d.ka=[],d.l){const _=rF(d.h);(0!=_.length||0!=d.i.length)&&(O(d.ka,_),O(d.ka,d.i),d.h.i.length=0,N(d.i),d.i.length=0),d.l.ra()}}function bF(d,_,v){var A=v instanceof al?Qo(v):new al(v);if(""!=A.g)_&&(A.g=_+"."+A.g),Cy(A,A.s);else{var H=a.location;A=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var X=new al(null);A&&Dy(X,A),_&&(X.g=_),H&&Cy(X,H),v&&(X.l=v),A=X}return _=d.ya,(v=d.D)&&_&&In(A,v,_),In(A,"VER",d.la),Vp(d,A),A}function SF(d,_,v){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Un(d.Ca&&!d.pa?new xp({eb:v}):d.pa)).Ha(d.J),_}function RF(){}function xy(){}function zi(d,_){Jr.call(this),this.g=new yF(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!te(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!te(_)&&(this.g.D=_,null!==(d=this.h)&&_ in d&&_ in(d=this.h)&&delete d[_]),this.j=new bd(this)}function PF(d){kC.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const v in _){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,_=null!==_&&d in _?_[d]:void 0),this.data=_}else this.data=d}function MF(){VC.call(this),this.status=1}function bd(d){this.g=d}(n=Un.prototype).Ha=function(d){this.J=d},n.ea=function(d,_,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():FC.g(),this.v=function jV(d){return d.h||(d.h=d.i())}(this.o?this.o:FC),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(X){return void fF(this,X)}if(d=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)v.set(H,A[H]);else{if("function"!=typeof A.keys||"function"!=typeof A.get)throw Error("Unknown input type for opt_headers: "+String(A));for(const X of A.keys())v.set(X,A.get(X))}A=Array.from(v.keys()).find(X=>"content-type"==X.toLowerCase()),H=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(g7,_,void 0))||A||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,Te]of v)this.g.setRequestHeader(X,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mF(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){fF(this,X)}},n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,gi(this,"complete"),gi(this,"abort"),Sy(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sy(this,!0)),Un.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gF(this):this.bb())},n.bb=function(){gF(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Yo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&0==_.indexOf(d)&&(_=_.substring(d.length)),WK(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=yF.prototype).la=8,n.G=1,n.connect=function(d,_,v,A){mi(0),this.W=d,this.H=_||{},v&&void 0!==A&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=bF(this,null,this.W),Py(this)},n.Ga=function(d){if(this.s)if(this.s=null,1==this.G){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const H=new za(this,this.j,d);let X=this.o;if(this.S&&(X?(X=M(X),B(X,this.S)):X=this.S),null!==this.m||this.O||(H.H=X,X=null),this.P)e:{for(var _=0,v=0;v<this.i.length;v++){var A=this.i[v];if(void 0===(A="__data__"in A.map&&"string"==typeof(A=A.map.__data__)?A.length:void 0))break;if(4096<(_+=A)){_=v;break e}if(4096===_||v===this.i.length-1){_=v+1;break e}}_=1e3}else _=1e3;_=EF(this,H,_),In(v=Qo(this.I),"RID",d),In(v,"CVER",22),this.D&&In(v,"X-HTTP-Session-Id",this.D),Vp(this,v),X&&(this.O?_="headers="+encodeURIComponent(String(hF(X)))+"&"+_:this.m&&GC(v,this.m,X)),HC(this.h,H),this.Ua&&In(v,"TYPE","init"),this.P?(In(v,"$req",_),In(v,"SID","null"),H.T=!0,UC(H,v,null)):UC(H,v,_),this.G=2}}else 3==this.G&&(d?IF(this,d):0==this.i.length||eF(this.h)||IF(this))},n.Fa=function(){if(this.u=null,TF(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ap(y(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mi(10),Ry(this),TF(this))},n.Za=function(){null!=this.C&&(this.C=null,Ry(this),qC(this),mi(19))},n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),mi(2)):(this.j.info("Failed to ping google.com"),mi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=RF.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},xy.prototype.g=function(d,_){return new zi(d,_)},b(zi,Jr),zi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zi.prototype.close=function(){zC(this.g)},zi.prototype.o=function(d){var _=this.g;if("string"==typeof d){var v={};v.__data__=d,d=v}else this.u&&((v={}).__data__=NC(d),d=v);_.i.push(new class{constructor(d,_){this.g=d,this.map=_}}(_.Ya++,d)),3==_.G&&Py(_)},zi.prototype.N=function(){this.g.l=null,delete this.j,zC(this.g),delete this.g,zi.aa.N.call(this)},b(PF,kC),b(MF,VC),b(bd,RF),bd.prototype.ua=function(){gi(this.g,"a")},bd.prototype.ta=function(d){gi(this.g,new PF(d))},bd.prototype.sa=function(d){gi(this.g,new MF)},bd.prototype.ra=function(){gi(this.g,"b")},xy.prototype.createWebChannel=xy.prototype.g,zi.prototype.send=zi.prototype.o,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,LN=Uo.createWebChannelTransport=function(){return new xy},FN=Uo.getStatEventTarget=function(){return Iy()},VN=Uo.Event=sl,Jw=Uo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ey.NO_ERROR=0,Ey.TIMEOUT=8,Ey.HTTP_ERROR=6,g_=Uo.ErrorCode=Ey,WV.COMPLETE="complete",kN=Uo.EventType=WV,$V.EventType=Dp,Dp.OPEN="a",Dp.CLOSE="b",Dp.ERROR="c",Dp.MESSAGE="d",Jr.prototype.listen=Jr.prototype.K,Rf=Uo.WebChannel=$V,ON=Uo.FetchXmlHttpFactory=xp,Un.prototype.listenOnce=Un.prototype.L,Un.prototype.getLastError=Un.prototype.Ka,Un.prototype.getLastErrorCode=Un.prototype.Ba,Un.prototype.getStatus=Un.prototype.Z,Un.prototype.getResponseJson=Un.prototype.Oa,Un.prototype.getResponseText=Un.prototype.oa,Un.prototype.send=Un.prototype.ea,Un.prototype.setWithCredentials=Un.prototype.Ha,NN=Uo.XhrIo=Un}).apply(typeof p_<"u"?p_:typeof self<"u"?self:typeof window<"u"?window:{});const UN="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let $c="10.13.2";const Ca=new Js.Yd("@firebase/firestore");function Hc(){return Ca.logLevel}function fe(n,...e){if(Ca.logLevel<=Js.in.DEBUG){const t=e.map(Xw);Ca.debug(`Firestore (${$c}): ${n}`,...t)}}function Qn(n,...e){if(Ca.logLevel<=Js.in.ERROR){const t=e.map(Xw);Ca.error(`Firestore (${$c}): ${n}`,...t)}}function Si(n,...e){if(Ca.logLevel<=Js.in.WARN){const t=e.map(Xw);Ca.warn(`Firestore (${$c}): ${n}`,...t)}}function Xw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ne(n="Unexpected state"){const e=`FIRESTORE (${$c}) INTERNAL ASSERTION FAILED: `+n;throw Qn(e),new Error(e)}function Ue(n,e){n||Ne()}function we(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class BN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ir.UNAUTHENTICATED))}shutdown(){}}class i6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class s6{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let o=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable((0,ie.Z)(function*(){yield h.promise,yield s(r.currentUser)}))},u=h=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new mr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue("string"==typeof r.accessToken),new BN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ue(null===e||"string"==typeof e),new Ir(e)}}class o6{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class a6{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new o6(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue("string"==typeof t.token),this.R=t.token,new jN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function l6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $N{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=l6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function rt(n,e){return n<e?-1:n>e?1:0}function Gc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function HN(n){return n+"\0"}class Cn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Cn.fromMillis(Date.now())}static fromDate(e){return Cn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Cn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Cn(0,0))}static max(){return new Be(new Cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ne(),void 0===r?r=e.length-t:r>e.length-t&&Ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rt extends Pf{construct(e,t,r){return new Rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rt(t)}static emptyPath(){return new Rt([])}}const c6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends Pf{construct(e,t,r){return new _n(e,t,r)}static isValidIdentifier(e){return c6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _n(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(t)}static emptyPath(){return new _n([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(Rt.fromString(e))}static fromName(e){return new De(Rt.fromString(e).popFirst(5))}static empty(){return new De(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Rt(e.slice()))}}class zc{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function eT(n){return n.fields.find(e=>2===e.kind)}function Lu(n){return n.fields.filter(e=>2!==e.kind)}zc.UNKNOWN_ID=-1;class Uu{constructor(e,t){this.fieldPath=e,this.kind=t}}class qc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qc(0,Hi.min())}}function GN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(1e9===r?new Cn(t+1,0):new Cn(t,r));return new Hi(i,De.empty(),e)}function zN(n){return new Hi(n.readTime,n.key,-1)}class Hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hi(Be.min(),De.empty(),-1)}static max(){return new Hi(Be.max(),De.empty(),-1)}}function tT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=De.comparator(n.documentKey,e.documentKey),0!==t?t:rt(n.largestBatchId,e.largestBatchId))}const qN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Aa(n){return nT.apply(this,arguments)}function nT(){return(nT=(0,ie.Z)(function*(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==qN)throw n;fe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,r)=>{t(e)})}static reject(e){return new G((t,r)=>{r(e)})}static waitFor(e){return new G((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next(i=>i?G.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new G((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const h=u;t(e[h]).next(p=>{o[h]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,t){return new G((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class m_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Mf(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=rT(r.target.error);this.V.reject(new Mf(e,i))}}static open(e,t,r,i){try{return new m_(t,e.transaction(i,r))}catch(s){throw new Mf(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new p6(t)}}class eo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===eo.S((0,Ht.z$)())&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fe("SimpleDb","Removing database:",e),Bu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ht.hl)())return!1;if(eo.v())return!0;const e=(0,Ht.z$)(),t=eo.S(e),r=0<t&&t<10,i=KN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ie.Z)(function*(){return t.db||(fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Mf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new de(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new de(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Mf(e,a))},s.onupgradeneeded=o=>{fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ie.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=m_.open(s.db,e,o?"readonly":"readwrite",r),h=i(u).next(p=>(u.g(),p)).catch(p=>(u.abort(p),G.reject(p))).toPromise();return h.catch(()=>{}),yield u.m,h}catch(u){const h=u,p="FirebaseError"!==h.name&&a<3;if(fe("SimpleDb","Transaction failed with error:",h.message,"Retrying:",p),s.close(),!p)return Promise.reject(h)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function KN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class f6{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Bu(this.B.delete())}}class Mf extends de{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ba(n){return"IndexedDbTransactionError"===n.name}class p6{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bu(r)}add(e){return fe("SimpleDb","ADD",this.store.name,e,e),Bu(this.store.add(e))}get(e){return Bu(this.store.get(e)).next(t=>(void 0===t&&(t=null),fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fe("SimpleDb","DELETE",this.store.name,e),Bu(this.store.delete(e))}count(){return fe("SimpleDb","COUNT",this.store.name),Bu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new G((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new G((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new G((r,i)=>{t.onerror=s=>{const o=rT(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new G((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new f6(a),h=t(a.primaryKey,a.value,u);if(h instanceof G){const p=h.catch(m=>(u.done(),G.reject(m)));r.push(p)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>G.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bu(n){return new G((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=rT(r.target.error);t(i)}})}let ZN=!1;function rT(n){const e=eo.S((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ZN||(ZN=!0,setTimeout(()=>{throw r},0)),r}}return n}class g6{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;fe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ie.Z)(function*(){t.task=null;try{fe("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){ba(r)?fe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Aa(r)}yield t.X(6e4)}))}}class m6{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return G.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return fe("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(fe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=zN(s);tT(o,r)>0&&(r=o)}),new Hi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Gi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function xf(n){return null==n}function Nf(n){return 0===n&&1/n==-1/0}function QN(n){return"number"==typeof n&&Number.isInteger(n)&&!Nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Wr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YN(e)),e=_6(n.get(t),e);return YN(e)}function _6(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function YN(n){return n+"\x01\x01"}function to(n){const e=n.length;if(Ue(e>=2),2===e)return Ue("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ne(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ne()}s=o+2}return new Rt(r)}const JN=["userId","batchId"];function __(n,e){return[n,Wr(e)]}function XN(n,e,t){return[n,Wr(e),t]}const y6={},v6=["prefixPath","collectionGroup","readTime","documentId"],I6=["prefixPath","collectionGroup","documentId"],E6=["collectionGroup","readTime","prefixPath","documentId"],w6=["canonicalId","targetId"],T6=["targetId","path"],D6=["path","targetId"],C6=["collectionId","parent"],A6=["indexId","uid"],b6=["uid","sequenceNumber"],S6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R6=["indexId","uid","orderedDocumentKey"],P6=["userId","collectionPath","documentId"],M6=["userId","collectionPath","largestBatchId"],x6=["userId","collectionGroup","largestBatchId"],e1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],N6=[...e1,"documentOverlays"],t1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],n1=t1,iT=[...n1,"indexConfiguration","indexState","indexEntries"],O6=iT,k6=[...iT,"globals"];class sT extends WN{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function _r(n,e){const t=we(n);return eo.F(t._e,e)}function r1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function s1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ln{constructor(e,t){this.comparator=e,this.root=t||Pr.EMPTY}insert(e,t){return new ln(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new y_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new y_(this.root,e,this.comparator,!1)}getReverseIterator(){return new y_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new y_(this.root,e,this.comparator,!0)}}class y_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Pr.RED,this.left=i??Pr.EMPTY,this.right=s??Pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Pr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1,Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Pr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class en{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new o1(this.data.getIterator())}getIteratorFrom(e){return new o1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class o1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wc(n){return n.hasNext()?n.getNext():void 0}class Ri{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new Ri([])}unionWith(e){let t=new en(_n.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ri(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class a1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new a1("Invalid base64 string: "+s):s}}(e);return new Ln(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const F6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bo(n){if(Ue(!!n),"string"==typeof n){let e=0;const t=F6.exec(n);if(Ue(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(n.seconds),nanos:An(n.nanos)}}function An(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jo(n){return"string"==typeof n?Ln.fromBase64String(n):Ln.fromUint8Array(n)}function v_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function I_(n){const e=n.mapValue.fields.__previous_value__;return v_(e)?I_(e):e}function Of(n){const e=Bo(n.mapValue.fields.__local_write_time__.timestampValue);return new Cn(e.seconds,e.nanos)}class L6{constructor(e,t,r,i,s,o,a,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=h}}class Ra{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ra("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}const Pa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},E_={nullValue:"NULL_VALUE"};function Ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?v_(n)?4:h1(n)?9007199254740991:D_(n)?10:11:Ne()}function no(n,e){if(n===e)return!0;const t=Ma(n);if(t!==Ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Of(n).isEqual(Of(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bo(i.timestampValue),a=Bo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,jo(n.bytesValue).isEqual(jo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return An(i.geoPointValue.latitude)===An(s.geoPointValue.latitude)&&An(i.geoPointValue.longitude)===An(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return An(i.integerValue)===An(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=An(i.doubleValue),a=An(s.doubleValue);return o===a?Nf(o)===Nf(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Gc(n.arrayValue.values||[],e.arrayValue.values||[],no);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(r1(o)!==r1(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!no(o[u],a[u])))return!1;return!0}(n,e);default:return Ne()}var s}function kf(n,e){return void 0!==(n.values||[]).find(t=>no(t,e))}function xa(n,e){if(n===e)return 0;const t=Ma(n),r=Ma(e);if(t!==r)return rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=An(s.integerValue||s.doubleValue),u=An(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return u1(n.timestampValue,e.timestampValue);case 4:return u1(Of(n),Of(e));case 5:return rt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=jo(s),u=jo(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let h=0;h<a.length&&h<u.length;h++){const p=rt(a[h],u[h]);if(0!==p)return p}return rt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=rt(An(s.latitude),An(o.latitude));return 0!==a?a:rt(An(s.longitude),An(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return l1(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,h,p;const D=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,N=rt((null===(h=D?.values)||void 0===h?void 0:h.length)||0,(null===(p=b?.values)||void 0===p?void 0:p.length)||0);return 0!==N?N:l1(D,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Pa.mapValue&&o===Pa.mapValue)return 0;if(s===Pa.mapValue)return 1;if(o===Pa.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const y=rt(u[m],p[m]);if(0!==y)return y;const D=xa(a[u[m]],h[p[m]]);if(0!==D)return D}return rt(u.length,p.length)}(n.mapValue,e.mapValue);default:throw Ne()}}function u1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rt(n,e);const t=Bo(n),r=Bo(e),i=rt(t.seconds,r.seconds);return 0!==i?i:rt(t.nanos,r.nanos)}function l1(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=xa(t[i],r[i]);if(s)return s}return rt(t.length,r.length)}function Kc(n){return oT(n)}function oT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Bo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jo(n.bytesValue).toBase64():"referenceValue"in n?De.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=oT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${oT(t.fields[o])}`;return i+"}"}(n.mapValue):Ne()}function ju(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function aT(n){return!!n&&"integerValue"in n}function Vf(n){return!!n&&"arrayValue"in n}function c1(n){return!!n&&"nullValue"in n}function d1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function T_(n){return!!n&&"mapValue"in n}function D_(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ff(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ff(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ff(n.arrayValue.values[t]);return e}return Object.assign({},n)}function h1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const f1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function U6(n){return"nullValue"in n?E_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ju(Ra.empty(),De.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?D_(n)?f1:{mapValue:{}}:Ne()}function B6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ju(Ra.empty(),De.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?f1:"mapValue"in n?D_(n)?{mapValue:{}}:Pa:Ne()}function p1(n,e){const t=xa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function g1(n,e){const t=xa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Mr{constructor(e){this.value=e}static empty(){return new Mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!T_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ff(t)}setAll(e){let t=_n.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ff(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());T_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return no(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];T_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sa(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mr(Ff(this.value))}}function m1(n){const e=[];return Sa(n.fields,(t,r)=>{const i=new _n([t]);if(T_(r)){const s=m1(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ri(e)}class yn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new yn(e,0,Be.min(),Be.min(),Be.min(),Mr.empty(),0)}static newFoundDocument(e,t,r,i){return new yn(e,1,t,Be.min(),r,i,0)}static newNoDocument(e,t){return new yn(e,2,t,Be.min(),Be.min(),Mr.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,Be.min(),Be.min(),Mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Na{constructor(e,t){this.position=e,this.inclusive=t}}function _1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?De.comparator(De.fromName(o.referenceValue),t.key):xa(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function y1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!no(n.position[t],e.position[t]))return!1;return!0}class Lf{constructor(e,t="asc"){this.field=e,this.dir=t}}function j6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class v1{}class Pt extends v1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new $6(e,t,r):"array-contains"===t?new z6(e,r):"in"===t?new C1(e,r):"not-in"===t?new q6(e,r):"array-contains-any"===t?new W6(e,r):new Pt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new H6(e,r):new G6(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xa(t,this.value)):null!==t&&Ma(this.value)===Ma(t)&&this.matchesComparison(xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends v1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Yt(e,t)}matches(e){return Zc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zc(n){return"and"===n.op}function uT(n){return"or"===n.op}function lT(n){return I1(n)&&Zc(n)}function I1(n){for(const e of n.filters)if(e instanceof Yt)return!1;return!0}function cT(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Kc(n.value);if(lT(n))return n.filters.map(e=>cT(e)).join(",");{const e=n.filters.map(t=>cT(t)).join(",");return`${n.op}(${e})`}}function E1(n,e){return n instanceof Pt?(r=n,(i=e)instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&no(r.value,i.value)):n instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&E1(o,i.filters[a]),!0)}(n,e):void Ne();var r,i}function w1(n,e){const t=n.filters.concat(e);return Yt.create(t,n.op)}function T1(n){return n instanceof Pt?`${(t=n).field.canonicalString()} ${t.op} ${Kc(t.value)}`:n instanceof Yt?function(t){return t.op.toString()+" {"+t.getFilters().map(T1).join(" ,")+"}"}(n):"Filter";var t}class $6 extends Pt{constructor(e,t,r){super(e,t,r),this.key=De.fromName(r.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class H6 extends Pt{constructor(e,t){super(e,"in",t),this.keys=D1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class G6 extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=D1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function D1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>De.fromName(r.referenceValue))}class z6 extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&kf(t.arrayValue,this.value)}}class C1 extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kf(this.value.arrayValue,t)}}class q6 extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(kf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kf(this.value.arrayValue,t)}}class W6 extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kf(this.value.arrayValue,r))}}class K6{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function dT(n,e=null,t=[],r=[],i=null,s=null,o=null){return new K6(n,e,t,r,i,s,o)}function $u(n){const e=we(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),xf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kc(r)).join(",")),e.ue=t}return e.ue}function Uf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!j6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!E1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!y1(n.startAt,e.startAt)&&y1(n.endAt,e.endAt)}function C_(n){return De.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function A_(n,e){return n.filters.filter(t=>t instanceof Pt&&t.field.isEqual(e))}function A1(n,e,t){let r=E_,i=!0;for(const s of A_(n,e)){let o=E_,a=!0;switch(s.op){case"<":case"<=":o=U6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=E_}p1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];p1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function b1(n,e,t){let r=Pa,i=!0;for(const s of A_(n,e)){let o=Pa,a=!0;switch(s.op){case">=":case">":o=B6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Pa}g1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];g1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class $o{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function S1(n,e,t,r,i,s,o,a){return new $o(n,e,t,r,i,s,o,a)}function Qc(n){return new $o(n)}function R1(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function hT(n){return null!==n.collectionGroup}function Yc(n){const e=we(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new en(_n.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lf(s,r))}),t.has(_n.keyField().canonicalString())||e.ce.push(new Lf(_n.keyField(),r))}return e.ce}function Kr(n){const e=we(n);return e.le||(e.le=function M1(n,e){if("F"===n.limitType)return dT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Lf(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Na(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Na(n.startAt.position,n.startAt.inclusive):null;return dT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Yc(n))),e.le}function fT(n,e){const t=n.filters.concat([e]);return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function b_(n,e,t){return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bf(n,e){return Uf(Kr(n),Kr(e))&&n.limitType===e.limitType}function x1(n){return`${$u(Kr(n))}|lt:${n.limitType}`}function Jc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>T1(i)).join(", ")}]`),xf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Kc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Kc(i)).join(",")),`Target(${r})`}(Kr(n))}; limitType=${n.limitType})`}function jf(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):De.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Yc(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const h=_1(o,a,u);return o.inclusive?h<=0:h<0}(r.startAt,Yc(r),i)||r.endAt&&!function(o,a,u){const h=_1(o,a,u);return o.inclusive?h>=0:h>0}(r.endAt,Yc(r),i)));var r,i}function N1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function O1(n){return(e,t)=>{let r=!1;for(const i of Yc(n)){const s=Z6(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Z6(n,e,t){const r=n.field.isKeyField()?De.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),h=a.data.field(s);return null!==u&&null!==h?xa(u,h):Ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}class Ho{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return s1(this.inner)}size(){return this.innerSize}}const Q6=new ln(De.comparator);function Pi(){return Q6}const k1=new ln(De.comparator);function $f(...n){let e=k1;for(const t of n)e=e.insert(t.key,t);return e}function V1(n){let e=k1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ro(){return Hf()}function F1(){return Hf()}function Hf(){return new Ho(n=>n.toString(),(n,e)=>n.isEqual(e))}const Y6=new ln(De.comparator),J6=new en(De.comparator);function ft(...n){let e=J6;for(const t of n)e=e.add(t);return e}const X6=new en(rt);function pT(){return X6}function gT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function L1(n){return{integerValue:""+n}}function U1(n,e){return QN(e)?L1(e):gT(n,e)}class S_{constructor(){this._=void 0}}function eW(n,e,t){return n instanceof Xc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&v_(s)&&(s=I_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Hu?j1(n,e):n instanceof Gu?$1(n,e):function(i,s){const o=B1(i,s),a=H1(o)+H1(i.Pe);return aT(o)&&aT(i.Pe)?L1(a):gT(i.serializer,a)}(n,e)}function tW(n,e,t){return n instanceof Hu?j1(n,e):n instanceof Gu?$1(n,e):t}function B1(n,e){return n instanceof ed?aT(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Xc extends S_{}class Hu extends S_{constructor(e){super(),this.elements=e}}function j1(n,e){const t=G1(e);for(const r of n.elements)t.some(i=>no(i,r))||t.push(r);return{arrayValue:{values:t}}}class Gu extends S_{constructor(e){super(),this.elements=e}}function $1(n,e){let t=G1(e);for(const r of n.elements)t=t.filter(i=>!no(i,r));return{arrayValue:{values:t}}}class ed extends S_{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function H1(n){return An(n.integerValue||n.doubleValue)}function G1(n){return Vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Gf{constructor(e,t){this.field=e,this.transform=t}}class rW{constructor(e,t){this.version=e,this.transformResults=t}}class bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function R_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class P_{}function z1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new nd(n.key,bn.none()):new td(n.key,n.data,bn.none());{const t=n.data,r=Mr.empty();let i=new en(_n.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Go(n.key,r,new Ri(i.toArray()),bn.none())}}function iW(n,e,t){n instanceof td?function(i,s,o){const a=i.value.clone(),u=K1(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Go?function(i,s,o){if(!R_(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=K1(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(W1(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zf(n,e,t,r){return n instanceof td?function(s,o,a,u){if(!R_(s.precondition,o))return a;const h=s.value.clone(),p=Z1(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Go?function(s,o,a,u){if(!R_(s.precondition,o))return a;const h=Z1(s.fieldTransforms,u,o),p=o.data;return p.setAll(W1(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,R_(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function sW(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=B1(r.transform,i||null);null!=s&&(null===t&&(t=Mr.empty()),t.set(r.field,s))}return t||null}function q1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Gc(r,i,(s,o)=>function nW(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Hu&&i instanceof Hu||r instanceof Gu&&i instanceof Gu?Gc(r.elements,i.elements,no):r instanceof ed&&i instanceof ed?no(r.Pe,i.Pe):r instanceof Xc&&i instanceof Xc);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class td extends P_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Go extends P_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function W1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function K1(n,e,t){const r=new Map;Ue(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tW(o,a,t[i]))}return r}function Z1(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,eW(s,o,e))}return r}class nd extends P_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mT extends P_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _T{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iW(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=F1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=z1(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ft())}isEqual(e){return this.batchId===e.batchId&&Gc(this.mutations,e.mutations,(t,r)=>q1(t,r))&&Gc(this.baseMutations,e.baseMutations,(t,r)=>q1(t,r))}}class yT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ue(e.mutations.length===r.length);let i=Y6;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yT(e,t,r,i)}}class vT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oW{constructor(e,t){this.count=e,this.unchangedNames=t}}var or,Vt;function Y1(n){switch(n){default:return Ne();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function J1(n){if(void 0===n)return Qn("GRPC error has no .code"),Z.UNKNOWN;switch(n){case or.OK:return Z.OK;case or.CANCELLED:return Z.CANCELLED;case or.UNKNOWN:return Z.UNKNOWN;case or.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case or.INTERNAL:return Z.INTERNAL;case or.UNAVAILABLE:return Z.UNAVAILABLE;case or.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case or.NOT_FOUND:return Z.NOT_FOUND;case or.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case or.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case or.ABORTED:return Z.ABORTED;case or.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case or.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case or.DATA_LOSS:return Z.DATA_LOSS;default:return Ne()}}(Vt=or||(or={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";function X1(){return new TextEncoder}const aW=new Fu([4294967295,4294967295],0);function eO(n){const e=X1().encode(n),t=new xN;return t.update(e),new Uint8Array(t.digest())}function tO(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fu([t,r],0),new Fu([i,s],0)]}class IT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qf(`Invalid padding: ${t}`);if(r<0)throw new qf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new qf(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new qf(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Fu.fromNumber(r)));return 1===i.compare(aW)&&(i=new Fu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=eO(e),[r,i]=tO(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new IT(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=eO(e),[r,i]=tO(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class qf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wf{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Kf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wf(Be.min(),i,new ln(rt),Pi(),ft())}}class Kf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Kf(r,t,ft(),ft(),ft())}}class x_{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class nO{constructor(e,t){this.targetId=e,this.me=t}}class rO{constructor(e,t,r=Ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iO{constructor(){this.fe=0,this.ge=oO(),this.pe=Ln.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ft(),t=ft(),r=ft();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ne()}}),new Kf(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=oO()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uW{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pi(),this.qe=sO(),this.Qe=new ln(rt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(C_(s))if(0===r){const o=new De(s.path);this.Ue(t,o,yn.newNoDocument(o,Be.min()))}else Ue(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=jo(r).toUint8Array()}catch(u){if(u instanceof a1)return Si("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new IT(o,i,s)}catch(u){return Si(u instanceof qf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&C_(a.target)){const u=new De(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,yn.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ft();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||"TargetPurposeLimboResolution"===h.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Wf(e,t,this.Qe,this.ke,r);return this.ke=Pi(),this.qe=sO(),this.Qe=new ln(rt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new iO,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new en(rt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iO),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function sO(){return new ln(De.comparator)}function oO(){return new ln(De.comparator)}const lW={asc:"ASCENDING",desc:"DESCENDING"},cW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dW={and:"AND",or:"OR"};class hW{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ET(n,e){return n.useProto3Json||xf(e)?e:{value:e}}function rd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fW(n,e){return rd(n,e.toTimestamp())}function Yn(n){return Ue(!!n),Be.fromTimestamp(function(t){const r=Bo(t);return new Cn(r.seconds,r.nanos)}(n))}function wT(n,e){return TT(n,e).canonicalString()}function TT(n,e){const t=(i=n,new Rt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function uO(n){const e=Rt.fromString(n);return Ue(vO(e)),e}function Zf(n,e){return wT(n.databaseId,e.path)}function io(n,e){const t=uO(e);if(t.get(1)!==n.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new De(dO(t))}function lO(n,e){return wT(n.databaseId,e)}function cO(n){const e=uO(n);return 4===e.length?Rt.emptyPath():dO(e)}function DT(n){return new Rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dO(n){return Ue(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function hO(n,e,t){return{name:Zf(n,e),fields:t.value.mapValue.fields}}function fO(n,e,t){const r=io(n,e.name),i=Yn(e.updateTime),s=e.createTime?Yn(e.createTime):Be.min(),o=new Mr({mapValue:{fields:e.fields}}),a=yn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Qf(n,e){let t;if(e instanceof td)t={update:hO(n,e.key,e.value)};else if(e instanceof nd)t={delete:Zf(n,e.key)};else if(e instanceof Go)t={update:hO(n,e.key,e.data),updateMask:EW(e.fieldMask)};else{if(!(e instanceof mT))return Ne();t={verify:Zf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ed)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ne()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:fW(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ne()),t;var s}function CT(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?bn.updateTime(Yn(s.updateTime)):void 0!==s.exists?bn.exists(s.exists):bn.none():bn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ue("REQUEST_TIME"===a.setToServerValue),u=new Xc):"appendMissingElements"in a?u=new Hu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Gu(a.removeAllFromArray.values||[]):"increment"in a?u=new ed(o,a.increment):Ne();const h=_n.fromServerFormat(a.fieldPath);return new Gf(h,u)}(n,i)):[];var s;if(e.update){const i=io(n,e.update.name),s=new Mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ri((e.updateMask.fieldPaths||[]).map(p=>_n.fromServerFormat(p)));return new Go(i,s,o,t,r)}return new td(i,s,t,r)}if(e.delete){const i=io(n,e.delete);return new nd(i,t)}if(e.verify){const i=io(n,e.verify);return new mT(i,t)}return Ne()}function pO(n,e){return{documents:[lO(n,e.path)]}}function N_(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lO(n,i);const s=function(h){if(0!==h.length)return yO(Yt.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(0!==h.length)return h.map(p=>{return{field:Oa((y=p).field),direction:yW(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=ET(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:i};var h}function mO(n){let e=cO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ue(1===r);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(m){const y=_O(m);return y instanceof Yt&&lT(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Lf(id((b=y).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,xf(y)?null:y}(t.limit));let u=null;var m;t.startAt&&(u=new Na((m=t.startAt).values||[],!!m.before));let h=null;return t.endAt&&(h=function(m){return new Na(m.values||[],!m.before)}(t.endAt)),S1(e,i,o,s,a,"F",u,h)}function _O(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=id(t.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=id(t.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=id(t.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=id(t.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(n):void 0!==n.fieldFilter?Pt.create(id((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Yt.create(t.compositeFilter.filters.map(r=>_O(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ne()}}(t.compositeFilter.op))}(n):Ne();var t}function yW(n){return lW[n]}function vW(n){return cW[n]}function IW(n){return dW[n]}function Oa(n){return{fieldPath:n.canonicalString()}}function id(n){return _n.fromServerFormat(n.fieldPath)}function yO(n){return n instanceof Pt?function(t){if("=="===t.op){if(d1(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NAN"}};if(c1(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(d1(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NAN"}};if(c1(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(t.field),op:vW(t.op),value:t.value}}}(n):n instanceof Yt?function(t){const r=t.getFilters().map(i=>yO(i));return 1===r.length?r[0]:{compositeFilter:{op:IW(t.op),filters:r}}}(n):Ne()}function EW(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class zo{constructor(e,t,r,i,s=Be.min(),o=Be.min(),a=Ln.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IO{constructor(e){this.ct=e}}function EO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:O_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Zf(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:rd(s,o.version.toTimestamp()),createTime:rd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zu(e.version)};else{if(!e.isUnknownDocument())return Ne();r.unknownDocument={path:t.path.toArray(),version:zu(e.version)}}var s,o;return r}function O_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qu(n){const e=new Cn(n.seconds,n.nanoseconds);return Be.fromTimestamp(e)}function Wu(n,e){const t=(e.baseMutations||[]).map(s=>CT(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>CT(n.ct,s)),i=Cn.fromMillis(e.localWriteTimeMs);return new _T(e.batchId,i,t,r)}function Yf(n){const e=qu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?qu(n.lastLimboFreeSnapshotVersion):Be.min();let r;return r=void 0!==n.query.documents?(Ue(1===(s=n.query).documents.length),Kr(Qc(cO(s.documents[0])))):function(s){return Kr(mO(s))}(n.query),new zo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ln.fromBase64String(n.resumeToken));var s}function wO(n,e){const t=zu(e.snapshotVersion),r=zu(e.lastLimboFreeSnapshotVersion);let i;i=C_(e.target)?pO(n.ct,e.target):N_(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$u(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function AT(n){const e=mO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?b_(e,e.limit,"L"):e}function bT(n,e){return new vT(e.largestBatchId,CT(n.ct,e.overlayMutation))}function TO(n,e){const t=e.path.lastSegment();return[n,Wr(e.path.popLast()),t]}function DO(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:zu(r.readTime),documentKey:Wr(r.documentKey.path),largestBatchId:r.largestBatchId}}class TW{getBundleMetadata(e,t){return CO(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:qu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return CO(e).put({bundleId:(i=t).id,createTime:zu(Yn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return AO(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:AT(s.bundledQuery),readTime:qu(s.readTime)};var s})}saveNamedQuery(e,t){return AO(e).put({name:(i=t).name,readTime:zu(Yn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function CO(n){return _r(n,"bundles")}function AO(n){return _r(n,"namedQueries")}class k_{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new k_(e,t.uid||"")}getOverlay(e,t){return Jf(e).get(TO(this.userId,t)).next(r=>r?bT(this.serializer,r):null)}getOverlays(e,t){const r=ro();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new vT(t,o);i.push(this.ht(e,a))}),G.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Wr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Jf(e).j("collectionPathOverlayIndex",a))}),G.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ro(),s=Wr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Jf(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const h=bT(this.serializer,u);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ro();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jf(e).J({index:"collectionGroupOverlayIndex",range:a},(u,h,p)=>{const m=bT(this.serializer,h);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):p.done()}).next(()=>s)}ht(e,t){return Jf(e).put(function(i,s,o){const[a,u,h]=TO(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Qf(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Jf(n){return _r(n,"documentOverlays")}class DW{Pt(e){return _r(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Ln.fromUint8Array(r):Ln.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Ku{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(An(e.integerValue));else if("doubleValue"in e){const r=An(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Nf(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Bo(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(jo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?h1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):D_(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ne()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(An(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),De.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function CW(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function bO(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=CW(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Ku.vt=new Ku;class AW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=bO(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=bO(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class bW{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class SW{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Xf{constructor(){this.jt=new AW,this.Ht=new bW(this.jt),this.Jt=new SW(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Zu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zu(this.indexId,this.documentKey,this.arrayValue,r)}}function ka(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=SO(n.arrayValue,e.arrayValue),0!==t?t:(t=SO(n.directionalValue,e.directionalValue),0!==t?t:De.comparator(n.documentKey,e.documentKey)))}function SO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class RO{constructor(e){this.Xt=new en((t,r)=>_n.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ue(e.collectionGroup===this.collectionId),this.nn)return!1;const t=eT(e);if(void 0!==t&&!this.sn(t))return!1;const r=Lu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new en(_n.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Uu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Uu(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Uu(r.field,"asc"===r.dir?0:1)));return new zc(zc.UNKNOWN_ID,this.collectionId,t,qc.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function PO(n){var e,t;if(Ue(n instanceof Pt||n instanceof Yt),n instanceof Pt){if(n instanceof C1){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Pt.create(n.field,"==",s)))||[];return Yt.create(i,"or")}return n}const r=n.filters.map(i=>PO(i));return Yt.create(r,n.op)}function RW(n){if(0===n.getFilters().length)return[];const e=PT(PO(n));return Ue(MO(e)),ST(e)||RT(e)?[e]:e.getFilters()}function ST(n){return n instanceof Pt}function RT(n){return n instanceof Yt&&lT(n)}function MO(n){return ST(n)||RT(n)||function(t){if(t instanceof Yt&&uT(t)){for(const r of t.getFilters())if(!ST(r)&&!RT(r))return!1;return!0}return!1}(n)}function PT(n){if(Ue(n instanceof Pt||n instanceof Yt),n instanceof Pt)return n;if(1===n.filters.length)return PT(n.filters[0]);const e=n.filters.map(r=>PT(r));let t=Yt.create(e,n.op);return t=V_(t),MO(t)?t:(Ue(t instanceof Yt),Ue(Zc(t)),Ue(t.filters.length>1),t.filters.reduce((r,i)=>MT(r,i)))}function MT(n,e){let t;return Ue(n instanceof Pt||n instanceof Yt),Ue(e instanceof Pt||e instanceof Yt),t=n instanceof Pt?e instanceof Pt?Yt.create([n,e],"and"):xO(n,e):e instanceof Pt?xO(e,n):function(i,s){if(Ue(i.filters.length>0&&s.filters.length>0),Zc(i)&&Zc(s))return w1(i,s.getFilters());const o=uT(i)?i:s,a=uT(i)?s:i,u=o.filters.map(h=>MT(h,a));return Yt.create(u,"or")}(n,e),V_(t)}function xO(n,e){if(Zc(e))return w1(e,n.getFilters());{const t=e.filters.map(r=>MT(n,r));return Yt.create(t,"or")}}function V_(n){if(Ue(n instanceof Pt||n instanceof Yt),n instanceof Pt)return n;const e=n.getFilters();if(1===e.length)return V_(e[0]);if(I1(n))return n;const t=e.map(i=>V_(i)),r=[];return t.forEach(i=>{i instanceof Pt?r.push(i):i instanceof Yt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Yt.create(r,n.op)}class PW{constructor(){this.un=new xT}addToCollectionParentIndex(e,t){return this.un.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Hi.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class xT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new en(Rt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new en(Rt.comparator)).toArray()}}const F_=new Uint8Array(0);class MW{constructor(e,t){this.databaseId=t,this.cn=new xT,this.ln=new Ho(r=>$u(r),(r,i)=>Uf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Wr(i)};return NO(e).put(s)}return G.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[HN(t),""],!1,!0);return NO(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(to(o.parent))}return r})}addFieldIndex(e,t){const r=ep(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=od(e);return s.next(a=>{o.put(DO(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ep(e),i=od(e),s=sd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ep(e),r=sd(e),i=od(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return G.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new RO(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=sd(e);let i=!0;const s=new Map;return G.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ft();const a=[];return G.forEach(s,(u,h)=>{var L;fe("IndexedDbIndexManager",`Using index ${L=u,`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(le=>`${le.fieldPath}:${le.kind}`).join(",")}`} to execute ${$u(t)}`);const p=function(L,le){const Ce=eT(le);if(void 0===Ce)return null;for(const Ve of A_(L,Ce.fieldPath))switch(Ve.op){case"array-contains-any":return Ve.value.arrayValue.values||[];case"array-contains":return[Ve.value]}return null}(h,u),m=function(L,le){const Ce=new Map;for(const Ve of Lu(le))for(const U of A_(L,Ve.fieldPath))switch(U.op){case"==":case"in":Ce.set(Ve.fieldPath.canonicalString(),U.value);break;case"not-in":case"!=":return Ce.set(Ve.fieldPath.canonicalString(),U.value),Array.from(Ce.values())}return null}(h,u),y=function(L,le){const Ce=[];let Ve=!0;for(const U of Lu(le)){const M=0===U.kind?A1(L,U.fieldPath,L.startAt):b1(L,U.fieldPath,L.startAt);Ce.push(M.value),Ve&&(Ve=M.inclusive)}return new Na(Ce,Ve)}(h,u),D=function(L,le){const Ce=[];let Ve=!0;for(const U of Lu(le)){const M=0===U.kind?b1(L,U.fieldPath,L.endAt):A1(L,U.fieldPath,L.endAt);Ce.push(M.value),Ve&&(Ve=M.inclusive)}return new Na(Ce,Ve)}(h,u),b=this.In(u,h,y),N=this.In(u,h,D),O=this.Tn(u,h,m),z=this.En(u.indexId,p,b,y.inclusive,N,D.inclusive,O);return G.forEach(z,te=>r.G(te,t.limit).next(L=>{L.forEach(le=>{const Ce=De.fromSegments(le.documentKey);o.has(Ce)||(o=o.add(Ce),a.push(Ce))})}))}).next(()=>a)}return G.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:RW(Yt.create(e.filters,"and")).map(r=>dT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),h=u/(null!=t?t.length:1),p=[];for(let m=0;m<u;++m){const y=t?this.dn(t[m/h]):F_,D=this.An(e,y,r[m%h],i),b=this.Rn(e,y,s[m%h],o),N=a.map(O=>this.An(e,y,O,!0));p.push(...this.createRange(D,b,N))}return p}An(e,t,r,i){const s=new Zu(e,De.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Zu(e,De.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new RO(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return G.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let h=new en(_n.comparator),p=!1;for(const m of u.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?p=!0:h=h.add(y.field));for(const m of u.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new Xf;for(const i of Lu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);Ku.vt.It(s,o)}return r.zt()}dn(e){const t=new Xf;return Ku.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Xf;return Ku.vt.It(ju(this.databaseId,t),r.Yt(function(s){const o=Lu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new Xf);let s=0;for(const o of Lu(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&Vf(a))i=this.gn(i,o,a);else{const h=u.Yt(o.kind);Ku.vt.It(a,h)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Xf;u.seed(a.zt()),Ku.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Pt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ep(e),i=od(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return G.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(p,m){const y=m?new qc(m.sequenceNumber,new Hi(qu(m.readTime),new De(to(m.documentKey)),m.largestBatchId)):qc.empty(),D=p.fields.map(([b,N])=>new Uu(_n.fromServerFormat(b),N));return new zc(p.indexId,p.collectionGroup,D,y)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:rt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ep(e),s=od(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>G.forEach(a,u=>s.put(DO(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?G.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),G.forEach(a,u=>this.wn(e,i,u).next(h=>{const p=this.Sn(s,u);return h.isEqual(p)?G.resolve():this.bn(e,s,u,h,p)}))))})}Dn(e,t,r,i){return sd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return sd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=sd(e);let s=new en(ka);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Zu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new en(ka);const i=this.Vn(t,e);if(null==i)return r;const s=eT(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Vf(o))for(const a of o.arrayValue.values||[])r=r.add(new Zu(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Zu(t.indexId,e.key,F_,i));return r}bn(e,t,r,i,s){fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,h,p,m,y){const D=u.getIterator(),b=h.getIterator();let N=Wc(D),O=Wc(b);for(;N||O;){let z=!1,te=!1;if(N&&O){const L=p(N,O);L<0?te=!0:L>0&&(z=!0)}else null!=N?te=!0:z=!0;z?(m(O),O=Wc(b)):te?(y(N),N=Wc(D)):(N=Wc(D),O=Wc(b))}}(i,s,ka,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),G.waitFor(o)}yn(e){let t=1;return od(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ka(o,a)).filter((o,a,u)=>!a||0!==ka(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=ka(o,e),u=ka(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,F_,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,F_,[]]))}return s}Cn(e,t){return ka(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(OO)}getMinOffset(e,t){return G.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Ne())).next(OO)}}function NO(n){return _r(n,"collectionParents")}function sd(n){return _r(n,"indexEntries")}function ep(n){return _r(n,"indexConfiguration")}function od(n){return _r(n,"indexState")}function OO(n){Ue(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;tT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Hi(e.readTime,e.documentKey,t)}const kO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zr(e,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function VO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(p,m,y)=>(a++,y.delete()));s.push(u.next(()=>{Ue(1===a)}));const h=[];for(const p of t.mutations){const m=XN(e,p.key.path,t.batchId);s.push(i.delete(m)),h.push(p.key)}return G.waitFor(s).next(()=>h)}function L_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ne();e=n.noDocument}return JSON.stringify(e).length}Zr.DEFAULT_COLLECTION_PERCENTILE=10,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zr.DEFAULT=new Zr(41943040,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zr.DISABLED=new Zr(-1,0,0);class U_{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Ue(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new U_(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Va(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=ad(e),o=Va(e);return o.add({}).next(a=>{Ue("number"==typeof a);const u=new _T(a,t,r,i),h=function(D,b,N){const O=N.baseMutations.map(te=>Qf(D.ct,te)),z=N.mutations.map(te=>Qf(D.ct,te));return{userId:b,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:O,mutations:z}}(this.serializer,this.userId,u),p=[];let m=new en((y,D)=>rt(y.canonicalString(),D.canonicalString()));for(const y of i){const D=XN(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),p.push(o.put(h)),p.push(s.put(D,y6))}return m.forEach(y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),G.waitFor(p).next(()=>u)})}lookupMutationBatch(e,t){return Va(e).get(t).next(r=>r?(Ue(r.userId===this.userId),Wu(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?G.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Va(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ue(a.batchId>=r),s=Wu(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Va(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Va(e).U("userMutationsIndex",t).next(r=>r.map(i=>Wu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=__(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ad(e).J({range:i},(o,a,u)=>{const[h,p,m]=o,y=to(p);if(h===this.userId&&t.path.isEqual(y))return Va(e).get(m).next(D=>{if(!D)throw Ne();Ue(D.userId===this.userId),s.push(Wu(this.serializer,D))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new en(rt);const i=[];return t.forEach(s=>{const o=__(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=ad(e).J({range:a},(h,p,m)=>{const[y,D,b]=h,N=to(D);y===this.userId&&s.path.isEqual(N)?r=r.add(b):m.done()});i.push(u)}),G.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=__(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new en(rt);return ad(e).J({range:o},(u,h,p)=>{const[m,y,D]=u,b=to(y);m===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(D)):p.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Va(e).get(s).next(o=>{if(null===o)throw Ne();Ue(o.userId===this.userId),r.push(Wu(this.serializer,o))}))}),G.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return VO(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),G.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ad(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=to(s[1]);i.push(u)}else a.done()}).next(()=>{Ue(0===i.length)})})}containsKey(e,t){return FO(e,this.userId,t)}Nn(e){return LO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FO(n,e,t){const r=__(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ad(n).J({range:s,H:!0},(a,u,h)=>{const[p,m,y]=a;p===e&&m===i&&(o=!0),h.done()}).next(()=>o)}function Va(n){return _r(n,"mutations")}function ad(n){return _r(n,"documentMutations")}function LO(n){return _r(n,"mutationQueues")}class Qu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qu(0)}static kn(){return new Qu(-1)}}class xW{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Qu(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Be.fromTimestamp(new Cn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ud(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Ue(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return ud(e).J((o,a)=>{const u=Yf(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>G.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ud(e).J((r,i)=>{const s=Yf(i);t(s)})}qn(e){return UO(e).get("targetGlobalKey").next(t=>(Ue(null!==t),t))}Qn(e,t){return UO(e).put("targetGlobalKey",t)}Kn(e,t){return ud(e).put(wO(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$u(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ud(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const h=Yf(a);Uf(t,h.target)&&(s=h,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Fa(e);return t.forEach(o=>{const a=Wr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),G.waitFor(i)}removeMatchingKeys(e,t,r){const i=Fa(e);return G.forEach(t,s=>{const o=Wr(s.path);return G.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Fa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Fa(e);let s=ft();return i.J({range:r,H:!0},(o,a,u)=>{const h=to(o[1]),p=new De(h);s=s.add(p)}).next(()=>s)}containsKey(e,t){const r=Wr(t.path),i=IDBKeyRange.bound([r],[HN(r)],!1,!0);let s=0;return Fa(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,h)=>{0!==o&&(s++,h.done())}).next(()=>s>0)}ot(e,t){return ud(e).get(t).next(r=>r?Yf(r):null)}}function ud(n){return _r(n,"targets")}function UO(n){return _r(n,"targetGlobal")}function Fa(n){return _r(n,"targetDocuments")}function BO([n,e],[t,r]){const i=rt(n,t);return 0===i?rt(e,r):i}class NW{constructor(e){this.Un=e,this.buffer=new en(BO),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();BO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ie.Z)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ba(r)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Aa(r)}yield t.Hn(3e5)}))}}class OW{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return G.resolve(Gi.oe);const r=new NW(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(kO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kO):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Hc()<=Js.in.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-p}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(h-u)+`ms\nTotal Duration: ${h-p}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class kW{constructor(e,t){this.db=e,this.garbageCollector=function $O(n,e){return new OW(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return B_(e,r)}removeReference(e,t,r){return B_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return B_(e,t)}nr(e,t){return function(i,s){let o=!1;return LO(i).Y(a=>FO(i,a,s).next(u=>(u&&(o=!0),G.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Be.min()),Fa(e).delete([0,Wr(o.path)])))});i.push(u)}}).next(()=>G.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return B_(e,t)}tr(e,t){const r=Fa(e);let i,s=Gi.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:h})=>{0===o?(s!==Gi.oe&&t(new De(to(i)),s),s=h,i=u):s=Gi.oe}).next(()=>{s!==Gi.oe&&t(new De(to(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function B_(n,e){return Fa(n).put((i=n.currentSequenceNumber,{targetId:0,path:Wr(e.path),sequenceNumber:i}));var i}class HO{constructor(){this.changes=new Ho(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yu(e).put(r)}removeEntry(e,t,r){return Yu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],O_(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=yn.newInvalidDocument(t);return Yu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tp(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:yn.newInvalidDocument(t)};return Yu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tp(t))},(i,s)=>{r={document:this.ir(t,s),size:L_(s)}}).next(()=>r)}getEntries(e,t){let r=Pi();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Pi(),i=new ln(De.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,L_(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return G.resolve();let i=new en(WO);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(tp(i.first()),tp(i.last())),o=i.getIterator();let a=o.getNext();return Yu(e).J({index:"documentKeyIndex",range:s},(u,h,p)=>{const m=De.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;a&&WO(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,h),a=o.hasNext()?o.getNext():null),a?p.$(tp(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),O_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yu(e).U(IDBKeyRange.bound(a,u,!0)).next(h=>{s?.incrementDocumentReadCount(h.length);let p=Pi();for(const m of h){const y=this.ir(De.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(jf(t,y)||i.has(y.key))&&(p=p.insert(y.key,y))}return p})}getAllFromCollectionGroup(e,t,r,i){let s=Pi();const o=qO(t,r),a=qO(t,Hi.max());return Yu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,h,p)=>{const m=this.ir(De.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(m.key,m),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new FW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zO(e).get("remoteDocumentGlobalKey").next(t=>(Ue(!!t),t))}rr(e,t){return zO(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function wW(n,e){let t;if(e.document)t=fO(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=De.fromSegments(e.noDocument.path),i=qu(e.noDocument.readTime);t=yn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ne();{const r=De.fromSegments(e.unknownDocument.path),i=qu(e.unknownDocument.version);t=yn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Cn(i[0],i[1]);return Be.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Be.min()))return r}return yn.newInvalidDocument(e)}}function GO(n){return new VW(n)}class FW extends HO{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ho(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new en((s,o)=>rt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=EO(this.cr.serializer,o);i=i.add(s.path.popLast());const h=L_(u);r+=h-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=EO(this.cr.serializer,o.convertToNoDocument(Be.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function zO(n){return _r(n,"remoteDocumentGlobal")}function Yu(n){return _r(n,"remoteDocumentsV14")}function tp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qO(n,e){const t=e.documentKey.path.toArray();return[n,O_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WO(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=rt(t[s],r[s]),i)return i;return i=rt(t.length,r.length),i||(i=rt(t[t.length-2],r[r.length-2]),i||rt(t[t.length-1],r[r.length-1]))}class LW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class KO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&zf(r.mutation,i,Ri.empty(),Cn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ft()){const i=ro();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=$f();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ro();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ft()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Pi();const o=Hf(),a=Hf();return t.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(void 0===p||p.mutation instanceof Go)?s=s.insert(h.key,h):void 0!==p?(o.set(h.key,p.mutation.getFieldMask()),zf(p.mutation,h,p.mutation.getFieldMask(),Cn.now())):o.set(h.key,Ri.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),t.forEach((h,p)=>{var m;return a.set(h,new LW(p,null!==(m=o.get(h))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Hf();let i=new ln((o,a)=>o-a),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const h=t.get(u);if(null===h)return;let p=r.get(u)||Ri.empty();p=a.applyToLocalView(h,p),r.set(u,p);const m=(i.get(a.batchId)||ft()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),h=u.key,p=u.value,m=F1();p.forEach(y=>{if(!s.has(y)){const D=z1(t.get(y),r.get(y));null!==D&&m.set(y,D),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return De.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(ro());let a=-1,u=s;return o.next(h=>G.forEach(h,(p,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(p)?G.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ft())).next(p=>({batchId:a,changes:V1(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next(r=>{let i=$f();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=$f();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,u=>{const h=(m=t,y=u.child(s),new $o(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();null===o.get(p)&&(o=o.insert(p,yn.newInvalidDocument(p)))});let a=$f();return o.forEach((u,h)=>{const p=s.get(u);void 0!==p&&zf(p.mutation,h,Ri.empty(),Cn.now()),jf(t,h)&&(a=a.insert(u,h))}),a})}}class UW{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return G.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Yn(i.createTime)}),G.resolve();var i}getNamedQuery(e,t){return G.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:AT(i.bundledQuery),readTime:Yn(i.readTime)}),G.resolve();var i}}class BW{constructor(){this.overlays=new ln(De.comparator),this.Ir=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ro();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const i=ro(),s=t.length+1,o=new De(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ln((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=s.get(h.largestBatchId);null===p&&(p=ro(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const a=ro(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>a.set(h,p)),!(a.size()>=i)););return G.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vT(t,r));let s=this.Ir.get(t);void 0===s&&(s=ft(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class jW{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class NT{constructor(){this.Tr=new en(Er.Er),this.dr=new en(Er.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Er(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Er(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new De(new Rt([])),r=new Er(t,e),i=new Er(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new De(new Rt([])),r=new Er(t,e),i=new Er(t,e+1);let s=ft();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Er(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Er{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return De.comparator(e.key,t.key)||rt(e.wr,t.wr)}static Ar(e,t){return rt(e.wr,t.wr)||De.comparator(e.key,t.key)}}class $W{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new en(Er.Er)}checkEmpty(e){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new _T(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Er(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Er(t,0),i=new Er(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new en(rt);return t.forEach(i=>{const s=new Er(i,0),o=new Er(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;De.isDocumentKey(s)||(s=s.child(""));const o=new Er(new De(s),0);let a=new en(rt);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(a=a.add(u.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ue(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return G.forEach(t.mutations,i=>{const s=new Er(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Er(t,0),i=this.br.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return G.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HW{constructor(e){this.Mr=e,this.docs=new ln(De.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yn.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Pi();const o=t.path,a=new De(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||tT(zN(p),r)<=0||(i.has(p.key)||jf(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ne()}Or(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new GW(this)}getSize(e){return G.resolve(this.size)}}class GW extends HO{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class zW{constructor(e){this.persistence=e,this.Nr=new Ho(t=>$u(t),Uf),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new NT,this.targetCount=0,this.kr=Qu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),G.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Qu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Kn(t),G.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Br.containsKey(t))}}class OT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Gi(0),this.Kr=!1,this.Kr=!0,this.$r=new jW,this.referenceDelegate=e(this),this.Ur=new zW(this),this.indexManager=new PW,this.remoteDocumentCache=new HW(r=>this.referenceDelegate.Wr(r)),this.serializer=new IO(t),this.Gr=new UW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new $W(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const i=new qW(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class qW extends WN{constructor(e){super(),this.currentSequenceNumber=e}}class j_{constructor(e){this.persistence=e,this.Jr=new NT,this.Yr=null}static Zr(e){return new j_(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const i=De.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Be.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return G.or([()=>G.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class WW{constructor(e){this.serializer=e}O(e,t,r,i){const s=new m_("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",JN,{unique:!0}),u.createObjectStore("documentMutations"),ZO(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=G.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),ZO(e)),o=o.next(()=>function(u){const h=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Be.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,h){return h.store("mutations").U().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",JN,{unique:!0});const m=h.store("mutations"),y=p.map(D=>m.put(D));return G.waitFor(y)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const h=u.createObjectStore("documentOverlays",{keyPath:P6});h.createIndex("collectionPathOverlayIndex",M6,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",x6,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const h=u.createObjectStore("remoteDocumentsV14",{keyPath:v6});h.createIndex("documentKeyIndex",I6),h.createIndex("collectionGroupIndex",E6)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:A6}).createIndex("sequenceNumberIndex",b6,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:S6}).createIndex("documentKeyIndex",R6,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=L_(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>G.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>G.forEach(a,u=>{Ue(u.userId===s.userId);const h=Wu(this.serializer,u);return VO(e,s.userId,h).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new Rt(o),h=[0,Wr(u)];s.push(t.get(h).next(p=>p?G.resolve():t.put({targetId:0,path:Wr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>G.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:C6});const r=t.store("collectionParents"),i=new xT,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Wr(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new Rt(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],h)=>{const p=to(a);return s(p.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Yf(i),o=wO(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new De(Rt.fromString(m.document.name).popFirst(5)):m.noDocument?De.fromSegments(m.noDocument.path):m.unknownDocument?De.fromSegments(m.unknownDocument.path):Ne()).path.toArray(),h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(h))}).next(()=>G.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=GO(this.serializer),s=new OT(j_.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var h;let p=null!==(h=a.get(u.userId))&&void 0!==h?h:ft();Wu(this.serializer,u).keys().forEach(m=>p=p.add(m)),a.set(u.userId,p)}),G.forEach(a,(u,h)=>{const p=new Ir(h),m=k_.lt(this.serializer,p),y=s.getIndexManager(p),D=U_.lt(p,this.serializer,y,s.referenceDelegate);return new KO(i,D,m,y).recalculateAndSaveOverlaysForDocumentKeys(new sT(t,Gi.oe),u).next()})})}}function ZO(n){n.createObjectStore("targetDocuments",{keyPath:T6}).createIndex("documentTargetsIndex",D6,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",w6,{unique:!0}),n.createObjectStore("targetGlobal")}const kT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VT{constructor(e,t,r,i,s,o,a,u,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!VT.D())throw new de(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kW(this,i),this.Ai=t+"main",this.serializer=new IO(u),this.Ri=new eo(this.Ai,this.hi,new WW(this.serializer)),this.$r=new DW,this.Ur=new xW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GO(this.serializer),this.Gr=new TW,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===p&&Qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(Z.FAILED_PRECONDITION,kT);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Gi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ie.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>H_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ba(e))return fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return np(e).get("owner").next(t=>G.resolve(this.vi(t)))}Ci(e){return H_(e).delete(this.clientId)}Fi(){var e=this;return(0,ie.Z)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=_r(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return G.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?G.resolve(!0):np(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new de(Z.FAILED_PRECONDITION,kT);return!1}}return!(!this.networkEnabled||!this.inForeground)||H_(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ie.Z)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new sT(t,Gi.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>H_(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return U_.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MW(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return k_.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?k6:16===u?O6:15===u?iT:14===u?n1:13===u?t1:12===u?N6:11===u?e1:void Ne();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new sT(a,this.Qr?this.Qr.next():Gi.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new de(Z.FAILED_PRECONDITION,qN);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return np(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(Z.FAILED_PRECONDITION,kT)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return np(e).put("owner",t)}static D(){return eo.D()}bi(e){const t=np(e);return t.get("owner").next(r=>this.vi(r)?(fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,Ht.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function np(n){return _r(n,"owner")}function H_(n){return _r(n,"clientMetadata")}function FT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class LT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ft(),i=ft();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new LT(e,t.fromCache,r,i)}}class KW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Ht.G6)()?8:KN((0,Ht.z$)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new KW;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Hc()<=Js.in.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Hc()<=Js.in.DEBUG&&fe("QueryEngine","Query:",Jc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Hc()<=Js.in.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(t))):G.resolve())}Yi(e,t){if(R1(t))return G.resolve(null);let r=Kr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=b_(t,null,"F"),r=Kr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ft(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(t,a);return this.ns(t,h,o,u.readTime)?this.Yi(e,b_(t,null,"F")):this.rs(e,h,t,u)}))})))}Zi(e,t,r,i){return R1(t)||i.isEqual(Be.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?G.resolve(null):(Hc()<=Js.in.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jc(t)),this.rs(e,o,t,GN(i,-1)).next(a=>a))})}ts(e,t){let r=new en(O1(e));return t.forEach((i,s)=>{jf(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Hc()<=Js.in.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Hi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class ZW{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ln(rt),this._s=new Ho(s=>$u(s),Uf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function YO(n,e,t,r){return new ZW(n,e,t,r)}function JO(n,e){return UT.apply(this,arguments)}function UT(){return(UT=(0,ie.Z)(function*(n,e){const t=we(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ft();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return t.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function XO(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function ek(n,e,t){let r=ft(),i=ft();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Pi();return t.forEach((a,u)=>{const h=s.get(a);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||0===u.version.compareTo(h.version)&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):fe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function JW(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ld(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new zo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function cd(n,e,t){return BT.apply(this,arguments)}function BT(){return(BT=(0,ie.Z)(function*(n,e,t){const r=we(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ba(o))throw o;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function G_(n,e,t){const r=we(n);let i=Be.min(),s=ft();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=we(u),y=m._s.get(p);return void 0!==y?G.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)}(r,o,Kr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Be.min(),t?s:ft())).next(a=>(rk(r,N1(e),a),{documents:a,Ts:s})))}function tk(n,e){const t=we(n),r=we(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function nk(n,e){const t=we(n),r=t.us.get(e)||Be.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,GN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rk(t,e,i),i))}function rk(n,e,t){let r=n.us.get(e)||Be.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function jT(){return(jT=(0,ie.Z)(function*(n,e,t,r){const i=we(n);let s=ft(),o=Pi();for(const h of t){const p=e.Es(h.metadata.name);h.document&&(s=s.add(p));const m=e.ds(h);m.setReadTime(e.As(h.metadata.readTime)),o=o.insert(p,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield ld(i,(p=r,Kr(Qc(Rt.fromString(`__bundle__/docs/${p}`)))));var p;return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>ek(h,a,o).next(p=>(a.apply(h),p)).next(p=>i.Ur.removeMatchingKeysForTargetId(h,u.targetId).next(()=>i.Ur.addMatchingKeys(h,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,p.Ps,p.Is)).next(()=>p.Ps)))})).apply(this,arguments)}function e5(n,e){return $T.apply(this,arguments)}function $T(){return($T=(0,ie.Z)(function*(n,e,t=ft()){const r=yield ld(n,Kr(AT(e.bundledQuery))),i=we(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Yn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Ln.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function ik(n,e){return`firestore_clients_${n}_${e}`}function sk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HT(n,e){return`firestore_targets_${n}_${e}`}class z_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new de(i.error.code,i.error.message))),o?new z_(e,t,i.state,s):(Qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new de(r.error.code,r.error.message))),s?new rp(e,r.state,i):(Qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class q_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=pT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=QN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new q_(e,s):(Qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class GT{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new GT(t.clientId,t.onlineState):(Qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zT{constructor(){this.activeTargetIds=pT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qT{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ln(rt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=ik(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new zT),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ie.Z)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(ik(e.persistenceKey,i));if(s){const o=q_.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(HT(this.persistenceKey,e));if(i){const s=rp.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HT(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe("SharedClientState","READ",e,t),t}setItem(e,t){fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=Gi.oe;if(null!=o)try{const u=JSON.parse(o);Ue("number"==typeof u),a=u}catch(u){Qn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Gi.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new z_(this.currentUser,e,t,r),s=sk(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=sk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=HT(this.persistenceKey,e),s=new rp(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return q_.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return z_.Rs(new Ir(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return rp.Rs(i,t)}Ls(e){return GT.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=pT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ok{constructor(){this.so=new zT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class t5{_o(e){}shutdown(){}}class ak{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let W_=null;function WT(){return null===W_?W_=268435456+Math.round(2147483648*Math.random()):W_++,"0x"+W_.toString(16)}const n5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Qr="WebChannelConnection";class i5 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=WT(),u=this.xo(t,r.toUriEncodedString());fe("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(t,u,h,i).then(p=>(fe("RestConnection",`Received RPC '${t}' ${a}: `,p),p),p=>{throw Si("RestConnection",`RPC '${t}' ${a} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+$c,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${n5[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=WT();return new Promise((o,a)=>{const u=new NN;u.setWithCredentials(!0),u.listenOnce(kN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case g_.NO_ERROR:const p=u.getResponseJson();fe(Qr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case g_.TIMEOUT:fe(Qr,`RPC '${e}' ${s} timed out`),a(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case g_.HTTP_ERROR:const m=u.getStatus();if(fe(Qr,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const D=y?.error;if(D&&D.status&&D.message){const b=function(O){const z=O.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(z)>=0?z:Z.UNKNOWN}(D.status);a(new de(b,D.message))}else a(new de(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new de(Z.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{fe(Qr,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);fe(Qr,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}Bo(e,t,r){const i=WT(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LN(),a=FN(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;void 0!==h&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.xmlHttpFactory=new ON({})),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const p=s.join("");fe(Qr,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=o.createWebChannel(p,u);let y=!1,D=!1;const b=new r5({Io:O=>{D?fe(Qr,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(y||(fe(Qr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),fe(Qr,`RPC '${e}' stream ${i} sending:`,O),m.send(O))},To:()=>m.close()}),N=(O,z,te)=>{O.listen(z,L=>{try{te(L)}catch(le){setTimeout(()=>{throw le},0)}})};return N(m,Rf.EventType.OPEN,()=>{D||(fe(Qr,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),N(m,Rf.EventType.CLOSE,()=>{D||(D=!0,fe(Qr,`RPC '${e}' stream ${i} transport closed`),b.So())}),N(m,Rf.EventType.ERROR,O=>{D||(D=!0,Si(Qr,`RPC '${e}' stream ${i} transport errored:`,O),b.So(new de(Z.UNAVAILABLE,"The operation could not be completed")))}),N(m,Rf.EventType.MESSAGE,O=>{var z;if(!D){const te=O.data[0];Ue(!!te);const le=te.error||(null===(z=te[0])||void 0===z?void 0:z.error);if(le){fe(Qr,`RPC '${e}' stream ${i} received error:`,le);const Ce=le.status;let Ve=function(F){const B=or[F];if(void 0!==B)return J1(B)}(Ce),U=le.message;void 0===Ve&&(Ve=Z.INTERNAL,U="Unknown error status: "+Ce+" with message "+le.message),D=!0,b.So(new de(Ve,U)),m.close()}else fe(Qr,`RPC '${e}' stream ${i} received:`,te),b.bo(te)}}),N(a,VN.STAT_EVENT,O=>{O.stat===Jw.PROXY?fe(Qr,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Jw.NOPROXY&&fe(Qr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function uk(){return typeof window<"u"?window:null}function K_(){return typeof document<"u"?document:null}function ip(n){return new hW(n,!0)}class KT{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class lk{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new KT(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ie.Z)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ie.Z)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,ie.Z)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===Z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new de(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,ie.Z)(function*(){e.state=0,e.start()}))}I_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s5 extends lk{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function gW(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(h=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===h?1:"REMOVE"===h?2:"CURRENT"===h?3:"RESET"===h?4:Ne(),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(Ue(void 0===p||"string"==typeof p),Ln.fromBase64String(p||"")):(Ue(void 0===p||p instanceof Buffer||p instanceof Uint8Array),Ln.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const p=void 0===h.code?Z.UNKNOWN:J1(h.code);return new de(p,h.message||"")}(o);t=new rO(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=io(n,r.document.name),s=Yn(r.document.updateTime),o=r.document.createTime?Yn(r.document.createTime):Be.min(),a=new Mr({mapValue:{fields:r.document.fields}}),u=yn.newFoundDocument(i,s,o,a);t=new x_(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=io(n,r.document),s=r.readTime?Yn(r.readTime):Be.min(),o=yn.newNoDocument(i,s);t=new x_([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=io(n,r.document);t=new x_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ne();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new oW(i,s);t=new nO(r.targetId,o)}}var h;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?Yn(o.readTime):Be.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=DT(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=C_(u)?{documents:pO(s,u)}:{query:N_(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aO(s,o.resumeToken);const h=ET(s,o.expectedCount);null!==h&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(Be.min())>0){a.readTime=rd(s,o.snapshotVersion.toTimestamp());const h=ET(s,o.expectedCount);null!==h&&(a.expectedCount=h)}return a}(this.serializer,e);const r=function _W(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=DT(this.serializer),t.removeTarget=e,this.a_(t)}}class o5 extends lk{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function mW(n,e){return n&&n.length>0?(Ue(void 0!==e),n.map(t=>function(i,s){let o=Yn(i.updateTime?i.updateTime:s);return o.isEqual(Be.min())&&(o=Yn(s)),new rW(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=DT(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qf(this.serializer,r))};this.a_(t)}}class a5 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,TT(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(Z.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,TT(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(Z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class u5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qn(t),this.D_=!1):fe("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class l5{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,ie.Z)(function*(){var u;La(o)&&(fe("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ie.Z)(function*(p){const m=we(p);m.L_.add(4),yield dd(m),m.q_.set("Unknown"),m.L_.delete(4),yield sp(m)}),function h(p){return u.apply(this,arguments)})(o))}))}),this.q_=new u5(r,i)}}function sp(n){return ZT.apply(this,arguments)}function ZT(){return(ZT=(0,ie.Z)(function*(n){if(La(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function dd(n){return QT.apply(this,arguments)}function QT(){return(QT=(0,ie.Z)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Z_(n,e){const t=we(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),XT(t)?JT(t):pd(t).r_()&&YT(t,e))}function hd(n,e){const t=we(n),r=pd(t);t.N_.delete(e),r.r_()&&ck(t,e),0===t.N_.size&&(r.r_()?r.o_():La(t)&&t.q_.set("Unknown"))}function YT(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pd(n).A_(e)}function ck(n,e){n.Q_.xe(e),pd(n).R_(e)}function JT(n){n.Q_=new uW({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),pd(n).start(),n.q_.v_()}function XT(n){return La(n)&&!pd(n).n_()&&n.N_.size>0}function La(n){return 0===we(n).L_.size}function dk(n){n.Q_=void 0}function c5(n){return eD.apply(this,arguments)}function eD(){return(eD=(0,ie.Z)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function d5(n){return tD.apply(this,arguments)}function tD(){return(tD=(0,ie.Z)(function*(n){n.N_.forEach((e,t)=>{YT(n,e)})})).apply(this,arguments)}function h5(n,e){return nD.apply(this,arguments)}function nD(){return(nD=(0,ie.Z)(function*(n,e){dk(n),XT(n)?(n.q_.M_(e),JT(n)):n.q_.set("Unknown")})).apply(this,arguments)}function f5(n,e,t){return rD.apply(this,arguments)}function rD(){return rD=(0,ie.Z)(function*(n,e,t){if(n.q_.set("Online"),e instanceof rO&&2===e.state&&e.cause)try{yield(r=(0,ie.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Q_(n,r)}else if(e instanceof x_?n.Q_.Ke(e):e instanceof nO?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Be.min()))try{const r=yield XO(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,h)=>{const p=s.N_.get(u);if(!p)return;s.N_.set(u,p.withResumeToken(Ln.EMPTY_BYTE_STRING,p.snapshotVersion)),ck(s,u);const m=new zo(p.target,u,h,p.sequenceNumber);YT(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){fe("RemoteStore","Failed to raise snapshot:",r),yield Q_(n,r)}var r}),rD.apply(this,arguments)}function Q_(n,e,t){return iD.apply(this,arguments)}function iD(){return(iD=(0,ie.Z)(function*(n,e,t){if(!ba(e))throw e;n.L_.add(1),yield dd(n),n.q_.set("Offline"),t||(t=()=>XO(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.Z)(function*(){fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield sp(n)}))})).apply(this,arguments)}function hk(n,e){return e().catch(t=>Q_(n,t,e))}function fd(n){return sD.apply(this,arguments)}function sD(){return(sD=(0,ie.Z)(function*(n){const e=we(n),t=Ua(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;p5(e);)try{const i=yield JW(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,g5(e,i)}catch(i){yield Q_(e,i)}fk(e)&&pk(e)})).apply(this,arguments)}function p5(n){return La(n)&&n.O_.length<10}function g5(n,e){n.O_.push(e);const t=Ua(n);t.r_()&&t.V_&&t.m_(e.mutations)}function fk(n){return La(n)&&!Ua(n).n_()&&n.O_.length>0}function pk(n){Ua(n).start()}function m5(n){return oD.apply(this,arguments)}function oD(){return(oD=(0,ie.Z)(function*(n){Ua(n).p_()})).apply(this,arguments)}function _5(n){return aD.apply(this,arguments)}function aD(){return(aD=(0,ie.Z)(function*(n){const e=Ua(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function y5(n,e,t){return uD.apply(this,arguments)}function uD(){return(uD=(0,ie.Z)(function*(n,e,t){const r=n.O_.shift(),i=yT.from(r,e,t);yield hk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield fd(n)})).apply(this,arguments)}function v5(n,e){return lD.apply(this,arguments)}function lD(){return lD=(0,ie.Z)(function*(n,e){var t;e&&Ua(n).V_&&(yield(t=(0,ie.Z)(function*(i,s){if(Y1(a=s.code)&&a!==Z.ABORTED){const o=i.O_.shift();Ua(i).s_(),yield hk(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield fd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),fk(n)&&pk(n)}),lD.apply(this,arguments)}function gk(n,e){return cD.apply(this,arguments)}function cD(){return(cD=(0,ie.Z)(function*(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const r=La(t);t.L_.add(3),yield dd(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield sp(t)})).apply(this,arguments)}function dD(n,e){return hD.apply(this,arguments)}function hD(){return(hD=(0,ie.Z)(function*(n,e){const t=we(n);e?(t.L_.delete(2),yield sp(t)):e||(t.L_.add(2),yield dd(t),t.q_.set("Unknown"))})).apply(this,arguments)}function pd(n){return n.K_||(n.K_=function(t,r,i){const s=we(t);return s.w_(),new s5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:c5.bind(null,n),Ro:d5.bind(null,n),mo:h5.bind(null,n),d_:f5.bind(null,n)}),n.B_.push(function(){var e=(0,ie.Z)(function*(t){t?(n.K_.s_(),XT(n)?JT(n):n.q_.set("Unknown")):(yield n.K_.stop(),dk(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Ua(n){return n.U_||(n.U_=function(t,r,i){const s=we(t);return s.w_(),new o5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:m5.bind(null,n),mo:v5.bind(null,n),f_:_5.bind(null,n),g_:y5.bind(null,n)}),n.B_.push(function(){var e=(0,ie.Z)(function*(t){t?(n.U_.s_(),yield fd(n)):(yield n.U_.stop(),n.O_.length>0&&(fe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class fD{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new fD(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gd(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),ba(n))return new de(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class md{constructor(e){this.comparator=e?(t,r)=>e(t,r)||De.comparator(t.key,r.key):(t,r)=>De.comparator(t.key,r.key),this.keyedMap=$f(),this.sortedSet=new ln(this.comparator)}static emptySet(e){return new md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new md;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mk{constructor(){this.W_=new ln(De.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class _d{constructor(e,t,r,i,s,o,a,u,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new _d(e,t,md.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class I5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class E5{constructor(){this.queries=_k(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=we(t),s=i.queries;i.queries=_k(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new de(Z.ABORTED,"Firestore shutting down"))}}function _k(){return new Ho(n=>x1(n),Bf)}function pD(n,e){return gD.apply(this,arguments)}function gD(){return(gD=(0,ie.Z)(function*(n,e){const t=we(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new I5,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=gd(o,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&yD(t)})).apply(this,arguments)}function mD(n,e){return _D.apply(this,arguments)}function _D(){return(_D=(0,ie.Z)(function*(n,e){const t=we(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function w5(n,e){const t=we(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&yD(t)}function T5(n,e,t){const r=we(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function yD(n){n.Y_.forEach(e=>{e.next()})}var vD,yk;(yk=vD||(vD={})).ea="default",yk.Cache="cache";class ID{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new _d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=_d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vD.Cache}}class D5{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class vk{constructor(e){this.serializer=e}Es(e){return io(this.serializer,e)}ds(e){return e.metadata.exists?fO(this.serializer,e.document,!1):yn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Yn(e)}}class C5{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ik(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Rt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new vk(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ft()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ie.Z)(function*(){const t=yield function XW(n,e,t,r){return jT.apply(this,arguments)}(e.localStore,new vk(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield e5(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function Ik(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ek{constructor(e){this.key=e}}class wk{constructor(e){this.key=e}}class Tk{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ft(),this.mutatedKeys=ft(),this.Aa=O1(e),this.Ra=new md(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new mk,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,h="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const y=i.get(p),D=jf(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),N=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let O=!1;y&&D?y.data.isEqual(D.data)?b!==N&&(r.track({type:3,doc:D}),O=!0):this.ga(y,D)||(r.track({type:2,doc:D}),O=!0,(u&&this.Aa(D,u)>0||h&&this.Aa(D,h)<0)&&(a=!0)):!y&&D?(r.track({type:0,doc:D}),O=!0):y&&!D&&(r.track({type:1,doc:y}),O=!0,(u||h)&&(a=!0)),O&&(D?(o=o.add(D),s=N?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const p="F"===this.query.limitType?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(D,b){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return N(D)-N(b)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,0!==o.length||h?{snapshot:new _d(this.query,e.Ra,s,o,e.mutatedKeys,0===u,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mk,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ft(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new wk(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ek(r))}),t}ba(e){this.Ta=e.Ts,this.da=ft();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return _d.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class A5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class b5{constructor(e){this.key=e,this.va=!1}}class S5{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ho(a=>x1(a),Bf),this.Ma=new Map,this.xa=new Set,this.Oa=new ln(De.comparator),this.Na=new Map,this.La=new NT,this.Ba={},this.ka=new Map,this.qa=Qu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function R5(n,e){return ED.apply(this,arguments)}function ED(){return(ED=(0,ie.Z)(function*(n,e,t=!0){const r=Y_(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Dk(r,e,t,!0),i})).apply(this,arguments)}function P5(n,e){return wD.apply(this,arguments)}function wD(){return(wD=(0,ie.Z)(function*(n,e){const t=Y_(n);yield Dk(t,e,!0,!1)})).apply(this,arguments)}function Dk(n,e,t,r){return TD.apply(this,arguments)}function TD(){return(TD=(0,ie.Z)(function*(n,e,t,r){const i=yield ld(n.localStore,Kr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield DD(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Z_(n.remoteStore,i),a})).apply(this,arguments)}function DD(n,e,t,r,i){return CD.apply(this,arguments)}function CD(){return CD=(0,ie.Z)(function*(n,e,t,r,i){n.Ka=(m,y,D)=>{return(b=(0,ie.Z)(function*(O,z,te,L){let le=z.view.ma(te);le.ns&&(le=yield G_(O.localStore,z.query,!1).then(({documents:M})=>z.view.ma(M,le)));const Ce=L&&L.targetChanges.get(z.targetId),Ve=L&&null!=L.targetMismatches.get(z.targetId),U=z.view.applyChanges(le,O.isPrimaryClient,Ce,Ve);return VD(O,z.targetId,U.wa),U.snapshot}),function N(O,z,te,L){return b.apply(this,arguments)})(n,m,y,D);var b};const s=yield G_(n.localStore,e,!0),o=new Tk(e,s.Ts),a=o.ma(s.documents),u=Kf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),h=o.applyChanges(a,n.isPrimaryClient,u);VD(n,t,h.wa);const p=new A5(e,t,o);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot}),CD.apply(this,arguments)}function M5(n,e,t){return AD.apply(this,arguments)}function AD(){return(AD=(0,ie.Z)(function*(n,e,t){const r=we(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Bf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&hd(r.remoteStore,i.targetId),yd(r,i.targetId)}).catch(Aa))):(yd(r,i.targetId),yield cd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function x5(n,e){return bD.apply(this,arguments)}function bD(){return(bD=(0,ie.Z)(function*(n,e){const t=we(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hd(t.remoteStore,r.targetId))})).apply(this,arguments)}function SD(){return(SD=(0,ie.Z)(function*(n,e,t){const r=WD(n);try{const i=yield function(o,a){const u=we(o),h=Cn.now(),p=a.reduce((D,b)=>D.add(b.key),ft());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",D=>{let b=Pi(),N=ft();return u.cs.getEntries(D,p).next(O=>{b=O,b.forEach((z,te)=>{te.isValidDocument()||(N=N.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(D,b)).next(O=>{m=O;const z=[];for(const te of a){const L=sW(te,m.get(te.key).overlayedDocument);null!=L&&z.push(new Go(te.key,L,m1(L.value.mapValue),bn.exists(!0)))}return u.mutationQueue.addMutationBatch(D,h,z,a)}).next(O=>{y=O;const z=O.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(D,O.batchId,z)})}).then(()=>({batchId:y.batchId,changes:V1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new ln(rt)),h=h.insert(a,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,t),yield qo(r,i.changes),yield fd(r.remoteStore)}catch(i){const s=gd(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function Ck(n,e){return RD.apply(this,arguments)}function RD(){return(RD=(0,ie.Z)(function*(n,e){const t=we(n);try{const r=yield function YW(n,e){const t=we(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((p,m)=>{const y=i.get(m);if(!y)return;a.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,m)));let D=y.withSequenceNumber(s.currentSequenceNumber);var N,O,z;null!==e.targetMismatches.get(m)?D=D.withResumeToken(Ln.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):p.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(p.resumeToken,r)),i=i.insert(m,D),O=D,z=p,(0===(N=y).resumeToken.approximateByteSize()||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,D))});let u=Pi(),h=ft();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(ek(s,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(Be.min())){const p=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ue(o.va):i.removedDocuments.size>0&&(Ue(o.va),o.va=!1))}),yield qo(t,r,e)}catch(r){yield Aa(r)}})).apply(this,arguments)}function Ak(n,e,t){const r=we(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=we(o);u.onlineState=a;let h=!1;u.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(a)&&(h=!0)}),h&&yD(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O5(n,e,t){return PD.apply(this,arguments)}function PD(){return(PD=(0,ie.Z)(function*(n,e,t){const r=we(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ln(De.comparator);o=o.insert(s,yn.newNoDocument(s,Be.min()));const a=ft().add(s),u=new Wf(Be.min(),new Map,new ln(rt),o,a);yield Ck(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),FD(r)}else yield cd(r.localStore,e,!1).then(()=>yd(r,e,t)).catch(Aa)})).apply(this,arguments)}function k5(n,e){return MD.apply(this,arguments)}function MD(){return(MD=(0,ie.Z)(function*(n,e){const t=we(n),r=e.batch.batchId;try{const i=yield function QW(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,h,p){const m=h.batch,y=m.keys();let D=G.resolve();return y.forEach(b=>{D=D.next(()=>p.getEntry(u,b)).next(N=>{const O=h.docVersions.get(b);Ue(null!==O),N.version.compareTo(O)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),D.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ft();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(u=u.add(a.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);kD(t,r,null),OD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qo(t,i)}catch(i){yield Aa(i)}})).apply(this,arguments)}function V5(n,e,t){return xD.apply(this,arguments)}function xD(){return(xD=(0,ie.Z)(function*(n,e,t){const r=we(n);try{const i=yield function(o,a){const u=we(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,a).next(m=>(Ue(null!==m),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);kD(r,e,t),OD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qo(r,i)}catch(i){yield Aa(i)}})).apply(this,arguments)}function ND(){return(ND=(0,ie.Z)(function*(n,e){const t=we(n);La(t.remoteStore)||fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=we(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=gd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function OD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function kD(n,e,t){const r=we(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function yd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||bk(n,r)})}function bk(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(hd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),FD(n))}function VD(n,e,t){for(const r of t)r instanceof Ek?(n.La.addReference(r.key,e),L5(n,r)):r instanceof wk?(fe("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||bk(n,r.key)):Ne()}function L5(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(fe("SyncEngine","New document in limbo: "+t),n.xa.add(r),FD(n))}function FD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new De(Rt.fromString(e)),r=n.qa.next();n.Na.set(r,new b5(t)),n.Oa=n.Oa.insert(t,r),Z_(n.remoteStore,new zo(Kr(Qc(t.path)),r,"TargetPurposeLimboResolution",Gi.oe))}}function qo(n,e,t){return LD.apply(this,arguments)}function LD(){return LD=(0,ie.Z)(function*(n,e,t){const r=we(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(h=>{var p;if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:null===(p=t?.targetChanges.get(u.targetId))||void 0===p?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=LT.Wi(u.targetId,h);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,ie.Z)(function*(h,p){const m=we(h);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>G.forEach(p,D=>G.forEach(D.$i,b=>m.persistence.referenceDelegate.addReference(y,D.targetId,b)).next(()=>G.forEach(D.Ui,b=>m.persistence.referenceDelegate.removeReference(y,D.targetId,b)))))}catch(y){if(!ba(y))throw y;fe("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const D=y.targetId;if(!y.fromCache){const b=m.os.get(D),O=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);m.os=m.os.insert(D,O)}}}),function u(h,p){return a.apply(this,arguments)})(r.localStore,s))}),LD.apply(this,arguments)}function U5(n,e){return UD.apply(this,arguments)}function UD(){return(UD=(0,ie.Z)(function*(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const r=yield JO(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new de(Z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qo(t,r.hs)}var s})).apply(this,arguments)}function B5(n,e){const t=we(n),r=t.Na.get(e);if(r&&r.va)return ft().add(r.key);{let i=ft();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function j5(n,e){return BD.apply(this,arguments)}function BD(){return(BD=(0,ie.Z)(function*(n,e){const t=we(n),r=yield G_(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&VD(t,e.targetId,i.wa),i})).apply(this,arguments)}function $5(n,e){return jD.apply(this,arguments)}function jD(){return(jD=(0,ie.Z)(function*(n,e){const t=we(n);return nk(t.localStore,e).then(r=>qo(t,r))})).apply(this,arguments)}function H5(n,e,t,r){return $D.apply(this,arguments)}function $D(){return($D=(0,ie.Z)(function*(n,e,t,r){const i=we(n),s=yield function(a,u){const h=we(a),p=we(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",m=>p.Mn(m,u).next(y=>y?h.localDocuments.getDocuments(m,y):G.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield fd(i.remoteStore):"acknowledged"===t||"rejected"===t?(kD(i,e,r||null),OD(i,e),u=e,we(we(i.localStore).mutationQueue).On(u)):Ne(),yield qo(i,s)):fe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function HD(){return(HD=(0,ie.Z)(function*(n,e){const t=we(n);if(Y_(t),WD(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Sk(t,r.toArray());t.Qa=!0,yield dD(t.remoteStore,!0);for(const s of i)Z_(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(yd(t,o),cd(t.localStore,o,!0))),hd(t.remoteStore,o)}),yield i,yield Sk(t,r),function(o){const a=we(o);a.Na.forEach((u,h)=>{hd(a.remoteStore,h)}),a.La.pr(),a.Na=new Map,a.Oa=new ln(De.comparator)}(t),t.Qa=!1,yield dD(t.remoteStore,!1)}})).apply(this,arguments)}function Sk(n,e,t){return GD.apply(this,arguments)}function GD(){return(GD=(0,ie.Z)(function*(n,e,t){const r=we(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield ld(r.localStore,Kr(u[0]));for(const h of u){const p=r.Fa.get(h),m=yield j5(r,p);m.snapshot&&s.push(m.snapshot)}}else{const h=yield tk(r.localStore,o);a=yield ld(r.localStore,h),yield DD(r,Rk(h),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function Rk(n){return S1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function z5(n){return t=we(n).localStore,we(we(t).persistence).Qi();var t}function q5(n,e,t,r){return zD.apply(this,arguments)}function zD(){return(zD=(0,ie.Z)(function*(n,e,t,r){const i=we(n);if(i.Qa)return void fe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield nk(i.localStore,N1(s[0])),a=Wf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ln.EMPTY_BYTE_STRING);yield qo(i,o,a);break}case"rejected":yield cd(i.localStore,e,!0),yd(i,e,r);break;default:Ne()}})).apply(this,arguments)}function W5(n,e,t){return qD.apply(this,arguments)}function qD(){return(qD=(0,ie.Z)(function*(n,e,t){const r=Y_(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){fe("SyncEngine","Adding an already active target "+i);continue}const s=yield tk(r.localStore,i),o=yield ld(r.localStore,s);yield DD(r,Rk(s),o.targetId,!1,o.resumeToken),Z_(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield cd(r.localStore,i,!1).then(()=>{hd(r.remoteStore,i),yd(r,i)}).catch(Aa))}})).apply(this,arguments)}function Y_(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ck.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O5.bind(null,e),e.Ca.d_=w5.bind(null,e.eventManager),e.Ca.$a=T5.bind(null,e.eventManager),e}function WD(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V5.bind(null,e),e}class op{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ie.Z)(function*(){t.serializer=ip(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return YO(this.persistence,new QO,e.initialUser,this.serializer)}createPersistence(e){return new OT(j_.Zr,this.serializer)}createSharedClientState(e){return new ok}terminate(){var e=this;return(0,ie.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KD extends op{constructor(e,t,r){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.Z)(function*(){yield t().call(r,e),yield r.Wa.initialize(r,e),yield WD(r.Wa.syncEngine),yield fd(r.Wa.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return YO(this.persistence,new QO,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new jO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new m6(t,this.persistence);return new g6(e.asyncQueue,r)}createPersistence(e){const t=FT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Zr.withCacheSize(this.cacheSizeBytes):Zr.DEFAULT;return new VT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uk(),K_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ok}}class Pk extends KD{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.Z)(function*(){yield t().call(r,e);const i=r.Wa.syncEngine;r.sharedClientState instanceof qT&&(r.sharedClientState.syncEngine={no:H5.bind(null,i),ro:q5.bind(null,i),io:W5.bind(null,i),Qi:z5.bind(null,i),eo:$5.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,ie.Z)(function*(o){yield function G5(n,e){return HD.apply(this,arguments)}(r.Wa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=uk();if(!qT.D(t))throw new de(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class vd{initialize(e,t){var r=this;return(0,ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Ak(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=U5.bind(null,r.syncEngine),yield dD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new E5}createDatastore(e){const t=ip(e.databaseInfo.databaseId),r=new i5(e.databaseInfo);return new a5(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>Ak(this.syncEngine,t,0),a=ak.D()?new ak:new t5,new l5(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,u,h,p){const m=new S5(i,s,o,a,u,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ie.Z)(function*(){var t,r,i;yield(i=(0,ie.Z)(function*(o){const a=we(o);fe("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield dd(a),a.k_.shutdown(),a.q_.set("Unknown")}),function s(o){return i.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate(),null===(r=e.eventManager)||void 0===r||r.terminate()})()}}function Mk(n,e=10240){let t=0;return{read:()=>(0,ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class J_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Q5{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new mr,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){var e=this;return(0,ie.Z)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ie.Z)(function*(){return yield e.getMetadata(),e.Ja()})()}Ja(){var e=this;return(0,ie.Z)(function*(){const t=yield e.Ya();if(null===t)return null;const r=e.Ha.decode(t),i=Number(r);isNaN(i)&&e.Za(`length string (${r}) is not valid number`);const s=yield e.Xa(i);return new D5(JSON.parse(s),t.length+i)})()}eu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ya(){var e=this;return(0,ie.Z)(function*(){for(;e.eu()<0&&!(yield e.tu()););if(0===e.buffer.length)return null;const t=e.eu();t<0&&e.Za("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Xa(e){var t=this;return(0,ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.tu())&&t.Za("Reached the end of bundle when more is expected.");const r=t.Ha.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){var e=this;return(0,ie.Z)(function*(){const t=yield e.ja.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Y5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new de(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ie.Z)(function*(o,a){const u=we(o),h={documents:a.map(D=>Zf(u.serializer,D))},p=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,Rt.emptyPath(),h,a.length),m=new Map;p.forEach(D=>{const b=function pW(n,e){return"found"in e?function(r,i){Ue(!!i.found);const s=io(r,i.found.name),o=Yn(i.found.updateTime),a=i.found.createTime?Yn(i.found.createTime):Be.min(),u=new Mr({mapValue:{fields:i.found.fields}});return yn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Ue(!!i.missing),Ue(!!i.readTime);const s=io(r,i.missing),o=Yn(i.readTime);return yn.newNoDocument(s,o)}(n,e):Ne()}(u.serializer,D);m.set(b.key.toString(),b)});const y=[];return a.forEach(D=>{const b=m.get(D.toString());Ue(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=De.fromPath(i);e.mutations.push(new mT(s,e.precondition(s)))}),yield(r=(0,ie.Z)(function*(s,o){const a=we(s),u={writes:o.map(h=>Qf(a.serializer,h))};yield a.Mo("Commit",a.serializer.databaseId,Rt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ne();t=Be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new de(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Be.min())?bn.exists(!1):bn.updateTime(t):bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Be.min()))throw new de(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bn.updateTime(t)}return bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class J5{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new KT(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var e=this;this.t_.Go((0,ie.Z)(function*(){const t=new Y5(e.datastore),r=e.su(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ou(s)}))}).catch(i=>{e.ou(i)})}))}su(e){try{const t=this.updateFunction(e);return!xf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Y1(t)}return!1}}class X5{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=$N.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,ie.Z)(function*(a){fe("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(fe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=gd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function X_(n,e){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ie.Z)(function*(s){r.isEqual(s)||(yield JO(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),ZD.apply(this,arguments)}function QD(n,e){return YD.apply(this,arguments)}function YD(){return(YD=(0,ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JD(n);fe("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>gk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>gk(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function xk(n){return"FirebaseError"===n.name?n.code===Z.FAILED_PRECONDITION||n.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function JD(n){return XD.apply(this,arguments)}function XD(){return(XD=(0,ie.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield X_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!xk(t))throw t;Si("Error using user provided cache. Falling back to memory cache: "+t),yield X_(n,new op)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),yield X_(n,new op);return n._offlineComponents})).apply(this,arguments)}function ey(n){return eC.apply(this,arguments)}function eC(){return(eC=(0,ie.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield QD(n,n._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),yield QD(n,new vd))),n._onlineComponents})).apply(this,arguments)}function Nk(n){return JD(n).then(e=>e.persistence)}function Id(n){return JD(n).then(e=>e.localStore)}function Ok(n){return ey(n).then(e=>e.remoteStore)}function tC(n){return ey(n).then(e=>e.syncEngine)}function Ed(n){return nC.apply(this,arguments)}function nC(){return(nC=(0,ie.Z)(function*(n){const e=yield ey(n),t=e.eventManager;return t.onListen=R5.bind(null,e.syncEngine),t.onUnlisten=M5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=x5.bind(null,e.syncEngine),t})).apply(this,arguments)}function Vk(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(s,o,a,u,h){const p=new J_({next:y=>{o.enqueueAndForget(()=>mD(s,m));const D=y.docs.has(a);!D&&y.fromCache?h.reject(new de(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&y.fromCache&&u&&"server"===u.source?h.reject(new de(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new ID(Qc(a.path),p,{includeMetadataChanges:!0,_a:!0});return pD(s,m)}(yield Ed(n),n.asyncQueue,e,t,r)})),r.promise}function Fk(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(s,o,a,u,h){const p=new J_({next:y=>{o.enqueueAndForget(()=>mD(s,m)),y.fromCache&&"server"===u.source?h.reject(new de(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new ID(a,p,{includeMetadataChanges:!0,_a:!0});return pD(s,m)}(yield Ed(n),n.asyncQueue,e,t,r)})),r.promise}function Lk(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Uk=new Map;function rC(n,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Bk(n,e,t,r){if(!0===e&&!0===r)throw new de(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jk(n){if(!De.isDocumentKey(n))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $k(n){if(De.isDocumentKey(n))throw new de(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ty(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ne()}function wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ty(n);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Hk(n,e){if(e<=0)throw new de(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Gk{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Lk(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ap{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gk(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new r6;switch(r.type){case"firstParty":return new a6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Uk.get(t);r&&(fe("ComponentProvider","Removing Datastore"),Uk.delete(t),r.terminate())}(this),Promise.resolve()}}class xr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class so extends xr{constructor(e,t,r){super(e,t,Qc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new De(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function qk(n,e,...t){if(n=(0,Ht.m9)(n),rC("collection","path",e),n instanceof ap){const r=Rt.fromString(e,...t);return $k(r),new so(n,null,r)}{if(!(n instanceof vn||n instanceof so))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return $k(r),new so(n.firestore,null,r)}}function ny(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=$N.newId()),rC("doc","path",e),n instanceof ap){const r=Rt.fromString(e,...t);return jk(r),new vn(n,null,new De(r))}{if(!(n instanceof vn||n instanceof so))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rt.fromString(e,...t));return jk(r),new vn(n.firestore,n instanceof so?n.converter:null,new De(r))}}function Wk(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof vn||n instanceof so)&&(e instanceof vn||e instanceof so)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iC(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof xr&&e instanceof xr&&n.firestore===e.firestore&&Bf(n._query,e._query)&&n.converter===e.converter}class h8{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new KT(this,"async_queue_retry"),this.Eu=()=>{const t=K_();t&&fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};const e=K_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const t=K_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const t=new mr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){var e=this;return(0,ie.Z)(function*(){if(0!==e.uu.length){try{yield e.uu[0](),e.uu.shift(),e.t_.reset()}catch(t){if(!ba(t))throw t;fe("AsyncQueue","Operation failed with retryable error: "+t)}e.uu.length>0&&e.t_.Go(()=>e.Ru())}})()}Au(e){const t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{throw this.hu=r,this.Pu=!1,Qn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);const i=fD.createAndSchedule(this,e,t,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&Ne()}verifyOperationInProgress(){}mu(){var e=this;return(0,ie.Z)(function*(){let t;do{t=e.au,yield t}while(t!==e.au)})()}fu(e){for(const t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.lu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const t=this.lu.indexOf(e);this.lu.splice(t,1)}}function sC(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class f8{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tn extends ap{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new h8,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kk(this),this._firestoreClient.terminate()}}function Sn(n){return n._firestoreClient||Kk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Kk(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new L6(n._databaseId,u,n._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Lk(p.experimentalLongPollingOptions),p.useFetchStreams));var u,p;n._firestoreClient=new X5(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Zk(n,e,t){const r=new mr;return n.asyncQueue.enqueue((0,ie.Z)(function*(){try{yield X_(n,t),yield QD(n,e),r.resolve()}catch(i){const s=i;if(!xk(s))throw s;Si("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function Qk(n){if(n._initialized||n._terminated)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oo(Ln.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oo(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ju{constructor(e){this._methodName=e}}class ry{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}class iy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const D8=/^__.*__$/;class C8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Go(e,this.data,this.fieldMask,t,this.fieldTransforms):new td(e,this.data,t,this.fieldTransforms)}}class Yk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Go(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class sy{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new sy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return uy(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(0===e.length)throw this.Mu("Document fields must not be empty");if(Jk(this.wu)&&D8.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class A8{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ip(e)}Nu(e,t,r,i=!1){return new sy({wu:e,methodName:t,Ou:r,path:_n.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xu(n){const e=n._freezeSettings(),t=ip(n._databaseId);return new A8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oy(n,e,t,r,i,s={}){const o=n.Nu(s.merge||s.mergeFields?2:0,e,t,i);hC("Data must be an object, but it was:",o,r);const a=tV(r,o);let u,h;if(s.merge)u=new Ri(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const y=cp(e,m,t);if(!o.contains(y))throw new de(Z.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);rV(p,y)||p.push(y)}u=new Ri(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new C8(new Mr(a),u,h)}class lp extends Ju{_toFieldTransform(e){if(2!==e.wu)throw e.Mu(1===e.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lp}}function Xk(n,e,t){return new sy({wu:3,Ou:e.settings.Ou,methodName:n._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class oC extends Ju{_toFieldTransform(e){return new Gf(e.path,new Xc)}isEqual(e){return e instanceof oC}}class aC extends Ju{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=Xk(this,e,!0),r=this.Lu.map(s=>el(s,t)),i=new Hu(r);return new Gf(e.path,i)}isEqual(e){return e instanceof aC&&(0,Ht.vZ)(this.Lu,e.Lu)}}class uC extends Ju{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=Xk(this,e,!0),r=this.Lu.map(s=>el(s,t)),i=new Gu(r);return new Gf(e.path,i)}isEqual(e){return e instanceof uC&&(0,Ht.vZ)(this.Lu,e.Lu)}}class lC extends Ju{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=new ed(e.serializer,U1(e.serializer,this.Bu));return new Gf(e.path,t)}isEqual(e){return e instanceof lC&&this.Bu===e.Bu}}function cC(n,e,t,r){const i=n.Nu(1,e,t);hC("Data must be an object, but it was:",i,r);const s=[],o=Mr.empty();Sa(r,(u,h)=>{const p=ay(e,u,t);h=(0,Ht.m9)(h);const m=i.Cu(p);if(h instanceof lp)s.push(p);else{const y=el(h,m);null!=y&&(s.push(p),o.set(p,y))}});const a=new Ri(s);return new Yk(o,a,i.fieldTransforms)}function dC(n,e,t,r,i,s){const o=n.Nu(1,e,t),a=[cp(e,r,t)],u=[i];if(s.length%2!=0)throw new de(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(cp(e,s[y])),u.push(s[y+1]);const h=[],p=Mr.empty();for(let y=a.length-1;y>=0;--y)if(!rV(h,a[y])){const D=a[y];let b=u[y];b=(0,Ht.m9)(b);const N=o.Cu(D);if(b instanceof lp)h.push(D);else{const O=el(b,N);null!=O&&(h.push(D),p.set(D,O))}}const m=new Ri(h);return new Yk(p,m,o.fieldTransforms)}function eV(n,e,t,r=!1){return el(t,n.Nu(r?4:3,e))}function el(n,e){if(nV(n=(0,Ht.m9)(n)))return hC("Unsupported field value:",e,n),tV(n,e);if(n instanceof Ju)return function(r,i){if(!Jk(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&4!==e.wu)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=el(a,i.Fu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Ht.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return U1(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Cn.fromDate(r);return{timestampValue:rd(i.serializer,s)}}if(r instanceof Cn){const s=new Cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rd(i.serializer,s)}}if(r instanceof ry)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oo)return{bytesValue:aO(i.serializer,r._byteString)};if(r instanceof vn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof iy)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Mu("VectorValues must only contain numeric values.");return gT(a.serializer,u)})}}}}};var a;throw i.Mu(`Unsupported field value: ${ty(r)}`)}(n,e)}function tV(n,e){const t={};return s1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(n,(r,i)=>{const s=el(i,e.bu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function nV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Cn||n instanceof ry||n instanceof oo||n instanceof vn||n instanceof Ju||n instanceof iy)}function hC(n,e,t){if(!nV(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=ty(t);throw e.Mu("an object"===r?n+" a custom object":n+" "+r)}var i}function cp(n,e,t){if((e=(0,Ht.m9)(e))instanceof Wo)return e._internalPath;if("string"==typeof e)return ay(n,e);throw uy("Field path arguments must be of type string or ",n,!1,void 0,t)}const b8=new RegExp("[~\\*/\\[\\]]");function ay(n,e,t){if(e.search(b8)>=0)throw uy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wo(...e.split("."))._internalPath}catch{throw uy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uy(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new de(Z.INVALID_ARGUMENT,a+n+u)}function rV(n,e){return n.some(t=>t.isEqual(e))}class dp{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new S8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ly("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class S8 extends dp{data(){return super.data()}}function ly(n,e){return"string"==typeof e?ay(n,e):e instanceof Wo?e._internalPath:e._delegate._internalPath}function iV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fC{}class hp extends fC{}function Ba(n,e,...t){let r=[];e instanceof fC&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof wd).length,a=s.filter(u=>u instanceof fp).length;if(o>1||o>0&&a>0)throw new de(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fp extends hp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fp(e,t,r)}_apply(e){const t=this._parse(e);return uV(e._query,t),new xr(e.firestore,e.converter,fT(e._query,t))}_parse(e){const t=Xu(e.firestore);return function(s,o,a,u,h,p,m){let y;if(h.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new de(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){aV(m,p);const D=[];for(const b of m)D.push(oV(u,s,b));y={arrayValue:{values:D}}}else y=oV(u,s,m)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||aV(m,p),y=eV(a,"where",m,"in"===p||"not-in"===p);return Pt.create(h,p,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class wd extends fC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Yt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)uV(o,u),o=fT(o,u)}(e._query,t),new xr(e.firestore,e.converter,fT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pC extends hp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pC(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new de(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lf(s,o)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $o(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class cy extends hp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new cy(e,t,r)}_apply(e){return new xr(e.firestore,e.converter,b_(e._query,this._limit,this._limitType))}}class dy extends hp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new dy(e,t,r)}_apply(e){const t=sV(e,this.type,this._docOrFields,this._inclusive);return new xr(e.firestore,e.converter,(s=t,new $o((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class hy extends hp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new hy(e,t,r)}_apply(e){const t=sV(e,this.type,this._docOrFields,this._inclusive);return new xr(e.firestore,e.converter,(s=t,new $o((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function sV(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof dp)return function(s,o,a,u,h){if(!u)throw new de(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const m of Yc(s))if(m.field.isKeyField())p.push(ju(o,u.key));else{const y=u.data.field(m.field);if(v_(y))throw new de(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const D=m.field.canonicalString();throw new de(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}p.push(y)}return new Na(p,h)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Xu(n.firestore);return function(o,a,u,h,p,m){const y=o.explicitOrderBy;if(p.length>y.length)throw new de(Z.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let b=0;b<p.length;b++){const N=p[b];if(y[b].field.isKeyField()){if("string"!=typeof N)throw new de(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof N}`);if(!hT(o)&&-1!==N.indexOf("/"))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${N}' contains a slash.`);const O=o.path.child(Rt.fromString(N));if(!De.isDocumentKey(O))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const z=new De(O);D.push(ju(a,z))}else{const O=eV(u,h,N);D.push(O)}}return new Na(D,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function oV(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new de(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hT(e)&&-1!==t.indexOf("/"))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rt.fromString(t));if(!De.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ju(n,new De(r))}if(t instanceof vn)return ju(n,t._key);throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ty(t)}.`)}function aV(n,e){if(!Array.isArray(n)||0===n.length)throw new de(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uV(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new de(Z.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gC{convertValue(e,t="none"){switch(Ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Sa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>An(o.doubleValue));return new iy(s)}convertGeoPoint(e){return new ry(An(e.latitude),An(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=I_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Of(e));default:return null}}convertTimestamp(e){const t=Bo(e);return new Cn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rt.fromString(e);Ue(vO(r));const i=new Ra(r.get(1),r.get(3)),s=new De(r.popFirst(5));return i.isEqual(t)||Qn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function fy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class F8 extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ko extends dp{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ly("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pp extends Ko{data(e={}){return super.data(e)}}class ja{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pp(this._firestore,this._userDataWriter,r.key,r,new tl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new pp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new pp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return 0!==a.type&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:U8(a.type),doc:u,oldIndex:h,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function U8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}function cV(n,e){return n instanceof Ko&&e instanceof Ko?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ja&&e instanceof ja&&n._firestore===e._firestore&&iC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class $a extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}function dV(n,e,t){n=wt(n,vn);const r=wt(n.firestore,tn),i=fy(n.converter,e,t);return Td(r,[oy(Xu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,bn.none())])}function hV(n,e,t,...r){n=wt(n,vn);const i=wt(n.firestore,tn),s=Xu(i);let o;return o="string"==typeof(e=(0,Ht.m9)(e))||e instanceof Wo?dC(s,"updateDoc",n._key,e,t,r):cC(s,"updateDoc",n._key,e),Td(i,[o.toMutation(n._key,bn.exists(!0))])}function fV(n,...e){var t,r,i;n=(0,Ht.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||sC(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(sC(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,h,p;if(n instanceof vn)h=wt(n.firestore,tn),p=Qc(n._key.path),u={next:m=>{e[o]&&e[o](mC(h,n,m))},error:e[o+1],complete:e[o+2]};else{const m=wt(n,xr);h=wt(m.firestore,tn),p=m._query;const y=new $a(h);u={next:D=>{e[o]&&e[o](new ja(h,y,m,D))},error:e[o+1],complete:e[o+2]},iV(n._query)}return function(y,D,b,N){const O=new J_(N),z=new ID(D,O,b);return y.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return pD(yield Ed(y),z)})),()=>{O.za(),y.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return mD(yield Ed(y),z)}))}}(Sn(h),p,a,u)}function Td(n,e){return function(r,i){const s=new mr;return r.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function N5(n,e,t){return SD.apply(this,arguments)}(yield tC(r),i,s)})),s.promise}(Sn(n),e)}function mC(n,e,t){const r=t.docs.get(e._key),i=new $a(n);return new Ko(n,i,e._key,r,new tl(t.hasPendingWrites,t.fromCache),e.converter)}const rK={maxAttempts:5};class pV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xu(e)}set(e,t,r){this._verifyNotCommitted();const i=Ha(e,this._firestore),s=fy(i.converter,t,r),o=oy(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,bn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ha(e,this._firestore);let o;return o="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Wo?dC(this._dataReader,"WriteBatch.update",s._key,t,r,i):cC(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ha(e,this._firestore);return this._mutations=this._mutations.concat(new nd(t._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ha(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new de(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class iK extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Xu(t)}get(t){const r=Ha(t,this._firestore),i=new F8(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ne();const o=s[0];if(o.isFoundDocument())return new dp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new dp(this._firestore,i,r._key,null,r.converter);throw Ne()})}set(t,r,i){const s=Ha(t,this._firestore),o=fy(s.converter,r,i),a=oy(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Ha(t,this._firestore);let a;return a="string"==typeof(r=(0,Ht.m9)(r))||r instanceof Wo?dC(this._dataReader,"Transaction.update",o._key,r,i,s):cC(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Ha(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ha(e,this._firestore),r=new $a(this._firestore);return super.get(e).then(i=>new Ko(this._firestore,r,t._key,i._document,new tl(!1,!1),t.converter))}}!function(e,t=!0){$c=Fc.SDK_VERSION,(0,Fc._registerComponent)(new ax.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new tn(new s6(r.getProvider("auth-internal")),new u6(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Fc.registerVersion)(UN,"4.7.2",e),(0,Fc.registerVersion)(UN,"4.7.2","esm2017")}();function yC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new de("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yV(){if(typeof Uint8Array>"u")throw new de("unimplemented","Uint8Arrays are not available in this environment.")}function vV(){if(!function V6(){return typeof atob<"u"}())throw new de("unimplemented","Blobs are unavailable in Firestore in this environment.")}class gp{constructor(e){this._delegate=e}static fromBase64String(e){return vV(),new gp(oo.fromBase64String(e))}static fromUint8Array(e){return yV(),new gp(oo.fromUint8Array(e))}toBase64(){return vV(),this._delegate.toBase64()}toUint8Array(){return yV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vC(n){return function pK(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class gK{enableIndexedDbPersistence(e,t){return function g8(n,e){Qk(n=wt(n,tn));const t=Sn(n);if(t._uninitializedComponentsProvider)throw new de(Z.FAILED_PRECONDITION,"SDK cache is already specified.");Si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new vd;return Zk(t,i,new KD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function m8(n){Qk(n=wt(n,tn));const e=Sn(n);if(e._uninitializedComponentsProvider)throw new de(Z.FAILED_PRECONDITION,"SDK cache is already specified.");Si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new vd;return Zk(e,r,new Pk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function _8(n){if(n._initialized&&!n._terminated)throw new de(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{yield(t=(0,ie.Z)(function*(i){if(!eo.D())return Promise.resolve();const s=i+"main";yield eo.delete(s)}),function r(i){return t.apply(this,arguments)})(FT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ra||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function zk(n,e,t,r={}){var i;const s=(n=wt(n,ap))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Ir.MOCK_USER;else{a=(0,Ht.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ir(h)}n._authCredentials=new i6(new BN(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function v8(n){return function e8(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield Nk(n),t=yield Ok(n);return e.setNetworkEnabled(!0),function(i){const s=we(i);return s.L_.delete(0),sp(s)}(t)}))}(Sn(n=wt(n,tn)))}(this._delegate)}disableNetwork(){return function I8(n){return function t8(n){return n.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield Nk(n),t=yield Ok(n);return e.setNetworkEnabled(!1),(r=(0,ie.Z)(function*(s){const o=we(s);o.L_.add(0),yield dd(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Sn(n=wt(n,tn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Bk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function y8(n){return function(t){const r=new mr;return t.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function F5(n,e){return ND.apply(this,arguments)}(yield tC(t),r)})),r.promise}(Sn(n=wt(n,tn)))}(this._delegate)}onSnapshotsInSync(e){return function K8(n,e){return function s8(n,e){const t=new J_(e);return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return i=yield Ed(n),s=t,we(i).Y_.add(s),void s.next();var i,s})),()=>{t.za(),n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return i=yield Ed(n),s=t,void we(i).Y_.delete(s);var i,s}))}}(Sn(n=wt(n,tn)),sC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new de("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dd(this,qk(this._delegate,e))}catch(t){throw fi(t,"collection()","Firestore.collection()")}}doc(e){try{return new ss(this,ny(this._delegate,e))}catch(t){throw fi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pi(this,function d8(n,e){if(n=wt(n,ap),rC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xr(n,null,(r=e,new $o(Rt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw fi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function sK(n,e,t){n=wt(n,tn);const r=Object.assign(Object.assign({},rK),t);return function(s){if(s.maxAttempts<1)throw new de(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new mr;return s.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){const h=yield function kk(n){return ey(n).then(e=>e.datastore)}(s);new J5(s.asyncQueue,h,a,o,u).ru()})),u.promise}(Sn(n),i=>e(new iK(n,i)),r)}(this._delegate,t=>e(new EV(this,t)))}batch(){return Sn(this._delegate),new wV(new pV(this._delegate,e=>Td(this._delegate,e)))}loadBundle(e){return function E8(n,e){const t=Sn(n=wt(n,tn)),r=new f8;return function o8(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?X1().encode(o):o,p=function(p,m){if(p instanceof Uint8Array)return Mk(p,m);if(p instanceof ArrayBuffer)return Mk(new Uint8Array(p),m);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new Q5(p,a);var p}(t,ip(e));n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){!function K5(n,e,t){const r=we(n);var i;(i=(0,ie.Z)(function*(o,a,u){try{const h=yield a.getMetadata();if(yield function(b,N){const O=we(b),z=Yn(N.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",te=>O.Gr.getBundleMetadata(te,N.id)).then(te=>!!te&&te.createTime.compareTo(z)>=0)}(o.localStore,h))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(b=h).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);u._updateProgress(Ik(h));const p=new C5(h,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const D=yield p.la(m);D&&u._updateProgress(D),m=yield a.Ua()}const y=yield p.complete();return yield qo(o,y.Ia,void 0),yield function(b,N){const O=we(b);return O.persistence.runTransaction("Save bundle","readwrite",z=>O.Gr.saveBundleMetadata(z,N))}(o.localStore,h),u._completeWith(y.progress),Promise.resolve(y.Pa)}catch(h){return Si("SyncEngine",`Loading bundle failed with ${h}`),u._failWith(h),Promise.resolve(new Set)}var b}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield tC(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function w8(n,e){return function a8(n,e){return n.asyncQueue.enqueue((0,ie.Z)(function*(){return function(r,i){const s=we(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield Id(n),e)}))}(Sn(n=wt(n,tn)),e).then(t=>t?new xr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new pi(this,t):null)}}class gy extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new gp(new oo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ss.forKey(t,this.firestore,null)}}class EV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gy(e)}get(e){const t=rl(e);return this._delegate.get(t).then(r=>new mp(this._firestore,new Ko(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=rl(e);return r?(yC("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=rl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=rl(e);return this._delegate.delete(t),this}}class wV{constructor(e){this._delegate=e}set(e,t,r){const i=rl(e);return r?(yC("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=rl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=rl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class nl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _p(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=nl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new nl(e,new gy(e),t),i.set(t,s)),s}}nl.INSTANCES=new WeakMap;class ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gy(e)}static forPath(e,t,r){if(e.length%2!=0)throw new de("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ss(t,new vn(t._delegate,r,new De(e)))}static forKey(e,t,r){return new ss(t,new vn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Dd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dd(this.firestore,qk(this._delegate,e))}catch(t){throw fi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof vn&&Wk(this._delegate,e)}set(e,t){t=yC("DocumentReference.set",t);try{return t?dV(this._delegate,e,t):dV(this._delegate,e)}catch(r){throw fi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?hV(this._delegate,e):hV(this._delegate,e,t,...r)}catch(i){throw fi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function q8(n){return Td(wt(n.firestore,tn),[new nd(n._key,bn.none())])}(this._delegate)}onSnapshot(...e){const t=TV(e),r=DV(e,i=>new mp(this.firestore,new Ko(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return fV(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function j8(n){n=wt(n,vn);const e=wt(n.firestore,tn),t=Sn(e),r=new $a(e);return function n8(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(r=(0,ie.Z)(function*(s,o,a){try{const u=yield function(p,m){const y=we(p);return y.persistence.runTransaction("read document","readonly",D=>y.localDocuments.getDocument(D,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new de(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const h=gd(u,`Failed to get document '${o} from cache`);a.reject(h)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Id(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ko(e,r,n._key,i,new tl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function $8(n){n=wt(n,vn);const e=wt(n.firestore,tn);return Vk(Sn(e),n._key,{source:"server"}).then(t=>mC(e,n,t))}(this._delegate):function B8(n){n=wt(n,vn);const e=wt(n.firestore,tn);return Vk(Sn(e),n._key).then(t=>mC(e,n,t))}(this._delegate),t.then(r=>new mp(this.firestore,new Ko(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ss(this.firestore,this._delegate.withConverter(e?nl.getInstance(this.firestore,e):null))}}function fi(n,e,t){return n.message=n.message.replace(e,t),n}function TV(n){for(const e of n)if("object"==typeof e&&!vC(e))return e;return{}}function DV(n,e){var t,r;let i;return i=vC(n[0])?n[0]:vC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ss(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cV(this._delegate,e._delegate)}}class _p extends mp{data(e){const t=this._delegate.data(e);return this._delegate._converter||function n6(n,e){n||Ne()}(void 0!==t),t}}class pi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gy(e)}where(e,t,r){try{return new pi(this.firestore,Ba(this._delegate,function R8(n,e,t){const r=e,i=ly("where",n);return fp._create(i,r,t)}(e,t,r)))}catch(i){throw fi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new pi(this.firestore,Ba(this._delegate,function P8(n,e="asc"){const t=e,r=ly("orderBy",n);return pC._create(r,t)}(e,t)))}catch(r){throw fi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pi(this.firestore,Ba(this._delegate,function M8(n){return Hk("limit",n),cy._create("limit",n,"F")}(e)))}catch(t){throw fi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new pi(this.firestore,Ba(this._delegate,function x8(n){return Hk("limitToLast",n),cy._create("limitToLast",n,"L")}(e)))}catch(t){throw fi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pi(this.firestore,Ba(this._delegate,function N8(...n){return dy._create("startAt",n,!0)}(...e)))}catch(t){throw fi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pi(this.firestore,Ba(this._delegate,function O8(...n){return dy._create("startAfter",n,!1)}(...e)))}catch(t){throw fi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pi(this.firestore,Ba(this._delegate,function k8(...n){return hy._create("endBefore",n,!1)}(...e)))}catch(t){throw fi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pi(this.firestore,Ba(this._delegate,function V8(...n){return hy._create("endAt",n,!0)}(...e)))}catch(t){throw fi(t,"endAt()","Query.endAt()")}}isEqual(e){return iC(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function G8(n){n=wt(n,xr);const e=wt(n.firestore,tn),t=Sn(e),r=new $a(e);return function r8(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(r=(0,ie.Z)(function*(s,o,a){try{const u=yield G_(s,o,!0),h=new Tk(o,u.Ts),p=h.ma(u.documents),m=h.applyChanges(p,!1);a.resolve(m.snapshot)}catch(u){const h=gd(u,`Failed to execute query '${o} against cache`);a.reject(h)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Id(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ja(e,r,n,i))}(this._delegate):"server"===e?.source?function z8(n){n=wt(n,xr);const e=wt(n.firestore,tn),t=Sn(e),r=new $a(e);return Fk(t,n._query,{source:"server"}).then(i=>new ja(e,r,n,i))}(this._delegate):function H8(n){n=wt(n,xr);const e=wt(n.firestore,tn),t=Sn(e),r=new $a(e);return iV(n._query),Fk(t,n._query).then(i=>new ja(e,r,n,i))}(this._delegate),t.then(r=>new IC(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=TV(e),r=DV(e,i=>new IC(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return fV(this._delegate,t,r)}withConverter(e){return new pi(this.firestore,this._delegate.withConverter(e?nl.getInstance(this.firestore,e):null))}}class _K{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _p(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _p(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _K(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _p(this._firestore,r))})}isEqual(e){return cV(this._delegate,e._delegate)}}class Dd extends pi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ss(this.firestore,e):null}doc(e){try{return new ss(this.firestore,void 0===e?ny(this._delegate):ny(this._delegate,e))}catch(t){throw fi(t,"doc()","CollectionReference.doc()")}}add(e){return function W8(n,e){const t=wt(n.firestore,tn),r=ny(n),i=fy(n.converter,e);return Td(t,[oy(Xu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ss(this.firestore,t))}isEqual(e){return Wk(this._delegate,e._delegate)}withConverter(e){return new Dd(this.firestore,this._delegate.withConverter(e?nl.getInstance(this.firestore,e):null))}}function rl(n){return wt(n,vn)}class EC{constructor(...e){this._delegate=new Wo(...e)}static documentId(){return new EC(_n.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Wo&&this._delegate._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._delegate=e}static serverTimestamp(){const e=function aK(){return new oC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new il(e)}static delete(){const e=function oK(){return new lp("deleteField")}();return e._methodName="FieldValue.delete",new il(e)}static arrayUnion(...e){const t=function uK(...n){return new aC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new il(t)}static arrayRemove(...e){const t=function lK(...n){return new uC("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new il(t)}static increment(e){const t=function cK(n){return new lC("increment",n)}(e);return t._methodName="FieldValue.increment",new il(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const yK={Firestore:IV,GeoPoint:ry,Timestamp:Cn,Blob:gp,Transaction:EV,WriteBatch:wV,DocumentReference:ss,DocumentSnapshot:mp,Query:pi,QueryDocumentSnapshot:_p,QuerySnapshot:IC,CollectionReference:Dd,FieldPath:EC,FieldValue:il,setLogLevel:function mK(n){!function t6(n){Ca.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function CV(n,e){return function EK(n,e=cx){return new ct(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function wC(n,e){return CV(n,e).pipe(be(t=>({payload:t,type:"query"})))}!function IK(n){(function vK(n,e){n.INTERNAL.registerComponent(new ax.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},yK)))})(n,(e,t)=>new IV(e,t,new gK)),n.registerVersion("@firebase/firestore-compat","0.3.37")}(Mu.Z);class AV{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=PV(r,t);return new RV(i,s,this.afs)}snapshotChanges(){return function wK(n,e){return CV(n,e).pipe(Nm(void 0),Yw(),be(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return this.snapshotChanges().pipe(be(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return T(this.ref.get(e)).pipe($i)}}function my(n,e){return wC(n,e).pipe(Nm(void 0),Yw(),be(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const h=s.find(m=>m.doc.ref.isEqual(a.ref)),p=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));h&&JSON.stringify(h.doc.metadata)===JSON.stringify(a.metadata)||!h&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function bV(n,e,t){return my(n,t).pipe(nf((r,i)=>function TK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function DK(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function Xq(n,e=dn){return n=n??e6,J((t,r)=>{let i,s=!0;t.subscribe(Ie(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}(),be(r=>r.map(i=>({type:i.type,payload:i}))))}function TC(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function SV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class RV{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=my(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(be(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Nm(void 0),Yw(),Ss(([r,i])=>i.length>0||!r),be(([,r])=>r),$i)}auditTrail(e){return this.stateChanges(e).pipe(nf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=SV(e);return bV(this.query,t,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return wC(this.query,this.afs.schedulers.outsideAngular).pipe(be(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),$i)}get(e){return T(this.query.get(e)).pipe($i)}add(e){return this.ref.add(e)}doc(e){return new AV(this.ref.doc(e),this.afs)}}class CK{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?my(this.query,this.afs.schedulers.outsideAngular).pipe(be(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ss(t=>t.length>0),$i):my(this.query,this.afs.schedulers.outsideAngular).pipe($i)}auditTrail(e){return this.stateChanges(e).pipe(nf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=SV(e);return bV(this.query,t,this.afs.schedulers.outsideAngular).pipe($i)}valueChanges(e={}){return wC(this.query,this.afs.schedulers.outsideAngular).pipe(be(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),$i)}get(e){return T(this.query.get(e)).pipe($i)}}const AK=new Me("angularfire2.enableFirestorePersistence"),bK=new Me("angularfire2.firestore.persistenceSettings"),SK=new Me("angularfire2.firestore.settings"),RK=new Me("angularfire2.firestore.use-emulator");function PV(n,e=(t=>t)){return{query:e(n),ref:n}}let PK=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,h,p,m,y,D,b,N,O,z,te){this.schedulers=u;const L=Rw(t,a,r),le=p;m&&Ax(L,a,y,b,N,O,D,z),[this.firestore,this.persistenceEnabled$]=mx(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{const Ce=a.runOutsideAngular(()=>L.firestore());if(s&&Ce.settings(s),le&&Ce.useEmulator(...le),i&&!EP(o)){const Ve=()=>{try{return T(Ce.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(U){return typeof console<"u"&&console.warn(U),Ge(!1)}};return[Ce,a.runOutsideAngular(Ve)]}return[Ce,Ge(!1)]},[s,le,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=PV(i,r),a=this.schedulers.ngZone.run(()=>s);return new RV(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new CK(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new AV(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ve(n_),ve(r_,8),ve(AK,8),ve(SK,8),ve(Kh),ve(mn),ve(px),ve(bK,8),ve(RK,8),ve(Pw,8),ve(Ix,8),ve(Ex,8),ve(wx,8),ve(Tx,8),ve(Dx,8),ve(Cx,8),ve(hx,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),MK=(()=>{const e=class{constructor(r){this.afs=r}getAllStudents(){return this.afs.collection("/Students").snapshotChanges()}addStudent(r){return r.id=this.afs.createId(),this.afs.collection("/Students").add(r)}deleteStudent(r){return this.afs.doc("/Students/"+r.id).delete()}};let n=e;return e.\u0275fac=function(i){return new(i||e)(ve(PK))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function xK(n,e){if(1&n){const t=function db(){return he()}();ze(0,"tr")(1,"th"),It(2),qe(),ze(3,"td"),It(4),qe(),ze(5,"td"),It(6),qe(),ze(7,"td"),It(8),qe(),ze(9,"td")(10,"button",20),Xt("click",function(){const s=function ng(n){return at.lFrame.contextLView=n,n[Tn]}(t).$implicit;return function bl(n){return at.lFrame.contextLView=null,n}(_b().deleteStudent(s))}),It(11,"Delete"),qe()()()}if(2&n){const t=e.$implicit;li(2),vc(t.firstName),li(2),vc(t.lastName),li(2),vc(t.email),li(2),vc(t.mobile)}}const NK=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Yq},{path:"register",component:Jq},{path:"dashboard",component:(()=>{const e=class{constructor(r,i){this.auth=r,this.data=i,this.studentList=[],this.studentObj={id:"",firstName:"",lastName:"",email:"",mobile:""},this.id="",this.firstName="",this.lastName="",this.email="",this.mobile=""}ngOnInit(){this.getAllStudents()}logout(){this.auth.logout()}getAllStudents(){this.data.getAllStudents().subscribe(r=>{this.studentList=r.map(i=>{const s=i.payload.doc.data();return s.id=i.payload.doc.id,s})})}addStudent(){""!=this.firstName&&""!=this.lastName&&""!=this.email&&""!=this.mobile?(this.studentObj.firstName=this.firstName,this.studentObj.lastName=this.lastName,this.studentObj.email=this.email,this.studentObj.mobile=this.mobile,this.data.addStudent(this.studentObj)):alert("fill the all input field")}deleteStudent(r){window.confirm("Are you sure ?")&&this.data.deleteStudent(r)}};let n=e;return e.\u0275fac=function(i){return new(i||e)(ge(i_),ge(MK))},e.\u0275cmp=Lr({type:e,selectors:[["app-dashboard"]],decls:46,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"mt-3","text-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"col-md-4","mt-3"],[1,"card","p-3","shadow"],[1,"form-floating","mb-3"],[1,"text-center"],["type","text","name","firstName",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","text","name","lastName",1,"form-control",3,"ngModel","ngModelChange"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","Mobile",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"],[1,"col-md-8","mt-3"],[1,"card"],[1,"card-body"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",3,"click"]],template:function(i,s){1&i&&(ze(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Xt("click",function(){return s.logout()}),It(4,"Logout"),qe()(),ze(5,"div",4)(6,"div",5)(7,"div",6)(8,"h3",7),It(9,"Add Student"),qe()(),ze(10,"div",6)(11,"input",8),Xt("ngModelChange",function(a){return s.firstName=a}),qe(),ze(12,"label",9),It(13,"First Name"),qe()(),ze(14,"div",6)(15,"input",10),Xt("ngModelChange",function(a){return s.lastName=a}),qe(),ze(16,"label",9),It(17,"Last Name"),qe()(),ze(18,"div",6)(19,"input",11),Xt("ngModelChange",function(a){return s.email=a}),qe(),ze(20,"label",9),It(21,"Email"),qe()(),ze(22,"div",6)(23,"input",12),Xt("ngModelChange",function(a){return s.mobile=a}),qe(),ze(24,"label",9),It(25,"Mobile"),qe()(),ze(26,"button",13),Xt("click",function(){return s.addStudent()}),It(27,"Add Student"),qe()()(),ze(28,"div",14)(29,"div",15)(30,"div",16)(31,"table",17)(32,"thead")(33,"tr")(34,"th",18),It(35,"First Name"),qe(),ze(36,"th",18),It(37,"Last Name"),qe(),ze(38,"th",18),It(39,"Email"),qe(),ze(40,"th",18),It(41,"Mobile"),qe(),ze(42,"th",18),It(43,"Actions"),qe()()(),ze(44,"tbody"),function lb(n,e,t,r,i,s,o,a){const u=he(),h=St(),p=n+Zt,m=h.firstCreatePass?function RU(n,e,t,r,i,s,o,a,u){const h=e.consts,p=uc(e,n,4,o||null,_o(h,a));CI(e,t,p,_o(h,u)),xl(e,p);const m=p.tView=DI(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h);return null!==e.queries&&(e.queries.template(e,p),m.queries=e.queries.embeddedTView(p)),p}(p,h,u,e,t,r,i,s,o):h.data[p];Li(m,!1);const y=u[ut].createComment("");Og(h,u,y,m),Hr(y,u),zg(u,u[p]=HA(y,u,y,m)),El(m)&&wI(h,u,m),null!=o&&TI(u,m,a)}(45,xK,12,4,"tr",19),qe()()()()()()()),2&i&&(li(11),ts("ngModel",s.firstName),li(4),ts("ngModel",s.lastName),li(4),ts("ngModel",s.email),li(4),ts("ngModel",s.mobile),li(22),ts("ngForOf",s.studentList))},dependencies:[gP,Nu,Ef,jc]}),n})()},{path:"forgot-password",component:(()=>{const e=class{constructor(r){this.auth=r,this.email=""}forgotPassword(){this.auth.forgotPassword(this.email),this.email=""}};let n=e;return e.\u0275fac=function(i){return new(i||e)(ge(i_))},e.\u0275cmp=Lr({type:e,selectors:[["app-forgot-password"]],decls:21,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["name","email","type","email",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row","mt-3"],["routerLink","/login"]],template:function(i,s){1&i&&(ze(0,"div",0)(1,"div",1),zr(2,"div",2),ze(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"h3",6),It(8,"Change Password"),qe(),ze(9,"div",7)(10,"label",8),It(11,"Email address"),qe(),ze(12,"input",9),Xt("ngModelChange",function(a){return s.email=a}),qe()(),ze(13,"button",10),Xt("click",function(){return s.forgotPassword()}),It(14,"Sent Link "),qe(),ze(15,"div",11)(16,"div",2)(17,"a",12),It(18,"Back to Login"),qe()(),zr(19,"div",2),qe()()()()(),zr(20,"div",2),qe()()),2&i&&(li(12),ts("ngModel",s.email))},dependencies:[Ru,Sf,Nu,Ef,wf,jc,ku]}),n})()},{path:"verify-email",component:(()=>{const e=class{};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Lr({type:e,selectors:[["app-verify-email"]],decls:18,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"mb-4"],[1,""],[1,"row","mt-3"],["routerLink","/login",1,""]],template:function(i,s){1&i&&(ze(0,"div",0)(1,"div",1),zr(2,"div",2),ze(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"h4",6),It(8,"Verify your Email"),qe(),ze(9,"div",7)(10,"p",8),It(11,"Sent link to your registered email address"),qe()(),ze(12,"div",9)(13,"div",2)(14,"a",10),It(15,"Back to Login"),qe()(),zr(16,"div",2),qe()()()()(),zr(17,"div",2),qe()())},dependencies:[Ru,Sf,wf,ku]}),n})()}];let OK=(()=>{const e=class{};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Vi({type:e}),e.\u0275inj=Cr({imports:[sx.forRoot(NK),sx]}),n})(),kK=(()=>{const e=class{constructor(){this.title="practice"}};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Lr({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,s){1&i&&zr(0,"router-outlet")},dependencies:[gw]}),n})();const VK_firebase={apiKey:"AIzaSyBVFUmSnFkVUUssUaahVBmIAQGLbHDNbQQ",authDomain:"practice-20554.firebaseapp.com",projectId:"practice-20554",storageBucket:"practice-20554.appspot.com",messagingSenderId:"810588895151",appId:"1:810588895151:web:95c30ff1c3a0d2f7e8a15a"};let FK=(()=>{const e=class{};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Vi({type:e,bootstrap:[kK]}),e.\u0275inj=Cr({imports:[LG,OK,Qq,Zq,z9.initializeApp(VK_firebase)]}),n})();FG().bootstrapModule(FK).catch(n=>console.error(n))},942:(qi,Bn,We)=>{We.d(Bn,{Z:()=>jn});var S=We(90),Ee=We(859),P=We(881),ke=We(877);class Ot{constructor(Ye,tt){this._delegate=Ye,this.firebase=tt,(0,P._addComponent)(Ye,new Ee.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ye,tt=P._DEFAULT_ENTRY_NAME){var Jn;this._delegate.checkDestroyed();const En=this._delegate.container.getProvider(Ye);return!En.isInitialized()&&"EXPLICIT"===(null===(Jn=En.getComponent())||void 0===Jn?void 0:Jn.instantiationMode)&&En.initialize(),En.getImmediate({identifier:tt})}_removeServiceInstance(Ye,tt=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(tt)}_addComponent(Ye){(0,P._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,P._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Rn=new S.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function At(){const _t=function Jt(_t){const Ye={},tt={__esModule:!0,initializeApp:function yt(ot,wn={}){const ue=P.initializeApp(ot,wn);if((0,S.r3)(Ye,ue.name))return Ye[ue.name];const nn=new _t(ue,tt);return Ye[ue.name]=nn,nn},app:En,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Or(ot){const wn=ot.name,ue=wn.replace("-compat","");if(P._registerComponent(ot)&&"PUBLIC"===ot.type){const nn=(Gt=En())=>{if("function"!=typeof Gt[ue])throw Rn.create("invalid-app-argument",{appName:wn});return Gt[ue]()};void 0!==ot.serviceProps&&(0,S.ZB)(nn,ot.serviceProps),tt[ue]=nn,_t.prototype[ue]=function(...Gt){return this._getService.bind(this,wn).apply(this,ot.multipleInstances?Gt:[])}}return"PUBLIC"===ot.type?tt[ue]:null},removeApp:function Jn(ot){delete Ye[ot]},useAsService:function kt(ot,wn){return"serverAuth"===wn?null:wn},modularAPIs:P}};function En(ot){if(!(0,S.r3)(Ye,ot=ot||P._DEFAULT_ENTRY_NAME))throw Rn.create("no-app",{appName:ot});return Ye[ot]}return tt.default=tt,Object.defineProperty(tt,"apps",{get:function Ft(){return Object.keys(Ye).map(ot=>Ye[ot])}}),En.App=_t,tt}(Ot);return _t.INTERNAL=Object.assign(Object.assign({},_t.INTERNAL),{createFirebaseNamespace:At,extendNamespace:function Ye(tt){(0,S.ZB)(_t,tt)},createSubscribe:S.ne,ErrorFactory:S.LL,deepExtend:S.ZB}),_t}(),pe=new ke.Yd("@firebase/app-compat");try{const _t=(0,S.Rd)();if(void 0!==_t.firebase){pe.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Ye=_t.firebase.SDK_VERSION;Ye&&Ye.indexOf("LITE")>=0&&pe.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const jn=ae;!function bt(_t){(0,P.registerVersion)("@firebase/app-compat","0.2.41",_t)}()},881:(qi,Bn,We)=>{We.r(Bn),We.d(Bn,{FirebaseError:()=>ke.ZR,SDK_VERSION:()=>Dr,_DEFAULT_ENTRY_NAME:()=>ni,_addComponent:()=>Tr,_addOrOverwriteComponent:()=>hn,_apps:()=>wr,_clearComponents:()=>vi,_components:()=>an,_getProvider:()=>Mn,_isFirebaseApp:()=>yi,_isFirebaseServerApp:()=>Wt,_registerComponent:()=>lr,_removeServiceInstance:()=>Ms,_serverApps:()=>Fr,deleteApp:()=>xs,getApp:()=>ds,getApps:()=>ao,initializeApp:()=>ls,initializeServerApp:()=>cs,onLog:()=>T,registerVersion:()=>Ni,setLogLevel:()=>E});var S=We(861),Ee=We(859),P=We(877),ke=We(90);const Ot=(Q,j)=>j.some(ne=>Q instanceof ne);let cn,Rn;const ae=new WeakMap,pe=new WeakMap,Fe=new WeakMap,st=new WeakMap,bt=new WeakMap;let Ye={get(Q,j,ne){if(Q instanceof IDBTransaction){if("done"===j)return pe.get(Q);if("objectStoreNames"===j)return Q.objectStoreNames||Fe.get(Q);if("store"===j)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return yt(Q[j])},set:(Q,j,ne)=>(Q[j]=ne,!0),has:(Q,j)=>Q instanceof IDBTransaction&&("done"===j||"store"===j)||j in Q};function En(Q){return"function"==typeof Q?function Jn(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function At(){return Rn||(Rn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...j){return Q.apply(Ft(this),j),yt(ae.get(this))}:function(...j){return yt(Q.apply(Ft(this),j))}:function(j,...ne){const ye=Q.call(Ft(this),j,...ne);return Fe.set(ye,j.sort?j.sort():[j]),yt(ye)}}(Q):(Q instanceof IDBTransaction&&function _t(Q){if(pe.has(Q))return;const j=new Promise((ne,ye)=>{const nt=()=>{Q.removeEventListener("complete",it),Q.removeEventListener("error",ht),Q.removeEventListener("abort",ht)},it=()=>{ne(),nt()},ht=()=>{ye(Q.error||new DOMException("AbortError","AbortError")),nt()};Q.addEventListener("complete",it),Q.addEventListener("error",ht),Q.addEventListener("abort",ht)});pe.set(Q,j)}(Q),Ot(Q,function Jt(){return cn||(cn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,Ye):Q)}function yt(Q){if(Q instanceof IDBRequest)return function jn(Q){const j=new Promise((ne,ye)=>{const nt=()=>{Q.removeEventListener("success",it),Q.removeEventListener("error",ht)},it=()=>{ne(yt(Q.result)),nt()},ht=()=>{ye(Q.error),nt()};Q.addEventListener("success",it),Q.addEventListener("error",ht)});return j.then(ne=>{ne instanceof IDBCursor&&ae.set(ne,Q)}).catch(()=>{}),bt.set(j,Q),j}(Q);if(st.has(Q))return st.get(Q);const j=En(Q);return j!==Q&&(st.set(Q,j),bt.set(j,Q)),j}const Ft=Q=>bt.get(Q),ot=["get","getKey","getAll","getAllKeys","count"],wn=["put","add","delete","clear"],ue=new Map;function nn(Q,j){if(!(Q instanceof IDBDatabase)||j in Q||"string"!=typeof j)return;if(ue.get(j))return ue.get(j);const ne=j.replace(/FromIndex$/,""),ye=j!==ne,nt=wn.includes(ne);if(!(ne in(ye?IDBIndex:IDBObjectStore).prototype)||!nt&&!ot.includes(ne))return;const it=function(){var ht=(0,S.Z)(function*(Lt,...fn){const Ii=this.transaction(Lt,nt?"readwrite":"readonly");let zt=Ii.store;return ye&&(zt=zt.index(fn.shift())),(yield Promise.all([zt[ne](...fn),nt&&Ii.done]))[0]});return function(fn){return ht.apply(this,arguments)}}();return ue.set(j,it),it}!function tt(Q){Ye=Q(Ye)}(Q=>({...Q,get:(j,ne,ye)=>nn(j,ne)||Q.get(j,ne,ye),has:(j,ne)=>!!nn(j,ne)||Q.has(j,ne)}));class Gt{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map(ne=>{if(function dn(Q){return"VERSION"===Q.getComponent()?.type}(ne)){const ye=ne.getImmediate();return`${ye.library}/${ye.version}`}return null}).filter(ne=>ne).join(" ")}}const kr="@firebase/app",ti="0.10.11",ct=new P.Yd("@firebase/app"),ni="[DEFAULT]",_i={[kr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},wr=new Map,Fr=new Map,an=new Map;function Tr(Q,j){try{Q.container.addComponent(j)}catch(ne){ct.debug(`Component ${j.name} failed to register with FirebaseApp ${Q.name}`,ne)}}function hn(Q,j){Q.container.addOrOverwriteComponent(j)}function lr(Q){const j=Q.name;if(an.has(j))return ct.debug(`There were multiple attempts to register component ${j}.`),!1;an.set(j,Q);for(const ne of wr.values())Tr(ne,Q);for(const ne of Fr.values())Tr(ne,Q);return!0}function Mn(Q,j){const ne=Q.container.getProvider("heartbeat").getImmediate({optional:!0});return ne&&ne.triggerHeartbeat(),Q.container.getProvider(j)}function Ms(Q,j,ne=ni){Mn(Q,j).clearInstance(ne)}function yi(Q){return void 0!==Q.options}function Wt(Q){return void 0!==Q.settings}function vi(){an.clear()}const xn=new ke.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class cr{constructor(j,ne,ye){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},ne),this._name=ne.name,this._automaticDataCollectionEnabled=ne.automaticDataCollectionEnabled,this._container=ye,this.container.addComponent(new Ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}class On extends cr{constructor(j,ne,ye,nt){const it=void 0!==ne.automaticDataCollectionEnabled&&ne.automaticDataCollectionEnabled,ht={name:ye,automaticDataCollectionEnabled:it};super(void 0!==j.apiKey?j:j.options,ht,nt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:it},ne),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ne.releaseOnDeref=void 0,Ni(kr,ti,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(j){this.isDeleted||(this._refCount++,void 0!==j&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(j,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){xs(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw xn.create("server-app-deleted")}}const Dr="10.13.2";function ls(Q,j={}){let ne=Q;"object"!=typeof j&&(j={name:j});const ye=Object.assign({name:ni,automaticDataCollectionEnabled:!1},j),nt=ye.name;if("string"!=typeof nt||!nt)throw xn.create("bad-app-name",{appName:String(nt)});if(ne||(ne=(0,ke.aH)()),!ne)throw xn.create("no-options");const it=wr.get(nt);if(it){if((0,ke.vZ)(ne,it.options)&&(0,ke.vZ)(ye,it.config))return it;throw xn.create("duplicate-app",{appName:nt})}const ht=new Ee.H0(nt);for(const fn of an.values())ht.addComponent(fn);const Lt=new cr(ne,ye,ht);return wr.set(nt,Lt),Lt}function cs(Q,j){if((0,ke.jU)()&&!(0,ke.n2)())throw xn.create("invalid-server-app-environment");let ne;void 0===j.automaticDataCollectionEnabled&&(j.automaticDataCollectionEnabled=!1),ne=yi(Q)?Q.options:Q;const ye=Object.assign(Object.assign({},j),ne);if(void 0!==ye.releaseOnDeref&&delete ye.releaseOnDeref,void 0!==j.releaseOnDeref&&typeof FinalizationRegistry>"u")throw xn.create("finalization-registry-not-supported",{});const it=""+(Ii=JSON.stringify(ye),[...Ii].reduce((zt,Pd)=>Math.imul(31,zt)+Pd.charCodeAt(0)|0,0)),ht=Fr.get(it);var Ii;if(ht)return ht.incRefCount(j.releaseOnDeref),ht;const Lt=new Ee.H0(it);for(const Ii of an.values())Lt.addComponent(Ii);const fn=new On(ne,j,it,Lt);return Fr.set(it,fn),fn}function ds(Q=ni){const j=wr.get(Q);if(!j&&Q===ni&&(0,ke.aH)())return ls();if(!j)throw xn.create("no-app",{appName:Q});return j}function ao(){return Array.from(wr.values())}function xs(Q){return xi.apply(this,arguments)}function xi(){return(xi=(0,S.Z)(function*(Q){let j=!1;const ne=Q.name;wr.has(ne)?(j=!0,wr.delete(ne)):Fr.has(ne)&&Q.decRefCount()<=0&&(Fr.delete(ne),j=!0),j&&(yield Promise.all(Q.container.getProviders().map(ye=>ye.delete())),Q.isDeleted=!0)})).apply(this,arguments)}function Ni(Q,j,ne){var ye;let nt=null!==(ye=_i[Q])&&void 0!==ye?ye:Q;ne&&(nt+=`-${ne}`);const it=nt.match(/\s|\//),ht=j.match(/\s|\//);if(it||ht){const Lt=[`Unable to register library "${nt}" with version "${j}":`];return it&&Lt.push(`library name "${nt}" contains illegal characters (whitespace or "/")`),it&&ht&&Lt.push("and"),ht&&Lt.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void ct.warn(Lt.join(" "))}lr(new Ee.wA(`${nt}-version`,()=>({library:nt,version:j}),"VERSION"))}function T(Q,j){if(null!==Q&&"function"!=typeof Q)throw xn.create("invalid-log-argument");(0,P.Am)(Q,j)}function E(Q){(0,P.Ub)(Q)}const w="firebase-heartbeat-database",x=1,R="firebase-heartbeat-store";let oe=null;function me(){return oe||(oe=function Or(Q,j,{blocked:ne,upgrade:ye,blocking:nt,terminated:it}={}){const ht=indexedDB.open(Q,j),Lt=yt(ht);return ye&&ht.addEventListener("upgradeneeded",fn=>{ye(yt(ht.result),fn.oldVersion,fn.newVersion,yt(ht.transaction),fn)}),ne&&ht.addEventListener("blocked",fn=>ne(fn.oldVersion,fn.newVersion,fn)),Lt.then(fn=>{it&&fn.addEventListener("close",()=>it()),nt&&fn.addEventListener("versionchange",Ii=>nt(Ii.oldVersion,Ii.newVersion,Ii))}).catch(()=>{}),Lt}(w,x,{upgrade:(Q,j)=>{if(0===j)try{Q.createObjectStore(R)}catch(ne){console.warn(ne)}}}).catch(Q=>{throw xn.create("idb-open",{originalErrorMessage:Q.message})})),oe}function gt(){return(gt=(0,S.Z)(function*(Q){try{const ne=(yield me()).transaction(R),ye=yield ne.objectStore(R).get(xe(Q));return yield ne.done,ye}catch(j){if(j instanceof ke.ZR)ct.warn(j.message);else{const ne=xn.create("idb-get",{originalErrorMessage:j?.message});ct.warn(ne.message)}}})).apply(this,arguments)}function Le(Q,j){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,S.Z)(function*(Q,j){try{const ye=(yield me()).transaction(R,"readwrite");yield ye.objectStore(R).put(j,xe(Q)),yield ye.done}catch(ne){if(ne instanceof ke.ZR)ct.warn(ne.message);else{const ye=xn.create("idb-set",{originalErrorMessage:ne?.message});ct.warn(ye.message)}}})).apply(this,arguments)}function xe(Q){return`${Q.name}!${Q.options.appId}`}class uo{constructor(j){this.container=j,this._heartbeatsCache=null;const ne=this.container.getProvider("app").getImmediate();this._storage=new Xe(ne),this._heartbeatsCachePromise=this._storage.read().then(ye=>(this._heartbeatsCache=ye,ye))}triggerHeartbeat(){var j=this;return(0,S.Z)(function*(){var ne,ye;try{const it=j.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=_e();return null==(null===(ne=j._heartbeatsCache)||void 0===ne?void 0:ne.heartbeats)&&(j._heartbeatsCache=yield j._heartbeatsCachePromise,null==(null===(ye=j._heartbeatsCache)||void 0===ye?void 0:ye.heartbeats))||j._heartbeatsCache.lastSentHeartbeatDate===ht||j._heartbeatsCache.heartbeats.some(Lt=>Lt.date===ht)?void 0:(j._heartbeatsCache.heartbeats.push({date:ht,agent:it}),j._heartbeatsCache.heartbeats=j._heartbeatsCache.heartbeats.filter(Lt=>{const fn=new Date(Lt.date).valueOf();return Date.now()-fn<=2592e6}),j._storage.overwrite(j._heartbeatsCache))}catch(nt){ct.warn(nt)}})()}getHeartbeatsHeader(){var j=this;return(0,S.Z)(function*(){var ne;try{if(null===j._heartbeatsCache&&(yield j._heartbeatsCachePromise),null==(null===(ne=j._heartbeatsCache)||void 0===ne?void 0:ne.heartbeats)||0===j._heartbeatsCache.heartbeats.length)return"";const ye=_e(),{heartbeatsToSend:nt,unsentEntries:it}=function lo(Q,j=1024){const ne=[];let ye=Q.slice();for(const nt of Q){const it=ne.find(ht=>ht.agent===nt.agent);if(it){if(it.dates.push(nt.date),Tt(ne)>j){it.dates.pop();break}}else if(ne.push({agent:nt.agent,dates:[nt.date]}),Tt(ne)>j){ne.pop();break}ye=ye.slice(1)}return{heartbeatsToSend:ne,unsentEntries:ye}}(j._heartbeatsCache.heartbeats),ht=(0,ke.L)(JSON.stringify({version:2,heartbeats:nt}));return j._heartbeatsCache.lastSentHeartbeatDate=ye,it.length>0?(j._heartbeatsCache.heartbeats=it,yield j._storage.overwrite(j._heartbeatsCache)):(j._heartbeatsCache.heartbeats=[],j._storage.overwrite(j._heartbeatsCache)),ht}catch(ye){return ct.warn(ye),""}})()}}function _e(){return(new Date).toISOString().substring(0,10)}class Xe{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.Z)(function*(){return!!(0,ke.hl)()&&(0,ke.eu)().then(()=>!0).catch(()=>!1)})()}read(){var j=this;return(0,S.Z)(function*(){if(yield j._canUseIndexedDBPromise){const ye=yield function je(Q){return gt.apply(this,arguments)}(j.app);return ye?.heartbeats?ye:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(j){var ne=this;return(0,S.Z)(function*(){var ye;if(yield ne._canUseIndexedDBPromise){const it=yield ne.read();return Le(ne.app,{lastSentHeartbeatDate:null!==(ye=j.lastSentHeartbeatDate)&&void 0!==ye?ye:it.lastSentHeartbeatDate,heartbeats:j.heartbeats})}})()}add(j){var ne=this;return(0,S.Z)(function*(){var ye;if(yield ne._canUseIndexedDBPromise){const it=yield ne.read();return Le(ne.app,{lastSentHeartbeatDate:null!==(ye=j.lastSentHeartbeatDate)&&void 0!==ye?ye:it.lastSentHeartbeatDate,heartbeats:[...it.heartbeats,...j.heartbeats]})}})()}}function Tt(Q){return(0,ke.L)(JSON.stringify({version:2,heartbeats:Q})).length}!function Rd(Q){lr(new Ee.wA("platform-logger",j=>new Gt(j),"PRIVATE")),lr(new Ee.wA("heartbeat",j=>new uo(j),"PRIVATE")),Ni(kr,ti,Q),Ni(kr,ti,"esm2017"),Ni("fire-js","")}("")},859:(qi,Bn,We)=>{We.d(Bn,{H0:()=>Jt,wA:()=>P});var S=We(861),Ee=We(90);class P{constructor(ae,pe,Fe){this.name=ae,this.instanceFactory=pe,this.type=Fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const ke="[DEFAULT]";class Ot{constructor(ae,pe){this.name=ae,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const pe=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(pe)){const Fe=new Ee.BH;if(this.instancesDeferred.set(pe,Fe),this.isInitialized(pe)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:pe});st&&Fe.resolve(st)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(ae){var pe;const Fe=this.normalizeInstanceIdentifier(ae?.identifier),st=null!==(pe=ae?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Fe)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Fe})}catch(bt){if(st)return null;throw bt}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function Rn(At){return"EAGER"===At.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:ke})}catch{}for(const[pe,Fe]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(pe);try{const bt=this.getOrInitializeService({instanceIdentifier:st});Fe.resolve(bt)}catch{}}}}clearInstance(ae=ke){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,S.Z)(function*(){const pe=Array.from(ae.instances.values());yield Promise.all([...pe.filter(Fe=>"INTERNAL"in Fe).map(Fe=>Fe.INTERNAL.delete()),...pe.filter(Fe=>"_delete"in Fe).map(Fe=>Fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=ke){return this.instances.has(ae)}getOptions(ae=ke){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:pe={}}=ae,Fe=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(Fe))throw Error(`${this.name}(${Fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:Fe,options:pe});for(const[bt,jn]of this.instancesDeferred.entries())Fe===this.normalizeInstanceIdentifier(bt)&&jn.resolve(st);return st}onInit(ae,pe){var Fe;const st=this.normalizeInstanceIdentifier(pe),bt=null!==(Fe=this.onInitCallbacks.get(st))&&void 0!==Fe?Fe:new Set;bt.add(ae),this.onInitCallbacks.set(st,bt);const jn=this.instances.get(st);return jn&&ae(jn,st),()=>{bt.delete(ae)}}invokeOnInitCallbacks(ae,pe){const Fe=this.onInitCallbacks.get(pe);if(Fe)for(const st of Fe)try{st(ae,pe)}catch{}}getOrInitializeService({instanceIdentifier:ae,options:pe={}}){let Fe=this.instances.get(ae);if(!Fe&&this.component&&(Fe=this.component.instanceFactory(this.container,{instanceIdentifier:(At=ae,At===ke?void 0:At),options:pe}),this.instances.set(ae,Fe),this.instancesOptions.set(ae,pe),this.invokeOnInitCallbacks(Fe,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,Fe)}catch{}var At;return Fe||null}normalizeInstanceIdentifier(ae=ke){return this.component?this.component.multipleInstances?ae:ke:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Jt{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const pe=this.getProvider(ae.name);if(pe.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);pe.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const pe=new Ot(ae,this);return this.providers.set(ae,pe),pe}getProviders(){return Array.from(this.providers.values())}}},877:(qi,Bn,We)=>{We.d(Bn,{Am:()=>At,Ub:()=>Jt,Yd:()=>Rn,in:()=>Ee});const S=[];var Ee=(()=>{return(ae=Ee||(Ee={}))[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",Ee;var ae})();const P={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},ke=Ee.INFO,Ot={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},cn=(ae,pe,...Fe)=>{if(pe<ae.logLevel)return;const st=(new Date).toISOString(),bt=Ot[pe];if(!bt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[bt](`[${st}]  ${ae.name}:`,...Fe)};class Rn{constructor(pe){this.name=pe,this._logLevel=ke,this._logHandler=cn,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in Ee))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?P[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...pe),this._logHandler(this,Ee.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...pe),this._logHandler(this,Ee.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...pe),this._logHandler(this,Ee.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...pe),this._logHandler(this,Ee.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...pe),this._logHandler(this,Ee.ERROR,...pe)}}function Jt(ae){S.forEach(pe=>{pe.setLogLevel(ae)})}function At(ae,pe){for(const Fe of S){let st=null;pe&&pe.level&&(st=P[pe.level]),Fe.userLogHandler=null===ae?null:(bt,jn,..._t)=>{const Ye=_t.map(tt=>{if(null==tt)return null;if("string"==typeof tt)return tt;if("number"==typeof tt||"boolean"==typeof tt)return tt.toString();if(tt instanceof Error)return tt.message;try{return JSON.stringify(tt)}catch{return null}}).filter(tt=>tt).join(" ");jn>=(st??bt.logLevel)&&ae({level:Ee[jn].toLowerCase(),message:Ye,args:_t,type:bt.name})}}}},568:(qi,Bn,We)=>{We.r(Bn);var S=We(861),Ee=We(942),P=We(966),ke=We(90),Rn=(We(881),We(877),We(859));function Jt(){return window}const At=2e3;function pe(){return pe=(0,S.Z)(function*(T,E,w){var x;const{BuildInfo:R}=Jt();(0,P.au)(E.sessionId,"AuthEvent did not contain a session ID");const oe=yield function tt(T){return Jn.apply(this,arguments)}(E.sessionId),me={};return(0,P.av)()?me.ibi=R.packageName:(0,P.aw)()?me.apn=R.packageName:(0,P.ax)(T,"operation-not-supported-in-this-environment"),R.displayName&&(me.appDisplayName=R.displayName),me.sessionId=oe,(0,P.ay)(T,w,E.type,void 0,null!==(x=E.eventId)&&void 0!==x?x:void 0,me)}),pe.apply(this,arguments)}function st(){return(st=(0,S.Z)(function*(T){const{BuildInfo:E}=Jt(),w={};(0,P.av)()?w.iosBundleId=E.packageName:(0,P.aw)()?w.androidPackageName=E.packageName:(0,P.ax)(T,"operation-not-supported-in-this-environment"),yield(0,P.az)(T,w)})).apply(this,arguments)}function _t(){return(_t=(0,S.Z)(function*(T,E,w){const{cordova:x}=Jt();let R=()=>{};try{yield new Promise((oe,me)=>{let je=null;function gt(){var xe;oe();const sn=null===(xe=x.plugins.browsertab)||void 0===xe?void 0:xe.close;"function"==typeof sn&&sn(),"function"==typeof w?.close&&w.close()}function Le(){je||(je=window.setTimeout(()=>{me((0,P.aB)(T,"redirect-cancelled-by-user"))},At))}function Ae(){"visible"===document?.visibilityState&&Le()}E.addPassiveListener(gt),document.addEventListener("resume",Le,!1),(0,P.aw)()&&document.addEventListener("visibilitychange",Ae,!1),R=()=>{E.removePassiveListener(gt),document.removeEventListener("resume",Le,!1),document.removeEventListener("visibilitychange",Ae,!1),je&&window.clearTimeout(je)}})}finally{R()}})).apply(this,arguments)}function Jn(){return(Jn=(0,S.Z)(function*(T){const E=function En(T){if((0,P.au)(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(T);const E=new ArrayBuffer(T.length),w=new Uint8Array(E);for(let x=0;x<T.length;x++)w[x]=T.charCodeAt(x);return w}(T),w=yield crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(w)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const yt=20;class Ft extends P.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(E=>{this.resolveInitialized=E})}addPassiveListener(E){this.passiveListeners.add(E)}removePassiveListener(E){this.passiveListeners.delete(E)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(E){return this.resolveInitialized(),this.passiveListeners.forEach(w=>w(E)),super.onEvent(E)}initialized(){var E=this;return(0,S.Z)(function*(){yield E.initPromise})()}}function ot(T){return wn.apply(this,arguments)}function wn(){return(wn=(0,S.Z)(function*(T){const E=yield Gt()._get(dn(T));return E&&(yield Gt()._remove(dn(T))),E})).apply(this,arguments)}function nn(){const T=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<yt;w++){const x=Math.floor(Math.random()*E.length);T.push(E.charAt(x))}return T.join("")}function Gt(){return(0,P.aE)(P.b)}function dn(T){return(0,P.aF)("authEvent",T.config.apiKey,T.name)}function ct(T){if(!T?.includes("?"))return{};const[E,...w]=T.split("?");return(0,ke.zd)(w.join("?"))}const K=class Mi{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aG,this._overrideRedirectResult=P.aH}_initialize(E){var w=this;return(0,S.Z)(function*(){const x=E._key();let R=w.eventManagers.get(x);return R||(R=new Ft(E),w.eventManagers.set(x,R),w.attachCallbackListeners(E,R)),R})()}_openPopup(E){(0,P.ax)(E,"operation-not-supported-in-this-environment")}_openRedirect(E,w,x,R){var oe=this;return(0,S.Z)(function*(){!function Ye(T){var E,w,x,R,oe,me,je,gt,Le,Ae;const xe=Jt();(0,P.aC)("function"==typeof(null===(E=xe?.universalLinks)||void 0===E?void 0:E.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aC)(typeof(null===(w=xe?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aC)("function"==typeof(null===(oe=null===(R=null===(x=xe?.cordova)||void 0===x?void 0:x.plugins)||void 0===R?void 0:R.browsertab)||void 0===oe?void 0:oe.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aC)("function"==typeof(null===(gt=null===(je=null===(me=xe?.cordova)||void 0===me?void 0:me.plugins)||void 0===je?void 0:je.browsertab)||void 0===gt?void 0:gt.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aC)("function"==typeof(null===(Ae=null===(Le=xe?.cordova)||void 0===Le?void 0:Le.InAppBrowser)||void 0===Ae?void 0:Ae.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(E);const me=yield oe._initialize(E);yield me.initialized(),me.resetRedirect(),(0,P.aI)(),yield oe._originValidation(E);const je=function Or(T,E,w=null){return{type:E,eventId:w,urlResponse:null,sessionId:nn(),postBody:null,tenantId:T.tenantId,error:(0,P.aB)(T,"no-auth-event")}}(E,x,R);yield function kt(T,E){return Gt()._set(dn(T),E)}(E,je);const gt=yield function ae(T,E,w){return pe.apply(this,arguments)}(E,je,w),Le=yield function bt(T){const{cordova:E}=Jt();return new Promise(w=>{E.plugins.browsertab.isAvailable(x=>{let R=null;x?E.plugins.browsertab.openUrl(T):R=E.InAppBrowser.open(T,(0,P.aA)()?"_blank":"_system","location=yes"),w(R)})})}(gt);return function jn(T,E,w){return _t.apply(this,arguments)}(E,me,Le)})()}_isIframeWebStorageSupported(E,w){throw new Error("Method not implemented.")}_originValidation(E){const w=E._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Fe(T){return st.apply(this,arguments)}(E)),this.originValidationPromises[w]}attachCallbackListeners(E,w){const{universalLinks:x,handleOpenURL:R,BuildInfo:oe}=Jt(),me=setTimeout((0,S.Z)(function*(){yield ot(E),w.onEvent(Y())}),500),je=function(){var Ae=(0,S.Z)(function*(xe){clearTimeout(me);const sn=yield ot(E);let Oi=null;sn&&xe?.url&&(Oi=function ue(T,E){var w,x;const R=function ti(T){const E=ct(T),w=E.link?decodeURIComponent(E.link):void 0,x=ct(w).link,R=E.deep_link_id?decodeURIComponent(E.deep_link_id):void 0;return ct(R).link||R||x||w||T}(E);if(R.includes("/__/auth/callback")){const oe=ct(R),me=oe.firebaseError?function kr(T){try{return JSON.parse(T)}catch{return null}}(decodeURIComponent(oe.firebaseError)):null,je=null===(x=null===(w=me?.code)||void 0===w?void 0:w.split("auth/"))||void 0===x?void 0:x[1],gt=je?(0,P.aB)(je):null;return gt?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:gt,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:R,postBody:null}}return null}(sn,xe.url)),w.onEvent(Oi||Y())});return function(sn){return Ae.apply(this,arguments)}}();typeof x<"u"&&"function"==typeof x.subscribe&&x.subscribe(null,je);const gt=R,Le=`${oe.packageName.toLowerCase()}://`;Jt().handleOpenURL=function(){var Ae=(0,S.Z)(function*(xe){if(xe.toLowerCase().startsWith(Le)&&je({url:xe}),"function"==typeof gt)try{gt(xe)}catch(sn){console.error(sn)}});return function(xe){return Ae.apply(this,arguments)}}()}};function Y(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aB)("no-auth-event")}}const J=1e3;function Ie(){var T;return(null===(T=self?.location)||void 0===T?void 0:T.protocol)||null}function be(T=(0,ke.z$)()){return!("file:"!==Ie()&&"ionic:"!==Ie()&&"capacitor:"!==Ie()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function xt(){try{const T=self.localStorage,E=P.aN();if(T)return T.setItem(E,"1"),T.removeItem(E),!function ar(T=(0,ke.z$)()){return function Mt(){return(0,ke.w1)()&&11===document?.documentMode}()||function rn(T=(0,ke.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,ke.hl)()}catch{return qt()&&(0,ke.hl)()}return!1}function qt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pn(){return(function vt(){return"http:"===Ie()||"https:"===Ie()}()||(0,ke.ru)()||be())&&!function Oe(){return(0,ke.b$)()||(0,ke.UG)()}()&&xt()&&!qt()}function $n(){return be()&&typeof document<"u"}function os(){return(os=(0,S.Z)(function*(){return!!$n()&&new Promise(T=>{const E=setTimeout(()=>{T(!1)},J);document.addEventListener("deviceready",()=>{clearTimeout(E),T(!0)})})})).apply(this,arguments)}const Ut={LOCAL:"local",NONE:"none",SESSION:"session"},Vr=P.aC,as="persistence";function ni(T){return _i.apply(this,arguments)}function _i(){return(_i=(0,S.Z)(function*(T){yield T._initializationPromise;const E=Fr(),w=P.aF(as,T.config.apiKey,T.name);E&&E.setItem(w,T._getPersistence())})).apply(this,arguments)}function Fr(){var T;try{return(null===(T=function Ki(){return typeof window<"u"?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch{return null}}const an=P.aC;class Tr{constructor(){this.browserResolver=P.aE(P.k),this.cordovaResolver=P.aE(K),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aG,this._overrideRedirectResult=P.aH}_initialize(E){var w=this;return(0,S.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(E)})()}_openPopup(E,w,x,R){var oe=this;return(0,S.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openPopup(E,w,x,R)})()}_openRedirect(E,w,x,R){var oe=this;return(0,S.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openRedirect(E,w,x,R)})()}_isIframeWebStorageSupported(E,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(E,w)}_originValidation(E){return this.assertedUnderlyingResolver._originValidation(E)}get _shouldInitProactively(){return $n()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return an(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var E=this;return(0,S.Z)(function*(){if(E.underlyingResolver)return;const w=yield function ur(){return os.apply(this,arguments)}();E.underlyingResolver=w?E.cordovaResolver:E.browserResolver})()}}function hn(T){return T.unwrap()}function Mn(T){return yi(T)}function yi(T){const{_tokenResponse:E}=T instanceof ke.ZR?T.customData:T;if(!E)return null;if(!(T instanceof ke.ZR)&&"temporaryProof"in E&&"phoneNumber"in E)return P.P.credentialFromResult(T);const w=E.providerId;if(!w||w===P.p.PASSWORD)return null;let x;switch(w){case P.p.GOOGLE:x=P.X;break;case P.p.FACEBOOK:x=P.W;break;case P.p.GITHUB:x=P.Y;break;case P.p.TWITTER:x=P.$;break;default:const{oauthIdToken:R,oauthAccessToken:oe,oauthTokenSecret:me,pendingToken:je,nonce:gt}=E;return oe||me||R||je?je?w.startsWith("saml.")?P.aQ._create(w,je):P.N._fromParams({providerId:w,signInMethod:w,pendingToken:je,idToken:R,accessToken:oe}):new P.Z(w).credential({idToken:R,accessToken:oe,rawNonce:gt}):null}return T instanceof ke.ZR?x.credentialFromError(T):x.credentialFromResult(T)}function Wt(T,E){return E.catch(w=>{throw w instanceof ke.ZR&&function Ms(T,E){var w;const x=null===(w=E.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===E?.code)E.resolver=new xn(T,P.as(T,E));else if(x){const R=yi(E),oe=E;R&&(oe.credential=R,oe.tenantId=x.tenantId||void 0,oe.email=x.email||void 0,oe.phoneNumber=x.phoneNumber||void 0)}}(T,w),w}).then(w=>{const R=w.user;return{operationType:w.operationType,credential:Mn(w),additionalUserInfo:P.aq(w),user:cr.getOrCreate(R)}})}function vi(T,E){return us.apply(this,arguments)}function us(){return(us=(0,S.Z)(function*(T,E){const w=yield E;return{verificationId:w.verificationId,confirm:x=>Wt(T,w.confirm(x))}})).apply(this,arguments)}class xn{constructor(E,w){this.resolver=w,this.auth=function lr(T){return T.wrapped()}(E)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(E){return Wt(hn(this.auth),this.resolver.resolveSignIn(E))}}class cr{constructor(E){this._delegate=E,this.multiFactor=P.at(E)}static getOrCreate(E){return cr.USER_MAP.has(E)||cr.USER_MAP.set(E,new cr(E)),cr.USER_MAP.get(E)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(E){return this._delegate.getIdTokenResult(E)}getIdToken(E){return this._delegate.getIdToken(E)}linkAndRetrieveDataWithCredential(E){return this.linkWithCredential(E)}linkWithCredential(E){var w=this;return(0,S.Z)(function*(){return Wt(w.auth,P.a2(w._delegate,E))})()}linkWithPhoneNumber(E,w){var x=this;return(0,S.Z)(function*(){return vi(x.auth,P.l(x._delegate,E,w))})()}linkWithPopup(E){var w=this;return(0,S.Z)(function*(){return Wt(w.auth,P.d(w._delegate,E,Tr))})()}linkWithRedirect(E){var w=this;return(0,S.Z)(function*(){return yield ni(P.aJ(w.auth)),P.g(w._delegate,E,Tr)})()}reauthenticateAndRetrieveDataWithCredential(E){return this.reauthenticateWithCredential(E)}reauthenticateWithCredential(E){var w=this;return(0,S.Z)(function*(){return Wt(w.auth,P.a3(w._delegate,E))})()}reauthenticateWithPhoneNumber(E,w){return vi(this.auth,P.r(this._delegate,E,w))}reauthenticateWithPopup(E){return Wt(this.auth,P.e(this._delegate,E,Tr))}reauthenticateWithRedirect(E){var w=this;return(0,S.Z)(function*(){return yield ni(P.aJ(w.auth)),P.h(w._delegate,E,Tr)})()}sendEmailVerification(E){return P.ag(this._delegate,E)}unlink(E){var w=this;return(0,S.Z)(function*(){return yield P.ap(w._delegate,E),w})()}updateEmail(E){return P.al(this._delegate,E)}updatePassword(E){return P.am(this._delegate,E)}updatePhoneNumber(E){return P.u(this._delegate,E)}updateProfile(E){return P.ak(this._delegate,E)}verifyBeforeUpdateEmail(E,w){return P.ah(this._delegate,E,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cr.USER_MAP=new WeakMap;const On=P.aC;let Dr=(()=>{class T{constructor(w,x){if(this.app=w,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=w.options;On(R,"invalid-api-key",{appName:w.name}),On(R,"invalid-api-key",{appName:w.name});const oe=typeof window<"u"?Tr:void 0;this._delegate=x.initialize({options:{persistence:cs(R,w.name),popupRedirectResolver:oe}}),this._delegate._updateErrorMap(P.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,x){P.K(this._delegate,w,x)}applyActionCode(w){return P.a7(this._delegate,w)}checkActionCode(w){return P.a8(this._delegate,w)}confirmPasswordReset(w,x){return P.a6(this._delegate,w,x)}createUserWithEmailAndPassword(w,x){var R=this;return(0,S.Z)(function*(){return Wt(R._delegate,P.aa(R._delegate,w,x))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return P.af(this._delegate,w)}isSignInWithEmailLink(w){return P.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,S.Z)(function*(){On(Pn(),w._delegate,"operation-not-supported-in-this-environment");const x=yield P.j(w._delegate,Tr);return x?Wt(w._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function ee(T,E){(0,P.aJ)(T)._logFramework(E)}(this._delegate,w)}onAuthStateChanged(w,x,R){const{next:oe,error:me,complete:je}=ls(w,x,R);return this._delegate.onAuthStateChanged(oe,me,je)}onIdTokenChanged(w,x,R){const{next:oe,error:me,complete:je}=ls(w,x,R);return this._delegate.onIdTokenChanged(oe,me,je)}sendSignInLinkToEmail(w,x){return P.ac(this._delegate,w,x)}sendPasswordResetEmail(w,x){return P.a5(this._delegate,w,x||void 0)}setPersistence(w){var x=this;return(0,S.Z)(function*(){let R;switch(function Ps(T,E){Vr(Object.values(Ut).includes(E),T,"invalid-persistence-type"),(0,ke.b$)()?Vr(E!==Ut.SESSION,T,"unsupported-persistence-type"):(0,ke.UG)()?Vr(E===Ut.NONE,T,"unsupported-persistence-type"):qt()?Vr(E===Ut.NONE||E===Ut.LOCAL&&(0,ke.hl)(),T,"unsupported-persistence-type"):Vr(E===Ut.NONE||xt(),T,"unsupported-persistence-type")}(x._delegate,w),w){case Ut.SESSION:R=P.a;break;case Ut.LOCAL:R=(yield P.aE(P.i)._isAvailable())?P.i:P.b;break;case Ut.NONE:R=P.U;break;default:return P.ax("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return Wt(this._delegate,P.a0(this._delegate))}signInWithCredential(w){return Wt(this._delegate,P.a1(this._delegate,w))}signInWithCustomToken(w){return Wt(this._delegate,P.a4(this._delegate,w))}signInWithEmailAndPassword(w,x){return Wt(this._delegate,P.ab(this._delegate,w,x))}signInWithEmailLink(w,x){return Wt(this._delegate,P.ae(this._delegate,w,x))}signInWithPhoneNumber(w,x){return vi(this._delegate,P.s(this._delegate,w,x))}signInWithPopup(w){var x=this;return(0,S.Z)(function*(){return On(Pn(),x._delegate,"operation-not-supported-in-this-environment"),Wt(x._delegate,P.c(x._delegate,w,Tr))})()}signInWithRedirect(w){var x=this;return(0,S.Z)(function*(){return On(Pn(),x._delegate,"operation-not-supported-in-this-environment"),yield ni(x._delegate),P.f(x._delegate,w,Tr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return P.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=Ut,T})();function ls(T,E,w){let x=T;"function"!=typeof T&&({next:x,error:E,complete:w}=T);const R=x;return{next:me=>R(me&&cr.getOrCreate(me)),error:E,complete:w}}function cs(T,E){const w=function wr(T,E){const w=Fr();if(!w)return[];const x=P.aF(as,T,E);switch(w.getItem(x)){case Ut.NONE:return[P.U];case Ut.LOCAL:return[P.i,P.a];case Ut.SESSION:return[P.a];default:return[]}}(T,E);if(typeof self<"u"&&!w.includes(P.i)&&w.push(P.i),typeof window<"u")for(const x of[P.b,P.a])w.includes(x)||w.push(x);return w.includes(P.U)||w.push(P.U),w}class ds{constructor(){this.providerId="phone",this._delegate=new P.P(hn(Ee.Z.auth()))}static credential(E,w){return P.P.credential(E,w)}verifyPhoneNumber(E,w){return this._delegate.verifyPhoneNumber(E,w)}unwrap(){return this._delegate}}ds.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,ds.PROVIDER_ID=P.P.PROVIDER_ID;const ao=P.aC;class xs{constructor(E,w,x=Ee.Z.app()){var R;ao(null===(R=x.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new P.R(x.auth(),E,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ni(T){T.INTERNAL.registerComponent(new Rn.wA("auth-compat",E=>{const w=E.getProvider("app-compat").getImmediate(),x=E.getProvider("auth");return new Dr(w,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.V,FacebookAuthProvider:P.W,GithubAuthProvider:P.Y,GoogleAuthProvider:P.X,OAuthProvider:P.Z,SAMLAuthProvider:P._,PhoneAuthProvider:ds,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:xs,TwitterAuthProvider:P.$,Auth:Dr,AuthCredential:P.L,Error:ke.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.5.14")}(Ee.Z)},861:(qi,Bn,We)=>{function S(P,ke,Ot,cn,Rn,Jt,At){try{var ae=P[Jt](At),pe=ae.value}catch(Fe){return void Ot(Fe)}ae.done?ke(pe):Promise.resolve(pe).then(cn,Rn)}function Ee(P){return function(){var ke=this,Ot=arguments;return new Promise(function(cn,Rn){var Jt=P.apply(ke,Ot);function At(pe){S(Jt,cn,Rn,At,ae,"next",pe)}function ae(pe){S(Jt,cn,Rn,At,ae,"throw",pe)}At(void 0)})}}We.d(Bn,{Z:()=>Ee})},582:(qi,Bn,We)=>{function ke(K,Y){var ee={};for(var re in K)Object.prototype.hasOwnProperty.call(K,re)&&Y.indexOf(re)<0&&(ee[re]=K[re]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(re=Object.getOwnPropertySymbols(K);se<re.length;se++)Y.indexOf(re[se])<0&&Object.prototype.propertyIsEnumerable.call(K,re[se])&&(ee[re[se]]=K[re[se]])}return ee}function Fe(K,Y,ee,re){return new(ee||(ee=Promise))(function(J,Ie){function vt(Mt){try{Oe(re.next(Mt))}catch(rn){Ie(rn)}}function be(Mt){try{Oe(re.throw(Mt))}catch(rn){Ie(rn)}}function Oe(Mt){Mt.done?J(Mt.value):function se(J){return J instanceof ee?J:new ee(function(Ie){Ie(J)})}(Mt.value).then(vt,be)}Oe((re=re.apply(K,Y||[])).next())})}function yt(K){return this instanceof yt?(this.v=K,this):new yt(K)}function Ft(K,Y,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,re=ee.apply(K,Y||[]),J=[];return se=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),vt("next"),vt("throw"),vt("return",function Ie(xt){return function(qt){return Promise.resolve(qt).then(xt,rn)}}),se[Symbol.asyncIterator]=function(){return this},se;function vt(xt,qt){re[xt]&&(se[xt]=function(Pn){return new Promise(function($n,ur){J.push([xt,Pn,$n,ur])>1||be(xt,Pn)})},qt&&(se[xt]=qt(se[xt])))}function be(xt,qt){try{!function Oe(xt){xt.value instanceof yt?Promise.resolve(xt.value.v).then(Mt,rn):ar(J[0][2],xt)}(re[xt](qt))}catch(Pn){ar(J[0][3],Pn)}}function Mt(xt){be("next",xt)}function rn(xt){be("throw",xt)}function ar(xt,qt){xt(qt),J.shift(),J.length&&be(J[0][0],J[0][1])}}function kt(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,Y=K[Symbol.asyncIterator];return Y?Y.call(K):(K=function _t(K){var Y="function"==typeof Symbol&&Symbol.iterator,ee=Y&&K[Y],re=0;if(ee)return ee.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&re>=K.length&&(K=void 0),{value:K&&K[re++],done:!K}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ee={},re("next"),re("throw"),re("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function re(J){ee[J]=K[J]&&function(Ie){return new Promise(function(vt,be){!function se(J,Ie,vt,be){Promise.resolve(be).then(function(Oe){J({value:Oe,done:vt})},Ie)}(vt,be,(Ie=K[J](Ie)).done,Ie.value)})}}}We.d(Bn,{FC:()=>Ft,KL:()=>kt,_T:()=>ke,mG:()=>Fe,qq:()=>yt}),"function"==typeof SuppressedError&&SuppressedError}},qi=>{qi(qi.s=857)}]);